"use strict";!function(){function e(e){if(void 0===e)throw new Error('Pathformer [constructor]: "element" parameter is required');if(e.constructor===String&&!(e=document.getElementById(e)))throw new Error('Pathformer [constructor]: "element" parameter is not related to an existing ID');if(!(e.constructor instanceof window.SVGElement||/^svg$/i.test(e.nodeName)))throw new Error('Pathformer [constructor]: "element" parameter must be a string or a SVGelement');this.el=e,this.scan(e)}function t(e,t,r){n(),this.isReady=!1,this.setElement(e,t),this.setOptions(t),this.setCallback(r),this.isReady&&this.init()}e.prototype.TYPES=["line","ellipse","circle","polygon","polyline","rect"],e.prototype.ATTR_WATCH=["cx","cy","points","r","rx","ry","x","x1","x2","y","y1","y2"],e.prototype.scan=function(e){for(var t,n,r,i,a=e.querySelectorAll(this.TYPES.join(",")),o=0;o<a.length;o++)n=a[o],t=this[n.tagName.toLowerCase()+"ToPath"],r=t(this.parseAttr(n.attributes)),i=this.pathMaker(n,r),n.parentNode.replaceChild(i,n)},e.prototype.lineToPath=function(e){var t={},n=e.x1||0,r=e.y1||0,i=e.x2||0,a=e.y2||0;return t.d="M"+n+","+r+"L"+i+","+a,t},e.prototype.rectToPath=function(e){var t={},n=parseFloat(e.x)||0,r=parseFloat(e.y)||0,i=parseFloat(e.width)||0,a=parseFloat(e.height)||0;return t.d="M"+n+" "+r+" ",t.d+="L"+(n+i)+" "+r+" ",t.d+="L"+(n+i)+" "+(r+a)+" ",t.d+="L"+n+" "+(r+a)+" Z",t},e.prototype.polylineToPath=function(e){var t,n,r={},i=e.points.trim().split(" ");if(-1===e.points.indexOf(",")){var a=[];for(t=0;t<i.length;t+=2)a.push(i[t]+","+i[t+1]);i=a}for(n="M"+i[0],t=1;t<i.length;t++)-1!==i[t].indexOf(",")&&(n+="L"+i[t]);return r.d=n,r},e.prototype.polygonToPath=function(t){var n=e.prototype.polylineToPath(t);return n.d+="Z",n},e.prototype.ellipseToPath=function(e){var t={},n=parseFloat(e.rx)||0,r=parseFloat(e.ry)||0,i=parseFloat(e.cx)||0,a=parseFloat(e.cy)||0,o=i-n,s=a,u=parseFloat(i)+parseFloat(n),l=a;return t.d="M"+o+","+s+"A"+n+","+r+" 0,1,1 "+u+","+l+"A"+n+","+r+" 0,1,1 "+o+","+l,t},e.prototype.circleToPath=function(e){var t={},n=parseFloat(e.r)||0,r=parseFloat(e.cx)||0,i=parseFloat(e.cy)||0,a=r-n,o=i,s=parseFloat(r)+parseFloat(n),u=i;return t.d="M"+a+","+o+"A"+n+","+n+" 0,1,1 "+s+","+u+"A"+n+","+n+" 0,1,1 "+a+","+u,t},e.prototype.pathMaker=function(e,t){var n,r,i=document.createElementNS("http://www.w3.org/2000/svg","path");for(n=0;n<e.attributes.length;n++)r=e.attributes[n],-1===this.ATTR_WATCH.indexOf(r.name)&&i.setAttribute(r.name,r.value);for(n in t)i.setAttribute(n,t[n]);return i},e.prototype.parseAttr=function(e){for(var t,n={},r=0;r<e.length;r++){if(t=e[r],-1!==this.ATTR_WATCH.indexOf(t.name)&&-1!==t.value.indexOf("%"))throw new Error("Pathformer [parseAttr]: a SVG shape got values in percentage. This cannot be transformed into 'path' tags. Please use 'viewBox'.");n[t.name]=t.value}return n};var n,r,i,a;t.LINEAR=function(e){return e},t.EASE=function(e){return-Math.cos(e*Math.PI)/2+.5},t.EASE_OUT=function(e){return 1-Math.pow(1-e,3)},t.EASE_IN=function(e){return Math.pow(e,3)},t.EASE_OUT_BOUNCE=function(e){var t=1-Math.cos(.5*e*Math.PI),n=Math.pow(t,1.5),r=Math.pow(1-e,2);return 1-r+(1-Math.abs(Math.cos(2.5*n*Math.PI)))*r},t.prototype.setElement=function(e,t){if(void 0===e)throw new Error('Vivus [constructor]: "element" parameter is required');if(e.constructor===String&&!(e=document.getElementById(e)))throw new Error('Vivus [constructor]: "element" parameter is not related to an existing ID');if(this.parentEl=e,t&&t.file){var n=document.createElement("object");n.setAttribute("type","image/svg+xml"),n.setAttribute("data",t.file),n.setAttribute("built-by-vivus","true"),e.appendChild(n),e=n}switch(e.constructor){case window.SVGSVGElement:case window.SVGElement:this.el=e,this.isReady=!0;break;case window.HTMLObjectElement:var r,i;i=this,(r=function(t){if(!i.isReady){if(i.el=e.contentDocument&&e.contentDocument.querySelector("svg"),!i.el&&t)throw new Error("Vivus [constructor]: object loaded does not contain any SVG");return i.el?(e.getAttribute("built-by-vivus")&&(i.parentEl.insertBefore(i.el,e),i.parentEl.removeChild(e),i.el.setAttribute("width","100%"),i.el.setAttribute("height","100%")),i.isReady=!0,i.init(),!0):void 0}})()||e.addEventListener("load",r);break;default:throw new Error('Vivus [constructor]: "element" parameter is not valid (or miss the "file" attribute)')}},t.prototype.setOptions=function(e){var n=["delayed","sync","async","nsync","oneByOne","scenario","scenario-sync"],r=["inViewport","manual","autostart"];if(void 0!==e&&e.constructor!==Object)throw new Error('Vivus [constructor]: "options" parameter must be an object');if(e=e||{},e.type&&-1===n.indexOf(e.type))throw new Error("Vivus [constructor]: "+e.type+" is not an existing animation `type`");if(this.type=e.type||n[0],e.start&&-1===r.indexOf(e.start))throw new Error("Vivus [constructor]: "+e.start+" is not an existing `start` option");if(this.start=e.start||r[0],this.isIE=-1!==window.navigator.userAgent.indexOf("MSIE")||-1!==window.navigator.userAgent.indexOf("Trident/")||-1!==window.navigator.userAgent.indexOf("Edge/"),this.duration=a(e.duration,120),this.delay=a(e.delay,null),this.dashGap=a(e.dashGap,1),this.forceRender=e.hasOwnProperty("forceRender")?!!e.forceRender:this.isIE,this.reverseStack=!!e.reverseStack,this.selfDestroy=!!e.selfDestroy,this.onReady=e.onReady,this.map=[],this.frameLength=this.currentFrame=this.delayUnit=this.speed=this.handle=null,this.ignoreInvisible=!!e.hasOwnProperty("ignoreInvisible")&&!!e.ignoreInvisible,this.animTimingFunction=e.animTimingFunction||t.LINEAR,this.pathTimingFunction=e.pathTimingFunction||t.LINEAR,this.delay>=this.duration)throw new Error("Vivus [constructor]: delay must be shorter than duration")},t.prototype.setCallback=function(e){if(e&&e.constructor!==Function)throw new Error('Vivus [constructor]: "callback" parameter must be a function');this.callback=e||function(){}},t.prototype.mapping=function(){var e,t,n,r,i,o,s,u;for(u=o=s=0,t=this.el.querySelectorAll("path"),e=0;e<t.length;e++)n=t[e],this.isInvisible(n)||(i={el:n,length:Math.ceil(n.getTotalLength())},isNaN(i.length)?window.console&&console.warn&&console.warn("Vivus [mapping]: cannot retrieve a path element length",n):(this.map.push(i),n.style.strokeDasharray=i.length+" "+(i.length+2*this.dashGap),n.style.strokeDashoffset=i.length+this.dashGap,i.length+=this.dashGap,o+=i.length,this.renderPath(e)));for(o=0===o?1:o,this.delay=null===this.delay?this.duration/3:this.delay,this.delayUnit=this.delay/(t.length>1?t.length-1:1),this.reverseStack&&this.map.reverse(),e=0;e<this.map.length;e++){switch(i=this.map[e],this.type){case"delayed":i.startAt=this.delayUnit*e,i.duration=this.duration-this.delay;break;case"oneByOne":i.startAt=s/o*this.duration,i.duration=i.length/o*this.duration;break;case"sync":case"async":case"nsync":i.startAt=0,i.duration=this.duration;break;case"scenario-sync":n=i.el,r=this.parseAttr(n),i.startAt=u+(a(r["data-delay"],this.delayUnit)||0),i.duration=a(r["data-duration"],this.duration),u=void 0!==r["data-async"]?i.startAt:i.startAt+i.duration,this.frameLength=Math.max(this.frameLength,i.startAt+i.duration);break;case"scenario":n=i.el,r=this.parseAttr(n),i.startAt=a(r["data-start"],this.delayUnit)||0,i.duration=a(r["data-duration"],this.duration),this.frameLength=Math.max(this.frameLength,i.startAt+i.duration)}s+=i.length,this.frameLength=this.frameLength||this.duration}},t.prototype.drawer=function(){var e=this;if(this.currentFrame+=this.speed,this.currentFrame<=0)this.stop(),this.reset();else{if(!(this.currentFrame>=this.frameLength))return this.trace(),void(this.handle=r(function(){e.drawer()}));this.stop(),this.currentFrame=this.frameLength,this.trace(),this.selfDestroy&&this.destroy()}this.callback(this),this.instanceCallback&&(this.instanceCallback(this),this.instanceCallback=null)},t.prototype.trace=function(){var e,t,n,r;for(r=this.animTimingFunction(this.currentFrame/this.frameLength)*this.frameLength,e=0;e<this.map.length;e++)n=this.map[e],t=(r-n.startAt)/n.duration,t=this.pathTimingFunction(Math.max(0,Math.min(1,t))),n.progress!==t&&(n.progress=t,n.el.style.strokeDashoffset=Math.floor(n.length*(1-t)),this.renderPath(e))},t.prototype.renderPath=function(e){if(this.forceRender&&this.map&&this.map[e]){var t=this.map[e],n=t.el.cloneNode(!0);t.el.parentNode.replaceChild(n,t.el),t.el=n}},t.prototype.init=function(){this.frameLength=0,this.currentFrame=0,this.map=[],new e(this.el),this.mapping(),this.starter(),this.onReady&&this.onReady(this)},t.prototype.starter=function(){switch(this.start){case"manual":return;case"autostart":this.play();break;case"inViewport":var e=this,t=function(){e.isInViewport(e.parentEl,1)&&(e.play(),window.removeEventListener("scroll",t))};window.addEventListener("scroll",t),t()}},t.prototype.getStatus=function(){return 0===this.currentFrame?"start":this.currentFrame===this.frameLength?"end":"progress"},t.prototype.reset=function(){return this.setFrameProgress(0)},t.prototype.finish=function(){return this.setFrameProgress(1)},t.prototype.setFrameProgress=function(e){return e=Math.min(1,Math.max(0,e)),this.currentFrame=Math.round(this.frameLength*e),this.trace(),this},t.prototype.play=function(e,t){if(this.instanceCallback=null,e&&"function"==typeof e)this.instanceCallback=e,e=null;else if(e&&"number"!=typeof e)throw new Error("Vivus [play]: invalid speed");return t&&"function"==typeof t&&!this.instanceCallback&&(this.instanceCallback=t),this.speed=e||1,this.handle||this.drawer(),this},t.prototype.stop=function(){return this.handle&&(i(this.handle),this.handle=null),this},t.prototype.destroy=function(){this.stop();var e,t;for(e=0;e<this.map.length;e++)t=this.map[e],t.el.style.strokeDashoffset=null,t.el.style.strokeDasharray=null,this.renderPath(e)},t.prototype.isInvisible=function(e){var t,n=e.getAttribute("data-ignore");return null!==n?"false"!==n:!!this.ignoreInvisible&&(t=e.getBoundingClientRect(),!t.width&&!t.height)},t.prototype.parseAttr=function(e){var t,n={};if(e&&e.attributes)for(var r=0;r<e.attributes.length;r++)t=e.attributes[r],n[t.name]=t.value;return n},t.prototype.isInViewport=function(e,t){var n=this.scrollY(),r=n+this.getViewportH(),i=e.getBoundingClientRect(),a=i.height,o=n+i.top,s=o+a;return t=t||0,r>=o+a*t&&s>=n},t.prototype.getViewportH=function(){var e=this.docElem.clientHeight,t=window.innerHeight;return t>e?t:e},t.prototype.scrollY=function(){return window.pageYOffset||this.docElem.scrollTop},n=function(){t.prototype.docElem||(t.prototype.docElem=window.document.documentElement,r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}(),i=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return window.clearTimeout(e)}}())},a=function(e,t){var n=parseInt(e,10);return n>=0?n:t},"function"==typeof define&&define.amd?define([],function(){return t}):"object"==typeof exports?module.exports=t:window.Vivus=t}(),function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){var n=t[o][1][e];return i(n||e)},d,d.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){var r={};r.encode=function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},r.decode=function(e){for(var t=[],n=0;n<e.length;){var r=e[n++];r<128||(r<224?(r=(31&r)<<6,r|=63&e[n++]):r<240?(r=(15&r)<<12,r|=(63&e[n++])<<6,r|=63&e[n++]):(r=(7&r)<<18,r|=(63&e[n++])<<12,r|=(63&e[n++])<<6,r|=63&e[n++])),t.push(String.fromCharCode(r))}return t.join("")};var i={};!function(e){var t=function(t){for(var n=0,r=[],i=0|t.length/3;0<i--;){var a=(t[n]<<16)+(t[n+1]<<8)+t[n+2];n+=3,r.push(e.charAt(63&a>>18)),r.push(e.charAt(63&a>>12)),r.push(e.charAt(63&a>>6)),r.push(e.charAt(63&a))}if(2==t.length-n){var a=(t[n]<<16)+(t[n+1]<<8);r.push(e.charAt(63&a>>18)),r.push(e.charAt(63&a>>12)),r.push(e.charAt(63&a>>6)),r.push("=")}else if(1==t.length-n){var a=t[n]<<16;r.push(e.charAt(63&a>>18)),r.push(e.charAt(63&a>>12)),r.push("==")}return r.join("")},n=function(){for(var t=[],n=0;n<e.length;++n)t[e.charCodeAt(n)]=n;return t["=".charCodeAt(0)]=0,t}(),o=function(e){for(var t=0,r=[],i=0|e.length/4;0<i--;){var a=(n[e.charCodeAt(t)]<<18)+(n[e.charCodeAt(t+1)]<<12)+(n[e.charCodeAt(t+2)]<<6)+n[e.charCodeAt(t+3)];r.push(255&a>>16),r.push(255&a>>8),r.push(255&a),t+=4}return r&&("="==e.charAt(t-2)?(r.pop(),r.pop()):"="==e.charAt(t-1)&&r.pop()),r},u={};u.encode=function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},u.decode=function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")},i.decodeArray=function(e){var t=o(e);return new Uint8Array(t)},i.encodeASCII=function(e){var n=u.encode(e);return t(n)},i.decodeASCII=function(e){var t=o(e);return u.decode(t)},i.encode=function(e){var n=r.encode(e);return t(n)},i.decode=function(e){var t=o(e);return r.decode(t)}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),void 0!==n&&(n.decode=i.decode,n.decodeArray=i.decodeArray)},{}],2:[function(e,t,n){!function(e){var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(e){var n=e;return t.hasOwnProperty(e)&&(n=t[e]),String.fromCharCode(n)},r=15,i=32,a={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},o={17:2,18:4,21:6,22:8,23:10,19:13,20:15},s={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},u={25:2,26:4,29:6,30:8,31:10,27:13,28:15},l=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],d={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},f=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},c=function(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1};c.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var h=function(e,t,n,r,i,a){this.uchar=e||" ",this.penState=new c(t,n,r,i,a)};h.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var g=function(){this.chars=[];for(var e=0;e<i;e++)this.chars.push(new h);this.pos=0,this.currPenState=new c};g.prototype={equals:function(e){for(var t=!0,n=0;n<i;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<i;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<i;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(d.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>i&&(d.log("ERROR","Too large cursor position "+this.pos),this.pos=i)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=n(e);return this.pos>=i?void d.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),void this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;t<i;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<i;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};var p=function(){this.rows=[];for(var e=0;e<r;e++)this.rows.push(new g);this.currRow=14,this.nrRollUpRows=null,this.reset()};p.prototype={reset:function(){for(var e=0;e<r;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<r;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<r;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<r;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){d.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){d.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var r=e.indent,i=Math.max(r-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},setBkgData:function(e){d.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null===this.nrRollUpRows)return void d.log("DEBUG","roll_up but nrRollUpRows not set yet");d.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),d.log("INFO","Rolling up")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",i=-1,a=0;a<r;a++){var o=this.rows[a].getTextString();o&&(i=a+1,e?t.push("Row "+i+': "'+o+'"'):t.push(o.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var v=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new p,this.nonDisplayedMemory=new p,this.lastOutputScreen=new p,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};v.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,d.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";d.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(d.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){d.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){d.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){d.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){d.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){d.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){d.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){d.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){d.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){d.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){d.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){d.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(d.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,d.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){d.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}d.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=d.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var m=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new v(1,t),new v(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};m.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r,i,a=!1;this.lastTime=e,d.setTime(e);for(var o=0;o<t.length;o+=2)if(r=127&t[o],i=127&t[o+1],0!==r||0!==i){if(d.log("DATA","["+f([t[o],t[o+1]])+"] -> ("+f([r,i])+")"),n=this.parseCmd(r,i),n||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(a=this.parseChars(r,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(a)}else d.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,d.log("WARNING","Couldn't parse cleaned data "+f([r,i])+" orig: "+f([t[o],t[o+1]])))}else this.dataCounters.padding+=2},parseCmd:function(e,t){var n=null,r=(20===e||28===e)&&32<=t&&t<=47,i=(23===e||31===e)&&33<=t&&t<=35;if(!r&&!i)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,d.log("DEBUG","Repeated command ("+f([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var a=this.channels[n-1];return 20===e||28===e?32===t?a.cc_RCL():33===t?a.cc_BS():34===t?a.cc_AOF():35===t?a.cc_AON():36===t?a.cc_DER():37===t?a.cc_RU(2):38===t?a.cc_RU(3):39===t?a.cc_RU(4):40===t?a.cc_FON():41===t?a.cc_RDC():42===t?a.cc_TR():43===t?a.cc_RTD():44===t?a.cc_EDM():45===t?a.cc_CR():46===t?a.cc_ENM():47===t&&a.cc_EOC():a.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return d.log("ERROR","Mismatch channel in midrow parsing"),!1;return this.channels[n-1].cc_MIDROW(t),d.log("DEBUG","MIDROW ("+f([e,t])+")"),!0}return!1},parsePAC:function(e,t){var n=null,r=null,i=(17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127,l=(16===e||24===e)&&64<=t&&t<=95;if(!i&&!l)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,r=64<=t&&t<=95?1===n?a[e]:s[e]:1===n?o[e]:u[e];var d=this.interpretPAC(r,t);return this.channels[n-1].setPAC(d),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(e,t){var r=null,i=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),17<=a&&a<=19){var o=t;o=17===a?t+80:18===a?t+112:t+144,d.log("INFO","Special char '"+n(o)+"' in channel "+r),i=[o]}else 32<=e&&e<=127&&(i=0===t?[e]:[e,t]);if(i){var s=f(i);d.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},parseBackgroundAttributes:function(e,t){var n,r,i,a,o=(16===e||24===e)&&32<=t&&t<=47,s=(23===e||31===e)&&45<=t&&t<=47;return!(!o&&!s||(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=l[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,a=this.channels[i-1],a.setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,0))},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};var y=function(e,t,n){for(var r=0,i=t,a=[];i<t+n;){if(r=e.getUint32(i),6===(31&e.getUint8(i+4)))for(var o=i+5,s=-1;o<i+4+r-1;){s=0;for(var u=255;255===u;)u=e.getUint8(o),s+=u,o++;var l=0;for(u=255;255===u;)u=e.getUint8(o),l+=u,o++;(function(e,t,n,r){if(4!==e||t<8)return null;var i=n.getUint8(r),a=n.getUint16(r+1),o=n.getUint32(r+3),s=n.getUint8(r+7);return 181==i&&49==a&&1195456820==o&&3==s})(s,l,e,o)&&a.push([o,l]),o+=l}i+=r+4}return a},_=function(e,t){var n=t[0],r=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var a=0;a<i;a++){var o=e.getUint8(n),s=4&o,u=3&o;n++;var l=e.getUint8(n);n++;var d=e.getUint8(n);n++,s&&(127&l)+(127&d)!=0&&(0===u?(r[0].push(l),r[0].push(d)):1===u&&(r[1].push(l),r[1].push(d)))}return r};e.logger=d,e.PenState=c,e.CaptionScreen=p,e.Cea608Parser=m,e.findCea608Nalus=y,e.extractCea608DataFromRange=_}(void 0===n?(void 0).cea608parser={}:n)},{}],3:[function(e,t,n){function r(e){var t,n,r;for(t=[],r=0,n=e.length;r<n;r+=1)e[r].isRoot?t.push("root"):t.push(e[r].name);var i=function(e,t){var n;if(null!==e&&null!==t)for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||(t[n]=e[n]))},a=function(e,t,n){var r,a,o,s,u;if(null!==e&&0!==e.length)for(r=0,a=e.length;r<a;r+=1)o=e[r],t.hasOwnProperty(o.name)&&(n.hasOwnProperty(o.name)?o.merge&&(s=t[o.name],u=n[o.name],"object"==typeof s&&"object"==typeof u?i(s,u):null!=o.mergeFunction?n[o.name]=o.mergeFunction(s,u):n[o.name]=s+u):n[o.name]=t[o.name])},o=function e(t,n){var r,i,o,s,u,l,d,f=t;if(null!==f.children&&0!==f.children.length)for(r=0,i=f.children.length;r<i;r+=1)if(l=f.children[r],n.hasOwnProperty(l.name))if(l.isArray)for(u=n[l.name+"_asArray"],o=0,s=u.length;o<s;o+=1)d=u[o],a(f.properties,n,d),e(l,d);else d=n[l.name],a(f.properties,n,d),e(l,d)};return{run:function n(r){var i,a,s,u,l,d,f;if(null===r)return r;if("object"!=typeof r)return r;for(i=0,a=t.length;i<a;i+=1)"root"===t[i]&&(l=e[i],d=r,o(l,d));for(u in r)if(r.hasOwnProperty(u)&&"__children"!=u){if(-1!==(s=t.indexOf(u)))if(l=e[s],l.isArray)for(f=r[u+"_asArray"],i=0,a=f.length;i<a;i+=1)d=f[i],o(l,d);else d=r[u],o(l,d);n(r[u])}return r}}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,t.exports=n.default},{}],4:[function(e,t,n){function r(e){function t(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function n(e){return e.prefix}function r(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function i(e,t,n,r){for(var i=0;i<e.length;i++){var a=e[i];if("string"==typeof a){if(a==r)break}else if(a instanceof RegExp){if(a.test(r))break}else if("function"==typeof a&&a(t,n,r))break}return i!=e.length}function a(t,n,r){switch(e.arrayAccessForm){case"property":t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&i(e.arrayAccessFormPaths,t,n,r)&&(t[n]=[t[n]])}function o(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");if(n.setHours(t[3],t[4],r[0]),r.length>1&&n.setMilliseconds(r[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]);i=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function s(t,n,r){if(e.datetimeAccessFormPaths.length>0){var a=r.split(".#")[0];return i(e.datetimeAccessFormPaths,t,n,a)?o(t):t}return t}function u(t,n,r,a){return!(n==S.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||i(e.xmlElementsFilter,t,r,a)}function l(r,i){if(r.nodeType==S.DOCUMENT_NODE){for(var o=new Object,d=r.childNodes,f=0;f<d.length;f++){var c=d[f];if(c.nodeType==S.ELEMENT_NODE)if(e.ignoreRoot)o=l(c);else{o={};var h=t(c);o[h]=l(c)}}return o}if(r.nodeType==S.ELEMENT_NODE){var o=new Object;o.__cnt=0;for(var g=[],d=r.childNodes,f=0;f<d.length;f++){var c=d[f],h=t(c);if(c.nodeType!=S.COMMENT_NODE){
var p=i+"."+h;if(u(o,c.nodeType,h,p))if(o.__cnt++,null==o[h]){var v=l(c,p);if("#text"!=h||/[^\s]/.test(v)){var m={};m[h]=v,g.push(m)}o[h]=v,a(o,h,p)}else{null!=o[h]&&(o[h]instanceof Array||(o[h]=[o[h]],a(o,h,p)));var v=l(c,p);if("#text"!=h||/[^\s]/.test(v)){var m={};m[h]=v,g.push(m)}o[h][o[h].length]=v}}}o.__children=g;for(var y=t(r),_=0;_<r.attributes.length;_++){var E=r.attributes[_];o.__cnt++;for(var T=E.value,b=0,R=e.matchers.length;b<R;b++){var A=e.matchers[b];A.test(E,y)&&(T=A.converter(E.value))}o[e.attributePrefix+E.name]=T}var w=n(r);return null!=w&&""!=w&&(o.__cnt++,o.__prefix=w),null!=o["#text"]&&(o.__text=o["#text"],o.__text instanceof Array&&(o.__text=o.__text.join("\n")),e.stripWhitespaces&&(o.__text=o.__text.trim()),delete o["#text"],"property"==e.arrayAccessForm&&delete o["#text_asArray"],o.__text=s(o.__text,h,i+"."+h)),null!=o["#cdata-section"]&&(o.__cdata=o["#cdata-section"],delete o["#cdata-section"],"property"==e.arrayAccessForm&&delete o["#cdata-section_asArray"]),0==o.__cnt&&"text"==e.emptyNodeForm?o="":1==o.__cnt&&null!=o.__text?o=o.__text:1!=o.__cnt||null==o.__cdata||e.keepCData?o.__cnt>1&&null!=o.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==o.__text||""==o.__text.trim())&&delete o.__text:o=o.__cdata,delete o.__cnt,!e.enableToStringFunc||null==o.__text&&null==o.__cdata||(o.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),o}if(r.nodeType==S.TEXT_NODE||r.nodeType==S.CDATA_SECTION_NODE)return r.nodeValue}function d(t,n,i,a){var o="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=i)for(var s=0;s<i.length;s++){var u=i[s],l=t[u];e.escapeMode&&(l=r(l)),o+=" "+u.substr(e.attributePrefix.length)+"=",o+=e.useDoubleQuotes?'"'+l+'"':"'"+l+"'"}return o+=a?"/>":">"}function f(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function c(e,t){return-1!==e.indexOf(t,e.length-t.length)}function h(t,n){return!!("property"==e.arrayAccessForm&&c(n.toString(),"_asArray")||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function)}function g(e){var t=0;if(e instanceof Object)for(var n in e)h(e,n)||t++;return t}function p(t,n,r){return 0==e.jsonPropertiesFilter.length||""==r||i(e.jsonPropertiesFilter,t,n,r)}function v(t){var n=[];if(t instanceof Object)for(var r in t)-1==r.toString().indexOf("__")&&0==r.toString().indexOf(e.attributePrefix)&&n.push(r);return n}function m(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(n+=e.escapeMode?r(t.__text):t.__text),n}function y(t){var n="";return t instanceof Object?n+=m(t):null!=t&&(n+=e.escapeMode?r(t):t),n}function _(e,t){return""===e?t:e+"."+t}function E(e,t,n,r){var i="";if(0==e.length)i+=d(e,t,n,!0);else for(var a=0;a<e.length;a++)i+=d(e[a],t,v(e[a]),!1),i+=T(e[a],_(r,t)),i+=f(e[a],t);return i}function T(e,t){var n="";if(g(e)>0)for(var r in e)if(!h(e,r)&&(""==t||p(e,r,_(t,r)))){var i=e[r],a=v(i);if(null==i||void 0==i)n+=d(i,r,a,!0);else if(i instanceof Object)if(i instanceof Array)n+=E(i,r,a,t);else if(i instanceof Date)n+=d(i,r,a,!1),n+=i.toISOString(),n+=f(i,r);else{var o=g(i);o>0||null!=i.__text||null!=i.__cdata?(n+=d(i,r,a,!1),n+=T(i,_(t,r)),n+=f(i,r)):n+=d(i,r,a,!0)}else n+=d(i,r,a,!1),n+=y(i),n+=f(i,r)}return n+=y(e)}e=e||{},function(){void 0===e.escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1)}();var S={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t=window.ActiveXObject||"ActiveXObject"in window;if(void 0===e)return null;var n;if(window.DOMParser){var r=new window.DOMParser,i=null;if(!t)try{i=r.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){i=null}try{n=r.parseFromString(e,"text/xml"),null!=i&&n.getElementsByTagNameNS(i,"parsererror").length>0&&(n=null)}catch(e){n=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e);return n},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?o(e):e},this.xml2json=function(e){return l(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return T(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,t.exports=n.default},{}],5:[function(e,t,n){(function(t){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(52),a=r(i),o=e(104),s=r(o),u=e(73),l=r(u),d=e(54),f=r(d),c=e(11),h="undefined"!=typeof window&&window||t,g=h.dashjs;g||(g=h.dashjs={}),g.MediaPlayer=a.default,g.Protection=s.default,g.MetricsReporting=l.default,g.MediaPlayerFactory=f.default,g.Version=(0,c.getVersionString)(),n.default=g,n.MediaPlayer=a.default,n.Protection=s.default,n.MetricsReporting=l.default,n.MediaPlayerFactory=f.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{104:104,11:11,52:52,54:54,73:73}],6:[function(e,t,n){var r={};r.parseBuffer=function(e){return new i(e).parse()},r.addBoxProcessor=function(e,t){"string"==typeof e&&"function"==typeof t&&(a.prototype._boxProcessors[e]=t)},r.createFile=function(){return new i},r.createBox=function(e,t,n){var r=a.create(e);return t&&t.append(r,n),r},r.createFullBox=function(e,t,n){var i=r.createBox(e,t,n);return i.version=0,i.flags=0,i},r.Utils={},r.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var r=[],i=0;if("utf-8"===n)for(;i<e.byteLength;){var a=e.getUint8(i++);a<128||(a<224?(a=(31&a)<<6,a|=63&e.getUint8(i++)):a<240?(a=(15&a)<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++)):(a=(7&a)<<18,a|=(63&e.getUint8(i++))<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++))),r.push(String.fromCharCode(a))}else for(;i<e.byteLength;)r.push(String.fromCharCode(e.getUint8(i++)));return r.join("")},r.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},r.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n){if(void 0===n||null===n)return void e.boxes.push(t);var r,i=-1;if("number"==typeof n)i=n;else{if("string"==typeof n)r=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);r=n.type}for(var a=0;a<e.boxes.length;a++)if(r===e.boxes[a].type){i=a+1;break}}e.boxes.splice(i,0,t)}},void 0!==n&&(n.parseBuffer=r.parseBuffer,n.addBoxProcessor=r.addBoxProcessor,n.createFile=r.createFile,n.createBox=r.createBox,n.createFullBox=r.createFullBox,n.Utils=r.Utils),r.Cursor=function(e){this.offset=void 0===e?0:e};var i=function(e){this._cursor=new r.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};i.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},i.prototype.fetchAll=function(e,t){var n=[];return i._sweep.call(this,e,n,t),n},i.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=a.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},i._sweep=function(e,t,n){this.type&&this.type==e&&t.push(this);for(var r in this.boxes){if(t.length&&n)return;i._sweep.call(this.boxes[r],e,t,n)}},i.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var n=new Uint8Array(t);for(this._rawo=new DataView(n.buffer),this.bytes=n,this._cursor.offset=0,e=0;e<this.boxes.length;e++)this.boxes[e].write();return n.buffer},i.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)};var a=function(){this._cursor=new r.Cursor};a.parse=function(e){var t=new a;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},a.create=function(e){var t=new a;return t.type=e,t.boxes=[],t},a.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],a.prototype._boxProcessors={},a.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},a.prototype._procFieldArray=function(e,t,n,r){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(n,r);else for(i=0;i<this[e].length;i++)this._writeField(n,r,this[e][i])},a.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},a.prototype._procEntries=function(e,t,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push({}),n.call(this,this[e][r]);else for(r=0;r<t;r++)n.call(this,this[e][r])},a.prototype._procSubEntries=function(e,t,n,r){var i;if(this._parsing)for(e[t]=[],i=0;i<n;i++)e[t].push({}),r.call(this,e[t][i]);else for(i=0;i<n;i++)r.call(this,e[t][i])},a.prototype._procEntryField=function(e,t,n,r){this._parsing?e[t]=this._readField(n,r):this._writeField(n,r,e[t])},a.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(a.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},a.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},a.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(n+4);t=r*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,t},a.prototype._readUint=function(e){var t,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:t=this._raw.getUint16(i),n=this._raw.getUint8(i+2),r=(t<<8)+n;break;case 32:r=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),n=this._raw.getUint32(i+4),r=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,r},a.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},a.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},a.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},a.prototype._readData=function(e){var t=e>0?e:this._raw.byteLength-(this._cursor.offset-this._offset),n=new DataView(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n},a.prototype._readUTF8String=function(){var e=this._readData();return r.Utils.dataViewToString(e)},a.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)return void(this._root._incomplete=!0);switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())},a.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},a.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(a.parse(this))},a.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)},a.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},a.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},a.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var r=Math.floor(t/Math.pow(2,32)),i=t-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(n+4,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},a.prototype._writeUint=function(e,t){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:n=(16776960&t)>>8,r=255&t,this._rawo.setUint16(i,n),this._rawo.setUint8(i+2,r);break;case 32:this._rawo.setUint32(i,t);break;case 64:n=Math.floor(t/Math.pow(2,32)),r=t-n*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(i+4,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},a.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},a.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},a.prototype._writeTemplate=function(e,t){var n=Math.floor(t),r=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,r)},a.prototype._writeData=function(e){if(e instanceof Array&&(e=new DataView(Uint8Array.from(e).buffer)),e instanceof Uint8Array&&(e=new DataView(e.buffer)),this._rawo){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.byteLength;n++)this._rawo.setUint8(t+n,e.getUint8(n));this._cursor.offset+=e.byteLength}else this.size+=e.byteLength},a.prototype._writeUTF8String=function(e){var t=r.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),i=0;i<t.length;i++)n.setUint8(i,t[i]);else this.size+=t.length},a.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},a.prototype._boxProcessors.avc1=a.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},a.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},a.prototype._boxProcessors.emsg=function(){this._procFullBox(),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("message_data","data",-1)},a.prototype._boxProcessors.free=a.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},a.prototype._boxProcessors.ftyp=a.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},a.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},a.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},a.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},a.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},a.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},a.prototype._boxProcessors.mp4a=a.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},a.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},a.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},a.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},a.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},a.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},a.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},a.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},a.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},a.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},a.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},a.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},a.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},a.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},a.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},a.prototype._boxProcessors["url "]=a.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},a.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},a.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},a.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},a.prototype._boxProcessors.vtte=function(){}},{}],7:[function(e,t,n){var r=n.decimalAdjust=function(e,t,n){return void 0===n||0==+n?Math[e](t):(t=+t,n=+n,isNaN(t)||"number"!=typeof n||n%1!=0?NaN:(t=t.toString().split("e"),t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+n:n))))};t.exports={round10:function(e,t){return r("round",e,t)},floor10:function(e,t){return r("floor",e,t)},ceil10:function(e,t){return r("ceil",e,t)}},t.exports.polyfill=function(){Math.round10||(Math.round10=t.exports.round10),Math.floor10||(Math.floor10=t.exports.floor10),Math.ceil10||(Math.ceil10=t.exports.ceil10)}},{}],8:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){d=e}function t(e){l=e}function n(){return l}function r(){var e="",t=null;d&&(t=(new Date).getTime(),e+="["+(t-f)+"]"),e.length>0&&(e+=" "),Array.apply(null,arguments).forEach(function(t){e+=t+" "}),l&&console.log(e),a.trigger(u.default.LOG,{message:e})}var i=this.context,a=(0,o.default)(i).getInstance(),s=void 0,l=void 0,d=void 0,f=void 0;return s={log:r,setLogTimestampVisible:e,setLogToBrowserConsole:t,getLogToBrowserConsole:n},function(){l=!0,d=!0,f=(new Date).getTime()}(),s}Object.defineProperty(n,"__esModule",{value:!0});var a=e(9),o=r(a),s=e(13),u=r(s),l=e(10),d=r(l);i.__dashjs_factory_name="Debug",n.default=d.default.getSingletonFactory(i),t.exports=n.default},{10:10,13:13,9:9}],9:[function(e,t,n){function r(){function e(e,t,n){var i=arguments.length<=3||void 0===arguments[3]?o:arguments[3];if(!e)throw new Error("event type cannot be null or undefined");if(!t||"function"!=typeof t)throw new Error("listener must be a function: "+t);if(!(r(e,t,n)>=0)){a[e]=a[e]||[];var s={callback:t,scope:n,priority:i};a[e].some(function(t,n){if(t&&i>t.priority)return a[e].splice(n,0,s),!0})||a[e].push(s)}}function t(e,t,n){if(e&&t&&a[e]){var i=r(e,t,n);i<0||(a[e][i]=null)}}function n(e,t){if(e&&a[e]){if(t=t||{},t.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,a[e]=a[e].filter(function(e){return e}),a[e].forEach(function(e){return e.callback.call(e.scope,t)})}}function r(e,t,n){var r=-1;return a[e]?(a[e].some(function(e,i){if(e&&e.callback===t&&(!n||n===e.scope))return r=i,!0}),r):r}function i(){a={}}var a={};return{on:e,off:t,trigger:n,reset:i}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=0;r.__dashjs_factory_name="EventBus";var s=a.default.getSingletonFactory(r);s.EVENT_PRIORITY_LOW=o,s.EVENT_PRIORITY_HIGH=5e3,n.default=s,t.exports=n.default},{10:10}],10:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t,n,r){var i=o(r);!i[e]&&t&&(i[e]={instance:t,override:n})}function t(e,t){for(var n in l){var r=l[n];if(r.context===e&&r.name===t)return r.instance}return null}function n(e,t,n){for(var r in l){var i=l[r];if(i.context===e&&i.name===t)return void(l[r].instance=n)}l.push({name:t,context:e,instance:n})}function r(e){return function(t){return void 0===t&&(t={}),{create:function(){return a(e.__dashjs_factory_name,e.apply({context:t},arguments),t,arguments)}}}}function i(e){return function(n){var r=void 0;return void 0===n&&(n={}),{getInstance:function(){return r||(r=t(n,e.__dashjs_factory_name)),r||(r=a(e.__dashjs_factory_name,e.apply({context:n},arguments),n,arguments),l.push({name:e.__dashjs_factory_name,context:n,instance:r})),r}}}}function a(e,t,n,r){var i=o(n),a=i[e];if(a){var u=a.instance;if(!a.override)return u.apply({context:n,factory:s},r);u=u.apply({context:n,factory:s,parent:t},r);for(var l in u)t.hasOwnProperty(l)&&(t[l]=u[l])}return t}function o(e){var t=void 0
;return u.forEach(function(n){n===e&&(t=n)}),t||(t=u.push(e)),t}var s=void 0,u=[],l=[];return s={extend:e,getSingletonInstance:t,setSingletonInstance:n,getSingletonFactory:i,getClassFactory:r}}();n.default=r,t.exports=n.default},{}],11:[function(e,t,n){function r(){return i}Object.defineProperty(n,"__esModule",{value:!0}),n.getVersionString=r;var i="2.5.0"},{}],12:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}},o=e(14),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_APPEND_COMPLETED="sourceBufferAppendCompleted",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return i(t,e),t}(s.default);n.default=u,t.exports=n.default},{14:14}],13:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}},o=e(12),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),t}(s.default),l=new u;n.default=l,t.exports=n.default},{12:12}],14:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}]),e}();n.default=a,t.exports=n.default},{}],15:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&e.dashManifestModel&&(L=e.dashManifestModel)}function t(){x=[],k={}}function n(e,t){return t.getRepresentationForQuality(e.quality)}function r(e){return k&&e&&k[e.streamInfo.id]?k[e.streamInfo.id][e.index]:null}function i(e){for(var t=x.length,n=0;n<t;n++){var r=x[n];if(e.id===r.id)return r}return null}function a(e,t){var n=new o.default,r=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index],i=L.getRepresentationFor(t.index,r);return n.id=t.id,n.quality=t.index,n.bandwidth=L.getBandwidth(i),n.DVRWindow=t.segmentAvailabilityRange,n.fragmentDuration=t.segmentDuration||(t.segments&&t.segments.length>0?t.segments[0].duration:NaN),n.MSETimeOffset=t.MSETimeOffset,n.useCalculatedLiveEdgeTime=t.useCalculatedLiveEdgeTime,n.mediaInfo=s(e,t.adaptation),n}function s(e,t){var n,r=new u.default,i=t.period.mpd.manifest.Period_asArray[t.period.index].AdaptationSet_asArray[t.index];return r.id=t.id,r.index=t.index,r.type=t.type,r.streamInfo=f(e,t.period),r.representationCount=L.getRepresentationCount(i),r.lang=L.getLanguageForAdaptation(i),n=L.getViewpointForAdaptation(i),r.viewpoint=n?n.value:void 0,r.accessibility=L.getAccessibilityForAdaptation(i).map(function(e){var t=e.value,n=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&void 0!==y.default&&(n=t?"cea-608:"+t:"cea-608",r.embeddedCaptions=!0),n}),r.audioChannelConfiguration=L.getAudioChannelConfigurationForAdaptation(i).map(function(e){return e.value}),r.roles=L.getRolesForAdaptation(i).map(function(e){return e.value}),r.codec=L.getCodec(i),r.mimeType=L.getMimeType(i),r.contentProtection=L.getContentProtectionData(i),r.bitrateList=L.getBitrateListForAdaptation(i),r.contentProtection&&r.contentProtection.forEach(function(e){e.KID=L.getKID(e)}),r.isText=L.getIsTextTrack(r.mimeType),r}function l(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type="embeddedText",e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=t+" "+n,e.roles=["caption"]}function f(e,t){var n=new d.default;return n.id=t.id,n.index=t.index,n.start=t.start,n.duration=t.duration,n.manifestInfo=h(e,t.mpd),n.isLast=1===e.Period_asArray.length||Math.abs(n.start+n.duration-n.manifestInfo.duration)<1,n.isFirst=1===e.Period_asArray.length||L.getRegularPeriods(e,L.getMpd(e))[0].id===t.id,n}function h(e,t){var n=new c.default;return n.DVRWindowSize=t.timeShiftBufferDepth,n.loadedTime=t.manifest.loadedTime,n.availableFrom=t.availabilityStartTime,n.minBufferTime=t.manifest.minBufferTime,n.maxFragmentDuration=t.maxSegmentDuration,n.duration=L.getDuration(e),n.isDynamic=L.getIsDynamic(e),n}function p(e,t,n){var r=L.getAdaptationForType(e,t.index,n,t);if(!r)return null;var a=i(t),o=a.id,u=L.getIndexForAdaptation(r,e,t.index);return k[o]=k[o]||L.getAdaptationsForPeriod(e,a),s(e,k[o][u])}function v(e,t,n){var r,a,o,u,d,f,c=i(t),h=c.id,g=L.getAdaptationsForType(e,t.index,"embeddedText"!==n?n:"video"),p=[];if(!g)return p;for(k[h]=k[h]||L.getAdaptationsForPeriod(e,c),u=0,f=g.length;u<f;u++){if(r=g[u],o=L.getIndexForAdaptation(r,e,t.index),a=s(e,k[h][o]),"embeddedText"===n){var v=a.accessibility.length;for(d=0;d<v;d++)if(a){var m=a.accessibility[d];if(0===m.indexOf("cea-608:")){var y=m.substring(8),_=y.split(";");if("CC"===_[0].substring(0,2))for(d=0;d<_.length;d++)a||(a=s.call(this,e,k[h][o])),l(a,_[d].substring(0,3),_[d].substring(4)),p.push(a),a=null;else for(d=0;d<_.length;d++)a||(a=s.call(this,e,k[h][o])),l(a,"CC"+(d+1),_[d]),p.push(a),a=null}else 0===m.indexOf("cea-608")&&(l(a,"CC1","eng"),p.push(a),a=null)}}a&&"embeddedText"!==n&&p.push(a)}return p}function m(e){if(!e)return null;var t=[],n=L.getMpd(e);x=L.getRegularPeriods(e,n),k={};for(var r=0,i=x.length;r<i;r++)t.push(f(e,x[r]));return t}function _(e){return h(e,L.getMpd(e))}function T(e,t){var n=e.getRepresentationController().getRepresentationForQuality(t);return e.getIndexHandler().getInitRequest(n)}function S(e,t){var r=n(t,e.getRepresentationController());return e.getIndexHandler().getNextSegmentRequest(r)}function b(e,t,r,i){var a=n(t,e.getRepresentationController());return e.getIndexHandler().getSegmentRequestForTime(a,r,i)}function R(e,t,r){var i=n(t,e.getRepresentationController());return e.getIndexHandler().generateSegmentRequestForTime(i,r)}function A(e){return e.getIndexHandler().getCurrentTime()}function w(e,t){return e.getIndexHandler().setCurrentTime(t)}function I(e,t){var n,a,o=i(t.getStreamInfo()),s=t.getMediaInfo(),u=r(s),l=t.getType();n=s.id,a=n?L.getAdaptationForId(n,e,o.index):L.getAdaptationForIndex(s.index,e,o.index),t.getRepresentationController().updateData(a,u,l)}function D(e,t,n){var r=t.getRepresentationForQuality(n);return r?a(e,r):null}function O(e,t){var n=t.getCurrentRepresentation();return n?a(e,n):null}function M(e,t,n){var r=new g.default,i=e.scheme_id_uri,a=e.value,o=e.timescale,s=e.presentation_time_delta,u=e.event_duration,l=e.id,d=e.message_data,f=n*o+s;return t[i]?(r.eventStream=t[i],r.eventStream.value=a,r.eventStream.timescale=o,r.duration=u,r.id=l,r.presentationTime=f,r.messageData=d,r.presentationTimeDelta=s,r):null}function C(e,t,a){var s=[];return t instanceof d.default?s=L.getEventsForPeriod(e,i(t)):t instanceof u.default?s=L.getEventStreamForAdaptationSet(e,r(t)):t instanceof o.default&&(s=L.getEventStreamForRepresentation(e,n(t,a.getRepresentationController()))),s}function P(){x=[],k={}}var L=void 0,x=void 0,k=void 0;return{initialize:t,convertDataToTrack:a,convertDataToMedia:s,convertDataToStream:f,getDataForTrack:n,getDataForMedia:r,getDataForStream:i,getStreamsInfo:m,getManifestInfo:_,getMediaInfoForType:p,getAllMediaInfoForType:v,getCurrentRepresentationInfo:O,getRepresentationInfoForQuality:D,updateData:I,getInitRequest:T,getNextFragmentRequest:S,getFragmentRequestForTime:b,generateFragmentRequestForTime:R,getIndexHandlerTime:A,setIndexHandlerTime:w,getEventsFor:C,getEvent:M,setConfig:e,reset:P,metricsList:E}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(175),o=r(a),s=e(170),u=r(s),l=e(172),d=r(l),f=e(169),c=r(f),h=e(42),g=r(h),p=e(10),v=r(p),m=e(2),y=r(m),_=e(20),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(_);i.__dashjs_factory_name="DashAdapter",n.default=v.default.getSingletonFactory(i),t.exports=n.default},{10:10,169:169,170:170,172:172,175:175,2:2,20:20,42:42}],16:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t){Z=t,Q=Z.getType(),W=Z.isDynamic(),$=(0,R.default)(F).create(e,W)}function n(){return Z}function r(e){X=e}function i(){return X}function a(){return Y}function s(){return J}function d(){$=null,X=0,J=NaN,z=NaN,Y=-1,W=null,Q=null,Z=null,U.off(f.default.INITIALIZATION_LOADED,x,V),U.off(f.default.SEGMENTS_LOADED,k,V)}function c(e){return e?e.split("$$").join("$"):e}function g(e,t){if(null===t||null===e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)}function p(e,t,n){var r,i,a=q.resolve(n.path);return a&&t!==a.url&&B.isRelative(t)?(r=a.url,i=a.serviceLocation,t&&(r=B.resolve(t,r))):r=t,!B.isRelative(r)&&(e.url=r,e.serviceLocation=i,!0)}function v(e,t){var n=new o.default,r=e.adaptation.period,i=r.start;if(n.mediaType=t,n.type=l.HTTPRequest.INIT_SEGMENT_TYPE,n.range=e.range,n.availabilityStartTime=G.calcAvailabilityStartTimeFromPresentationTime(i,r.mpd,W),n.availabilityEndTime=G.calcAvailabilityEndTimeFromPresentationTime(i+r.duration,r.mpd,W),n.quality=e.index,n.mediaInfo=Z.getMediaInfo(),n.representationId=e.id,p(n,e.initialization,e))return n}function y(e){return e?v(e,Q):null}function E(e){var t=!1;if(W||Y!==e.availableSegmentsNumber){var n=(0,S.getSegmentByIndex)(Y,e);if(n){var r=n.presentationStartTime-e.adaptation.period.start,i=e.adaptation.period.duration;N(e.segmentInfoType+": "+r+" / "+i),t=("SegmentTimeline"!==e.segmentInfoType||!W)&&r>=i}}else t=!0;return t}function b(e){return $.getSegments(e,z,Y,w)}function w(e,t){if(e.segments=t,t&&t.length>0&&(J=isNaN(J)?t[0].presentationStartTime:Math.min(t[0].presentationStartTime,J)),W&&isNaN(G.getExpectedLiveEdge())){var n=t[t.length-1],r=n.presentationStartTime,i=H.getMetricsFor("stream");G.setExpectedLiveEdge(r),H.updateManifestUpdateInfo(K.getCurrentManifestUpdate(i),{presentationStartTime:r})}}function I(e){if(!e)throw new u.default("no representation");return e.segments=null,b(e),e}function D(e,t){var n,r=T.default.hasInitialization(e),i=T.default.hasSegments(e);return e.segmentDuration||e.segments||I(e),e.segmentAvailabilityRange=null,e.segmentAvailabilityRange=G.calcSegmentAvailabilityRange(e,W),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime?(n=new u.default(A,"no segments are available yet",{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void U.trigger(f.default.REPRESENTATION_UPDATED,{sender:this,representation:e,error:n})):(t||(Y=-1),e.segmentDuration&&I(e),r||j.loadInitialization(e),i||j.loadSegments(e,Q,e.indexRange),void(r&&i&&U.trigger(f.default.REPRESENTATION_UPDATED,{sender:this,representation:e})))}function O(e,t,n){var r,i,a,o,s,u=t.segments,l=u?u.length:null,d=-1;if(u&&l>0)for(s=0;s<l;s++)if(i=u[s],a=i.presentationStartTime,o=i.duration,r=void 0===n||null===n?o/2:n,e+r>=a&&e-r<a+o){d=i.availabilityIdx;break}return d}function M(e){if(null===e||void 0===e)return null;var t=new o.default,n=e.representation,r=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].bandwidth,i=e.media;return i=(0,S.replaceTokenForTemplate)(i,"Number",e.replacementNumber),i=(0,S.replaceTokenForTemplate)(i,"Time",e.replacementTime),i=(0,S.replaceTokenForTemplate)(i,"Bandwidth",r),i=g(i,n.id),i=c(i),t.mediaType=Q,t.type=l.HTTPRequest.MEDIA_SEGMENT_TYPE,t.range=e.mediaRange,t.startTime=e.presentationStartTime,t.duration=e.duration,t.timescale=n.timescale,t.availabilityStartTime=e.availabilityStartTime,t.availabilityEndTime=e.availabilityEndTime,t.wallStartTime=e.wallStartTime,t.quality=n.index,t.index=e.availabilityIdx,t.mediaInfo=Z.getMediaInfo(),t.adaptationIndex=n.adaptation.index,p(t,i,n)?t:void 0}function C(e,t,n){var r,i,a,s=Y,u=!!n&&n.keepIdx,l=n?n.timeThreshold:null,d=!(!n||!n.ignoreIsFinished);return e?(z!==t&&(z=t,N("Getting the request for "+Q+" time : "+t)),b(e),Y=O(t,e,l),Y<0&&(b(e),Y=O(t,e,l)),Y>0&&N("Index for "+Q+" time "+t+" is "+Y),a=!d&&E(e),a?(r=new o.default,r.action=o.default.ACTION_COMPLETE,r.index=Y,r.mediaType=Q,r.mediaInfo=Z.getMediaInfo(),N("Signal complete.",r)):(i=(0,S.getSegmentByIndex)(Y,e),r=M(i)),u&&s>=0&&(Y="SegmentTimeline"===e.segmentInfoType&&W?Y:s),r):null}function P(e,t){var n=(e.segmentAvailabilityRange.end-e.segmentAvailabilityRange.start)/2;return e.segments=null,e.segmentAvailabilityRange={start:t-n,end:t+n},C(e,t,{keepIdx:!1,ignoreIsFinished:!0})}function L(e){var t,n,r;return e&&-1!==Y?(z=null,Y++,N("Getting the next request at index: "+Y),r=E(e),r?(t=new o.default,t.action=o.default.ACTION_COMPLETE,t.index=Y,t.mediaType=Q,t.mediaInfo=Z.getMediaInfo(),N("Signal complete.")):(b(e),n=(0,S.getSegmentByIndex)(Y,e),t=M(n),!n&&W&&Y--),t):null}function x(e){var t=e.representation;t.segments&&U.trigger(f.default.REPRESENTATION_UPDATED,{sender:this,representation:t})}function k(e){if(!e.error&&Q===e.mediaType){var t,n,r,i,a=e.segments,o=e.representation,s=[],u=0;for(t=0,n=a.length;t<n;t++)r=a[t],i=(0,S.getTimeBasedSegment)(G,W,o,r.startTime,r.duration,r.timescale,r.media,r.mediaRange,u),s.push(i),i=null,u++;o.segmentAvailabilityRange={start:s[0].presentationStartTime,end:s[n-1].presentationStartTime},o.availableSegmentsNumber=n,w(o,s),T.default.hasInitialization(o)&&U.trigger(f.default.REPRESENTATION_UPDATED,{sender:this,representation:o})}}var F=this.context,N=(0,m.default)(F).getInstance().log,U=(0,h.default)(F).getInstance(),B=(0,_.default)(F).getInstance(),j=e.segmentBaseLoader,G=e.timelineConverter,K=e.dashMetrics,H=e.metricsModel,q=e.baseURLController,V=void 0,Y=void 0,z=void 0,W=void 0,Q=void 0,X=void 0,J=void 0,Z=void 0,$=void 0;return V={initialize:t,getStreamProcessor:n,getInitRequest:y,getSegmentRequestForTime:C,getNextSegmentRequest:L,generateSegmentRequestForTime:P,updateRepresentation:D,setCurrentTime:r,getCurrentTime:i,getCurrentIndex:a,getEarliestTime:s,reset:d},function(){Y=-1,X=0,J=NaN,U.on(f.default.INITIALIZATION_LOADED,x,V),U.on(f.default.SEGMENTS_LOADED,k,V)}(),V}Object.defineProperty(n,"__esModule",{value:!0});var a=e(166),o=r(a),s=e(165),u=r(s),l=e(182),d=e(13),f=r(d),c=e(9),h=r(c),g=e(10),p=r(g),v=e(8),m=r(v),y=e(159),_=r(y),E=e(46),T=r(E),S=e(36),b=e(35),R=r(b),A=1;i.__dashjs_factory_name="DashHandler";var w=p.default.getClassFactory(i);w.SEGMENTS_UNAVAILABLE_ERROR_CODE=A,n.default=w,t.exports=n.default},{10:10,13:13,159:159,165:165,166:166,182:182,35:35,36:36,46:46,8:8,9:9}],17:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var n;return n=b(I.getValue().Period_asArray[t],e),null===n?null:n.bandwidth}function t(e,t){return S(I.getValue().Period_asArray[t],e)}function n(e,t){return A(I.getValue().Period_asArray[t],e)}function r(e){return c(e,h.TRACK_SWITCH)}function i(e){return c(e,h.BUFFER_LEVEL)}function o(e){var t=i(e);return t?(0,g.round10)(t.level/1e3,-3):0}function u(e){return e.RequestsQueue}function d(e){if(null===e)return null;var t,n,r=e.HttpList,i=null;if(null===r||r.length<=0)return null;for(t=r.length,n=t-1;n>=0;){if(r[n].responsecode){i=r[n];break}n--}return i}function f(e){return null===e?[]:e.HttpList?e.HttpList:[]}function c(e,t){if(null===e)return null;var n=e[t];if(null===n)return null;var r=n.length;return r<=0?null:n[r-1]}function p(e){return c(e,h.DROPPED_FRAMES)}function v(e){return c(e,h.SCHEDULING_INFO)}function m(e){return c(e,h.MANIFEST_UPDATE)}function y(e){return c(e,h.DVR_INFO)}function _(e,t){var n,r,i,o={};if(null===e)return null;for(n=f(e),i=n.length-1;i>=0;i--)if(r=n[i],r.type===a.HTTPRequest.MPD_TYPE){o=T(r._responseHeaders);break}return void 0===o[t]?null:o[t]}function E(e,t){if(null===e)return null;var n,r=d(e);return null===r||null===r._responseHeaders?null:(n=T(r._responseHeaders),void 0===n[t]?null:n[t])}function T(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var a=n[r],o=a.indexOf(": ");o>0&&(t[a.substring(0,o)]=a.substring(o+2))}return t}function S(e,t){var n=b(e,t,!0);return null!==n?n:-1}function b(e,t,n){var r,i,a,o,s,u;if(e)for(i=e.AdaptationSet_asArray,s=0;s<i.length;s+=1)for(r=i[s],o=r.Representation_asArray,u=0;u<o.length;u+=1)if(a=o[u],t===a.id)return n?u:a;return null}function R(e,t){return(0,l.default)(w).getInstance().getIsTypeOf(e,t)}function A(e,t){var n,r,i,a;if(!e||!t)return-1;for(r=e.AdaptationSet_asArray,a=0;a<r.length;a+=1)if(n=r[a],i=n.Representation_asArray,R(n,t))return i.length;return-1}var w=this.context,I=(0,s.default)(w).getInstance();return{getBandwidthForRepresentation:e,getIndexForRepresentation:t,getMaxIndexForBufferType:n,getCurrentRepresentationSwitch:r,getLatestBufferLevelVO:i,getCurrentBufferLevel:o,getCurrentHttpRequest:d,getHttpRequests:f,getCurrentDroppedFrames:p,getCurrentSchedulingInfo:v,getCurrentDVRInfo:y,getCurrentManifestUpdate:m,getLatestFragmentRequestHeaderValueByID:E,getLatestMPDRequestHeaderValueByID:_,getRequestsQueue:u}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(182),o=e(98),s=r(o),u=e(22),l=r(u),d=e(10),f=r(d),c=e(20),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),g=e(7);i.__dashjs_factory_name="DashMetrics",n.default=f.default.getSingletonFactory(i),t.exports=n.default},{10:10,182:182,20:20,22:22,7:7,98:98}],18:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){_=(0,c.default)(h).getInstance(),E=(0,y.default)(h).getInstance(),T=(0,o.default)(h).getInstance(),w=(0,I.default)(h).create({errHandler:_,metricsModel:R,requestModifier:T})}function t(e){e.baseURLController&&(D=e.baseURLController),e.metricsModel&&(R=e.metricsModel)}function n(e,t){var r=null,i=null,a=D.resolve(e.path),o=t||{init:!0,url:a?a.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};p("Start searching for initialization.");var u=l(o),d=function(t){o.bytesLoaded=o.range.end,i=E.parse(t),r=s(i),r?(e.range=r,m.trigger(g.default.INITIALIZATION_LOADED,{representation:e})):(o.range.end=o.bytesLoaded+o.bytesToLoad,n(e,o))},f=function(){m.trigger(g.default.INITIALIZATION_LOADED,{representation:e})};w.load({request:u,success:d,error:f}),p("Perform init search: "+o.url)}function r(e,t,n,i,o){if(n&&(void 0===n.start||void 0===n.end)){var s=n?n.toString().split("-"):null;n=s?{start:parseFloat(s[0]),end:parseFloat(s[1])}:null}o=o||f;var u=null,d=null,c=!!n,h=D.resolve(e.path),g={init:!1,url:h?h.url:void 0,range:c?n:{start:0,end:1500},searching:!c,bytesLoaded:i?i.bytesLoaded:0,bytesToLoad:1500},v=l(g),m=function(n){var i=g.bytesToLoad,s=n.byteLength;if(g.bytesLoaded=g.range.end-g.range.start,u=E.parse(n),(d=u.getBox("sidx"))&&d.isComplete){var l,f,c=d.references;if(null!==c&&void 0!==c&&c.length>0&&(l=1===c[0].reference_type),l){p("Initiate multiple SIDX load."),g.range.end=g.range.start+d.size;var h,v,m,y,_,T=[],S=0,b=(d.offset||g.range.start)+d.size,R=function(n){n?(T=T.concat(n),++S>=v&&o(T,e,t)):o(null,e,t)};for(h=0,v=c.length;h<v;h++)m=b,y=b+c[h].referenced_size-1,b+=c[h].referenced_size,_={start:m,end:y},r(e,null,_,g,R)}else p("Parsing segments from SIDX."),f=a(d,g),o(f,e,t)}else{if(d)g.range.start=d.offset||g.range.start,g.range.end=g.range.start+(d.size||i);else{if(s<g.bytesLoaded)return void o(null,e,t);var A=u.getLastBox();A&&A.size?(g.range.start=A.offset+A.size,g.range.end=g.range.start+i):g.range.end+=i}r(e,t,g.range,g,o)}},y=function(){o(null,e,t)};w.load({request:v,success:m,error:y}),p("Perform SIDX load: "+g.url)}function i(){w.abort(),w=null,_=null,E=null,T=null}function a(e,t){for(var n,r,i,a,o=e.references,s=o.length,l=e.timescale,d=e.earliest_presentation_time,f=t.range.start+e.offset+e.first_offset+e.size,c=[],h=0;h<s;h++)i=o[h].subsegment_duration,a=o[h].referenced_size,n=new u.default,n.duration=i,n.startTime=d,n.timescale=l,r=f+a-1,n.mediaRange=f+"-"+r,c.push(n),d+=i,f+=a;return c}function s(e){var t,n,r=e.getBox("ftyp"),i=e.getBox("moov"),a=null;return p("Searching for initialization."),i&&i.isComplete&&(t=r?r.offset:i.offset,n=i.offset+i.size-1,a=t+"-"+n,p("Found the initialization.  Range: "+a)),a}function l(e){if(e.url){var t=new A.default;return t.type=e.init?b.HTTPRequest.INIT_SEGMENT_TYPE:b.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}}function f(e,t,n){e?m.trigger(g.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):m.trigger(g.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new d.default(null,"error loading segments",null)})}var h=this.context,p=(0,S.default)(h).getInstance().log,m=(0,v.default)(h).getInstance(),_=void 0,E=void 0,T=void 0,R=void 0,w=void 0,D=void 0;return{setConfig:t,initialize:e,loadInitialization:n,loadSegments:r,reset:i}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(157),o=r(a),s=e(47),u=r(s),l=e(165),d=r(l),f=e(152),c=r(f),h=e(13),g=r(h),p=e(9),v=r(p),m=e(147),y=r(m),_=e(10),E=r(_),T=e(8),S=r(T),b=e(182),R=e(166),A=r(R),w=e(57),I=r(w);i.__dashjs_factory_name="SegmentBaseLoader",n.default=E.default.getSingletonFactory(i),t.exports=n.default},{10:10,13:13,147:147,152:152,157:157,165:165,166:166,182:182,47:47,57:57,8:8,9:9}],19:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){R=(0,v.default)(h).getInstance(),w=(0,y.default)(h).getInstance(),D=(0,A.default)(h).create({errHandler:R,metricsModel:I,requestModifier:w})}function t(e){if(!e.baseURLController||!e.metricsModel)throw new Error("Missing config parameter(s)");O=e.baseURLController,I=e.metricsModel}function n(e){var t=[],n=void 0,r=void 0,i=void 0,a=(0,d.default)(h).create({data:e}),o=void 0;for(a.consumeTag(S.Segment.Cues),r=a.getMatroskaCodedNum();a.moreData()&&a.consumeTagAndSize(S.Segment.Cues.CuePoint,!0);){for(n={},n.CueTime=a.parseTag(S.Segment.Cues.CuePoint.CueTime),n.CueTracks=[];a.moreData()&&a.consumeTagAndSize(S.Segment.Cues.CuePoint.CueTrackPositions,!0);){if(i={},i.Track=a.parseTag(S.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=a.parseTag(S.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),a.getPos()+4>r||!a.consumeTag(S.Segment.Cues.CuePoint.CueTrackPositions.CueBlockNumber,!0)?n.CueTracks.push(i):(o=a.getMatroskaCodedNum(),i.BlockNumber=a.getMatroskaUint(o),n.CueTracks.push(i))}if(0===n.CueTracks.length)throw new Error("Mandatory cuetrack not found");t.push(n)}if(0===t.length)throw new Error("mandatory cuepoint not found");return t}function r(e,t,r,i){var a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0;for(o=n(e),s=[],l=0,d=o.length;l<d;l+=1)u=new E.default,a=0,a=l<o.length-1?o[l+1].CueTime-o[l].CueTime:i-o[l].CueTime,u.duration=a,u.startTime=o[l].CueTime,u.timescale=1e3,f=o[l].CueTracks[0].ClusterPosition+t,c=l<o.length-1?o[l+1].CueTracks[0].ClusterPosition+t-1:r-1,u.mediaRange=f+"-"+c,s.push(u);return p("Parsed cues: "+s.length+" cues."),s}function i(e,t,n,i){var a=(0,d.default)(h).create({data:e}),o=void 0,s=void 0,u=n.split("-"),l=null,c={url:t,range:{start:parseFloat(u[0]),end:parseFloat(u[1])},request:l},g=void 0,v=void 0;for(p("Parse EBML header: "+c.url),a.skipOverElement(S.EBML),a.consumeTag(S.Segment),g=a.getMatroskaCodedNum(),g+=a.getPos(),v=a.getPos();a.moreData()&&!a.consumeTagAndSize(S.Segment.Info,!0);)if(!(a.skipOverElement(S.Segment.SeekHead,!0)||a.skipOverElement(S.Segment.Tracks,!0)||a.skipOverElement(S.Segment.Cues,!0)||a.skipOverElement(S.Void,!0)))throw new Error("no valid top level element found");for(;void 0===o;){var m=a.getMatroskaCodedNum(!0),y=a.getMatroskaCodedNum();switch(m){case S.Segment.Info.Duration.tag:o=a[S.Segment.Info.Duration.parse](y);break;default:a.setPos(a.getPos()+y)}}l=f(c);var _=function(e){s=r(e,v,g,o),i(s)},E=function(){p("Download Error: Cues "+c.url),i(null)};D.load({request:l,success:_,error:E}),p("Perform cues load: "+c.url+" bytes="+c.range.start+"-"+c.range.end)}function a(e,t){var n=null,r=O.resolve(e.path),i=r?r.url:void 0,a=e.range.split("-"),s=t||{range:{start:parseFloat(a[0]),end:parseFloat(a[1])},request:n,url:i,init:!0};p("Start loading initialization."),n=f(s);var u=function(){m.trigger(o.default.INITIALIZATION_LOADED,{representation:e})},l=function(){m.trigger(o.default.INITIALIZATION_LOADED,{representation:e})};D.load({request:n,success:u,error:l}),p("Perform init load: "+s.url)}function s(e,t,n,r){var a=null,o=O.resolve(e.path),s=o?o.url:void 0,u={bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:a,url:s,init:!1};r=r||l,a=f(u),p("Parsing ebml header");var d=function(a){i(a,s,n,function(n){r(n,e,t)})},c=function(){r(null,e,t)};D.load({request:a,success:d,error:c})}function l(e,t,n){e?m.trigger(o.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):m.trigger(o.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new Error(null,"error loading segments",null)})}function f(e){var t=new b.default;return t.type=e.init?T.HTTPRequest.INIT_SEGMENT_TYPE:T.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}function c(){R=null,w=null,p=null}var h=this.context,p=(0,g.default)(h).getInstance().log,m=(0,u.default)(h).getInstance(),_=void 0,S=void 0,R=void 0,w=void 0,I=void 0,D=void 0,O=void 0;return _={setConfig:t,initialize:e,loadInitialization:a,loadSegments:s,reset:c},function(){S={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"},CueBlockNumber:{tag:21368}}}}},Void:{tag:236,required:!0}}}(),_}Object.defineProperty(n,"__esModule",{value:!0});var a=e(13),o=r(a),s=e(9),u=r(s),l=e(151),d=r(l),f=e(10),c=r(f),h=e(8),g=r(h),p=e(152),v=r(p),m=e(157),y=r(m),_=e(47),E=r(_),T=e(182),S=e(166),b=r(S),R=e(57),A=r(R);i.__dashjs_factory_name="WebmSegmentBaseLoader",n.default=c.default.getSingletonFactory(i),t.exports=n.default},{10:10,13:13,151:151,152:152,157:157,166:166,182:182,47:47,57:57,8:8,9:9}],20:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.TCP_CONNECTION="TcpList";n.HTTP_REQUEST="HttpList";n.TRACK_SWITCH="RepSwitchList";n.BUFFER_LEVEL="BufferLevel";n.BUFFER_STATE="BufferState";n.DVR_INFO="DVRInfo";n.DROPPED_FRAMES="DroppedFrames";n.SCHEDULING_INFO="SchedulingInfo";n.REQUESTS_QUEUE="RequestsQueue";n.MANIFEST_UPDATE="ManifestUpdate";n.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo";n.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo";n.PLAY_LIST="PlayList";n.DVB_ERRORS="DVBErrors"},{}],21:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e.abrController&&(V=e.abrController)}function t(e){q=e,Y=q.getIndexHandler()}function n(){return q}function r(){return B}function i(){return j}function a(){return G}function s(){return H}function l(){N.off(w.default.QUALITY_CHANGE_REQUESTED,x,U),N.off(w.default.REPRESENTATION_UPDATED,M,U),N.off(w.default.WALLCLOCK_TIME_UPDATED,C,U),N.off(w.default.BUFFER_LEVEL_UPDATED,L,U),B=null,j=-1,G=!0,K=[],V=null,z=null,W=null,Q=null,X=null,J=null,Z=null,$=null}function f(e,t,n){var r,i,a=null,o=q.getStreamInfo(),s=V.getTopQualityIndexFor(n,o.id);if(G=!0,N.trigger(w.default.DATA_UPDATE_STARTED,{sender:this}),K=b(t),null===B&&"fragmentedText"!==n?(i=V.getAverageThroughput(n),a=i||V.getInitialBitrateFor(n,o),r=V.getQualityForBitrate(q.getMediaInfo(),a)):r=V.getQualityFor(n,o),r>s&&(r=s),H=m(r),B=e,"video"!==n&&"audio"!==n&&"fragmentedText"!==n)return G=!1,void N.trigger(w.default.DATA_UPDATE_COMPLETED,{sender:this,data:B,currentRepresentation:H});for(var u=0;u<K.length;u++)Y.updateRepresentation(K[u],!0)}function h(){var e=new Date,t=s(),n=1e3*z.getTime();Q.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function p(){var e=J.calcSegmentAvailabilityRange(H,q.isDynamic());Q.addDVRInfo(q.getType(),z.getTime(),q.getStreamInfo().manifestInfo,e)}function m(e){return K[e]}function _(e){return K.indexOf(e)}function T(){for(var e=0,t=K.length;e<t;e++){var n=K[e].segmentInfoType;if(null===K[e].segmentAvailabilityRange||!P.default.hasInitialization(K[e])||("SegmentBase"===n||"BaseURL"===n)&&!K[e].segments)return!1}return!0}function b(e){var t=W.getValue()
;return j=Z.getIndexForAdaptation(B,t,e.period.index),Z.getRepresentationsForAdaptation(t,e)}function A(e){for(var t,n=0,r=K.length;n<r;n++)t=K[n],t.segmentAvailabilityRange=J.calcSegmentAvailabilityRange(t,e)}function I(){K.forEach(function(e){e.segmentAvailabilityRange=null})}function O(e){var t=e,n=function(){if(!a()){G=!0,N.trigger(w.default.DATA_UPDATE_STARTED,{sender:U}),I();for(var e=0;e<K.length;e++)Y.updateRepresentation(K[e],!0)}};G=!1,N.trigger(D.default.AST_IN_FUTURE,{delay:t}),setTimeout(n,t)}function M(e){if(e.sender.getStreamProcessor()===q&&a()){var t,n,r,i=e.representation,o=Q.getMetricsFor("stream"),u=Q.getMetricsFor(s().adaptation.type),l=$.getCurrentManifestUpdate(o),d=!1,f=0;if("dynamic"===i.adaptation.period.mpd.manifest.type){var c=i.segmentAvailabilityRange.end-i.segmentAvailabilityRange.start;f=1e3*(z.computeLiveDelay(H.segmentDuration,q.getStreamInfo().manifestInfo.DVRWindowSize)-c)}if(f>0)return p(),O(f),n=new S.default(k,"Segments update failed",null),void N.trigger(w.default.DATA_UPDATE_COMPLETED,{sender:this,data:B,currentRepresentation:H,error:n});if(l){for(var g=0;g<l.trackInfo.length;g++)if(t=l.trackInfo[g],t.index===i.index&&t.mediaType===q.getType()){d=!0;break}d||Q.addManifestUpdateRepresentationInfo(l,i.id,i.index,i.adaptation.period.index,q.getType(),i.presentationTimeOffset,i.startNumber,i.segmentInfoType)}T()&&(G=!1,V.setPlaybackQuality(q.getType(),q.getStreamInfo(),_(H)),Q.updateManifestUpdateInfo(l,{latency:H.segmentAvailabilityRange.end-z.getTime()}),r=$.getCurrentRepresentationSwitch(u),r||h(),N.trigger(w.default.DATA_UPDATE_COMPLETED,{sender:this,data:B,currentRepresentation:H}))}}function C(e){e.isDynamic&&A(e.isDynamic)}function L(e){e.sender.getStreamProcessor()===q&&p()}function x(e){e.mediaType===q.getType()&&q.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality&&(H=m(e.newQuality),X.setSavedBitrateSettings(e.mediaType,H.bandwidth),h())}var k=1,F=this.context,N=(0,R.default)(F).getInstance(),U=void 0,B=void 0,j=void 0,G=void 0,K=void 0,H=void 0,q=void 0,V=void 0,Y=void 0,z=void 0,W=void 0,Q=void 0,X=void 0,J=void 0,Z=void 0,$=void 0;return U={initialize:t,setConfig:e,getData:r,getDataIndex:i,isUpdating:a,updateData:f,getStreamProcessor:n,getCurrentRepresentation:s,getRepresentationForQuality:m,reset:l},function(){B=null,j=-1,G=!0,K=[],V=(0,c.default)(F).getInstance(),z=(0,g.default)(F).getInstance(),W=(0,v.default)(F).getInstance(),Q=(0,y.default)(F).getInstance(),X=(0,E.default)(F).getInstance(),J=(0,d.default)(F).getInstance(),Z=(0,o.default)(F).getInstance(),$=(0,u.default)(F).getInstance(),N.on(w.default.QUALITY_CHANGE_REQUESTED,x,U),N.on(w.default.REPRESENTATION_UPDATED,M,U),N.on(w.default.WALLCLOCK_TIME_UPDATED,C,U),N.on(w.default.BUFFER_LEVEL_UPDATED,L,U)}(),U}Object.defineProperty(n,"__esModule",{value:!0});var a=e(22),o=r(a),s=e(17),u=r(s),l=e(38),d=r(l),f=e(59),c=r(f),h=e(67),g=r(h),p=e(98),v=r(p),m=e(100),y=r(m),_=e(150),E=r(_),T=e(165),S=r(T),b=e(9),R=r(b),A=e(13),w=r(A),I=e(53),D=r(I),O=e(10),M=r(O),C=e(46),P=r(C);i.__dashjs_factory_name="RepresentationController",n.default=M.default.getClassFactory(i),t.exports=n.default},{10:10,100:100,13:13,150:150,165:165,17:17,22:22,38:38,46:46,53:53,59:59,67:67,9:9,98:98}],22:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var n,r,i,a=!1,o=!1,s=e.ContentComponent_asArray,u="text"!==t?new RegExp(t):new RegExp("(vtt|ttml)");if(e.Representation_asArray.length>0&&e.Representation_asArray[0].hasOwnProperty("codecs")){var l=e.Representation_asArray[0].codecs;if(0===l.search("stpp")||0===l.search("wvtt"))return"fragmentedText"===t}if(s){if(s.length>1)return"muxed"===t;s[0]&&s[0].contentType===t&&(a=!0,o=!0)}if(e.hasOwnProperty("mimeType")&&(a=u.test(e.mimeType),o=!0),!o)for(n=0,r=e.Representation_asArray.length;!o&&n<r;)i=e.Representation_asArray[n],i.hasOwnProperty("mimeType")&&(a=u.test(i.mimeType),o=!0),n++;return a}function t(t){return e(t,"audio")}function n(t){return e(t,"video")}function r(t){return e(t,"fragmentedText")}function i(t){return e(t,"text")}function a(t){return e(t,"muxed")}function s(e){return"text/vtt"===e||"application/ttml+xml"===e}function l(e){var t="";return e.hasOwnProperty("lang")&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t}function f(e){return e.hasOwnProperty("Viewpoint")?e.Viewpoint:null}function h(e){return e.hasOwnProperty("Role_asArray")?e.Role_asArray:[]}function p(e){return e.hasOwnProperty("Accessibility_asArray")?e.Accessibility_asArray:[]}function m(e){return e.hasOwnProperty("AudioChannelConfiguration_asArray")?e.AudioChannelConfiguration_asArray:[]}function _(e){return h(e).filter(function(e){return"main"===e.value})[0]}function T(){return function(e,t){return e.bandwidth-t.bandwidth}}function b(e){return void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(T()),e}function A(e,t,n){var r,i,a=t.Period_asArray[n].AdaptationSet_asArray;for(r=0,i=a.length;r<i;r++)if(a[r].hasOwnProperty("id")&&a[r].id===e)return a[r];return null}function I(e,t,n){return t.Period_asArray[n].AdaptationSet_asArray[e]}function O(e,t,n){var r,i,a=t.Period_asArray[n].AdaptationSet_asArray;for(r=0,i=a.length;r<i;r++)if(a[r]===e)return r;return-1}function M(t,n,r){var i,a,o=t.Period_asArray[n].AdaptationSet_asArray,s=[];for(i=0,a=o.length;i<a;i++)e(o[i],r)&&s.push(b(o[i]));return s}function C(e,t,n,r){var i=M(e,t,n);if(!i||0===i.length)return null;if(i.length>1&&r)for(var a=ue.getCurrentTrackFor(n,r),o=le.getAllMediaInfoForType(e,r,n),s=0,u=i.length;s<u;s++){if(a&&ue.isTracksEqual(a,o[s]))return i[s];if(_(i[s]))return i[s]}return i[0]}function P(e){var t=e.Representation_asArray[0];return t.mimeType+';codecs="'+t.codecs+'"'}function L(e){return e.Representation_asArray[0].mimeType}function x(e){return e&&e.hasOwnProperty("cenc:default_KID")?e["cenc:default_KID"]:null}function k(e){return e&&e.hasOwnProperty("ContentProtection_asArray")&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null}function F(e){var t=!1;return e.hasOwnProperty("type")&&(t="dynamic"===e.type),t}function N(e){var t,n=F(e);return t=!isNaN(e.timeShiftBufferDepth),n&&t}function U(e,t){var n=!1;return e.profiles&&e.profiles.length>0&&(n=-1!==e.profiles.indexOf(t)),n}function B(e){return U(e,"urn:mpeg:dash:profile:isoff-on-demand:2011")}function j(e){return U(e,"urn:dvb:dash:profile:dvb-dash:2014")}function G(e){return e.hasOwnProperty("mediaPresentationDuration")?e.mediaPresentationDuration:Number.MAX_VALUE}function K(e){return e.bandwidth}function H(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=NaN;return e.hasOwnProperty("minimumUpdatePeriod")&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)}function q(e){return e.Representation_asArray.length}function V(e){if(!e||!e.Representation_asArray||!e.Representation_asArray.length)return null;for(var t=b(e),n=t.Representation_asArray,r=n.length,i=[],a=0;a<r;a++)i.push({bandwidth:n[a].bandwidth,width:n[a].width||0,height:n[a].height||0});return i}function Y(e,t){return t.Representation_asArray[e]}function z(e,t){for(var n,r,i,a,u,l=b(e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index]),d=[],f=0;f<l.Representation_asArray.length;f++)a=l.Representation_asArray[f],n=new o.default,n.index=f,n.adaptation=t,a.hasOwnProperty("id")&&(n.id=a.id),a.hasOwnProperty("codecs")&&(n.codecs=a.codecs),a.hasOwnProperty("codecPrivateData")&&(n.codecPrivateData=a.codecPrivateData),a.hasOwnProperty("bandwidth")&&(n.bandwidth=a.bandwidth),a.hasOwnProperty("width")&&(n.width=a.width),a.hasOwnProperty("height")&&(n.height=a.height),a.hasOwnProperty("maxPlayoutRate")&&(n.maxPlayoutRate=a.maxPlayoutRate),a.hasOwnProperty("SegmentBase")?(i=a.SegmentBase,n.segmentInfoType="SegmentBase"):a.hasOwnProperty("SegmentList")?(i=a.SegmentList,i.hasOwnProperty("SegmentTimeline")?(n.segmentInfoType="SegmentTimeline",u=i.SegmentTimeline.S_asArray[i.SegmentTimeline.S_asArray.length-1],(!u.hasOwnProperty("r")||u.r>=0)&&(n.useCalculatedLiveEdgeTime=!0)):(n.segmentInfoType="SegmentList",n.useCalculatedLiveEdgeTime=!0)):a.hasOwnProperty("SegmentTemplate")?(i=a.SegmentTemplate,i.hasOwnProperty("SegmentTimeline")?(n.segmentInfoType="SegmentTimeline",u=i.SegmentTimeline.S_asArray[i.SegmentTimeline.S_asArray.length-1],(!u.hasOwnProperty("r")||u.r>=0)&&(n.useCalculatedLiveEdgeTime=!0)):n.segmentInfoType="SegmentTemplate",i.hasOwnProperty("initialization")&&(n.initialization=i.initialization.split("$Bandwidth$").join(a.bandwidth).split("$RepresentationID$").join(a.id))):n.segmentInfoType="BaseURL",i&&(i.hasOwnProperty("Initialization")?(r=i.Initialization,r.hasOwnProperty("sourceURL")?n.initialization=r.sourceURL:r.hasOwnProperty("range")&&(n.range=r.range)):a.hasOwnProperty("mimeType")&&s(a.mimeType)&&(n.range=0),i.hasOwnProperty("timescale")&&(n.timescale=i.timescale),i.hasOwnProperty("duration")&&(n.segmentDuration=i.duration/n.timescale),i.hasOwnProperty("startNumber")&&(n.startNumber=i.startNumber),i.hasOwnProperty("indexRange")&&(n.indexRange=i.indexRange),i.hasOwnProperty("presentationTimeOffset")&&(n.presentationTimeOffset=i.presentationTimeOffset/n.timescale)),n.MSETimeOffset=se.calcMSETimeOffset(n),n.path=[t.period.index,t.index,f],d.push(n);return d}function W(e,i){for(var o,s,l=e.Period_asArray[i.index],d=[],f=0;f<l.AdaptationSet_asArray.length;f++)s=l.AdaptationSet_asArray[f],o=new u.default,s.hasOwnProperty("id")&&(o.id=s.id),o.index=f,o.period=i,a(s)?o.type="muxed":t(s)?o.type="audio":n(s)?o.type="video":r(s)?o.type="fragmentedText":o.type="text",d.push(o);return d}function Q(e,t){var n,r,i=F(e),a=[],o=null,s=null,u=null,l=null;for(r=0,n=e.Period_asArray.length;r<n;r++)s=e.Period_asArray[r],s.hasOwnProperty("start")?(l=new d.default,l.start=s.start):null!==o&&s.hasOwnProperty("duration")&&null!==u?(l=new d.default,l.start=u.start+u.duration,l.duration=s.duration):0!==r||i||(l=new d.default,l.start=0),null!==u&&isNaN(u.duration)&&(u.duration=l.start-u.start),null!==l&&(l.id=X(s,r)),null!==l&&s.hasOwnProperty("duration")&&(l.duration=s.duration),null!==l&&(l.index=r,l.mpd=t,a.push(l),o=s,u=l),s=null,l=null;return 0===a.length?a:(null!==u&&isNaN(u.duration)&&(u.duration=Z(e,u)-u.start),a)}function X(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=d.default.DEFAULT_ID+"_"+t;return e.hasOwnProperty("id")&&"__proto__"!==e.id&&(n=e.id),n}function J(e){var t=new c.default;return t.manifest=e,e.hasOwnProperty("availabilityStartTime")?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty("availabilityEndTime")&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty("minimumUpdatePeriod")&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty("mediaPresentationDuration")&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty("suggestedPresentationDelay")&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty("timeShiftBufferDepth")&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty("maxSegmentDuration")&&(t.maxSegmentDuration=e.maxSegmentDuration),t}function Z(e,t){var n=F(e),r=void 0;if(e.mediaPresentationDuration)r=e.mediaPresentationDuration;else if(t.duration)r=t.duration;else{if(!n)throw new Error("Must have @mediaPresentationDuratio on MPD or an explicit @duration on the last period.");r=Number.POSITIVE_INFINITY}return r}function $(e,t){var n=e.Period_asArray,r=n[t.index].EventStream_asArray,i=[];if(r)for(var a=0;a<r.length;a++){var o=new w.default;if(o.period=t,o.timescale=1,!r[a].hasOwnProperty("schemeIdUri"))throw new Error("Invalid EventStream. SchemeIdUri has to be set");o.schemeIdUri=r[a].schemeIdUri,r[a].hasOwnProperty("timescale")&&(o.timescale=r[a].timescale),r[a].hasOwnProperty("value")&&(o.value=r[a].value);for(var s=0;s<r[a].Event_asArray.length;s++){var u=new S.default;u.presentationTime=0,u.eventStream=o,r[a].Event_asArray[s].hasOwnProperty("presentationTime")&&(u.presentationTime=r[a].Event_asArray[s].presentationTime),r[a].Event_asArray[s].hasOwnProperty("duration")&&(u.duration=r[a].Event_asArray[s].duration),r[a].Event_asArray[s].hasOwnProperty("id")&&(u.id=r[a].Event_asArray[s].id),i.push(u)}}return i}function ee(e,t){var n=[];if(!e)return n;for(var r=0;r<e.length;r++){var i=new w.default;if(i.timescale=1,i.representation=t,!e[r].hasOwnProperty("schemeIdUri"))throw new Error("Invalid EventStream. SchemeIdUri has to be set");i.schemeIdUri=e[r].schemeIdUri,e[r].hasOwnProperty("timescale")&&(i.timescale=e[r].timescale),e[r].hasOwnProperty("value")&&(i.value=e[r].value),n.push(i)}return n}function te(e,t){return t&&e?ee(e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index].InbandEventStream_asArray,null):[]}function ne(e,t){return ee(e.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].InbandEventStream_asArray,t)}function re(e){var t=F(e),n=e.hasOwnProperty("availabilityStartTime"),r=e.UTCTiming_asArray,i=[];return(t||n)&&r&&r.forEach(function(e){var t=new g.default;e.hasOwnProperty("schemeIdUri")&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value.toString(),i.push(t)))}),i}function ie(e){var t=[],n=e.BaseURL_asArray||[e.baseUri],r=!1;return n.some(function(n){if(n){var i=new R.default,a=n.__text||n;return de.isRelative(a)&&(r=!0,e.baseUri&&(a=e.baseUri+a)),i.url=a,n.hasOwnProperty("serviceLocation")&&n.serviceLocation.length?i.serviceLocation=n.serviceLocation:i.serviceLocation=a,n.hasOwnProperty("dvb:priority")&&(i.dvb_priority=n["dvb:priority"]),n.hasOwnProperty("dvb:weight")&&(i.dvb_weight=n["dvb:weight"]),t.push(i),r}}),t}function ae(e){return e.hasOwnProperty("Location")&&(e.Location=e.Location_asArray[0]),e.Location}var oe=this.context,se=(0,v.default)(oe).getInstance(),ue=(0,y.default)(oe).getInstance(),le=(0,E.default)(oe).getInstance(),de=(0,D.default)(oe).getInstance();return{getIsTypeOf:e,getIsAudio:t,getIsVideo:n,getIsText:i,getIsMuxed:a,getIsTextTrack:s,getIsFragmentedText:r,getIsMain:_,getLanguageForAdaptation:l,getViewpointForAdaptation:f,getRolesForAdaptation:h,getAccessibilityForAdaptation:p,getAudioChannelConfigurationForAdaptation:m,processAdaptation:b,getAdaptationForIndex:I,getIndexForAdaptation:O,getAdaptationForId:A,getAdaptationsForType:M,getAdaptationForType:C,getCodec:P,getMimeType:L,getKID:x,getContentProtectionData:k,getIsDynamic:F,getIsDVR:N,getIsOnDemand:B,getIsDVB:j,getDuration:G,getBandwidth:K,getManifestUpdatePeriod:H,getRepresentationCount:q,getBitrateListForAdaptation:V,getRepresentationFor:Y,getRepresentationsForAdaptation:z,getAdaptationsForPeriod:W,getRegularPeriods:Q,getMpd:J,getEventsForPeriod:$,getEventStreams:ee,getEventStreamForAdaptationSet:te,getEventStreamForRepresentation:ne,getUTCTimingSources:re,getBaseURLsFromElement:ie,getRepresentationSortFunction:T,getLocation:ae}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(46),o=r(a),s=e(40),u=r(s),l=e(45),d=r(l),f=e(44),c=r(f),h=e(48),g=r(h),p=e(38),v=r(p),m=e(65),y=r(m),_=e(15),E=r(_),T=e(42),S=r(T),b=e(41),R=r(b),A=e(43),w=r(A),I=e(159),D=r(I),O=e(10),M=r(O);i.__dashjs_factory_name="DashManifestModel",n.default=M.default.getSingletonFactory(i),t.exports=n.default},{10:10,15:15,159:159,38:38,40:40,41:41,42:42,43:43,44:44,45:45,46:46,48:48,65:65}],23:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var i;try{var o=window.performance.now();if(!(i=s.xml_str2json(e)))throw new Error("parser error");var l=window.performance.now();u.run(i);var d=window.performance.now();t.setMatchers(a),t.setIron(u),n("Parsing complete: ( xml2json: "+(l-o).toPrecision(3)+"ms, objectiron: "+(d-l).toPrecision(3)+"ms, total: "+((d-o)/1e3).toPrecision(3)+"s)")}catch(t){return r.manifestError("parsing the manifest failed","parse",e,t),null}return i}var t=this.context,n=(0,d.default)(t).getInstance().log,r=(0,o.default)(t).getInstance(),i=void 0,a=void 0,s=void 0,u=void 0;return i={parse:e},function(){a=[new y.default,new E.default,new S.default,new v.default],s=new g.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:a}),u=new c.default([new R.default,new w.default])}(),i}Object.defineProperty(n,"__esModule",{value:!0});var a=e(152),o=r(a),s=e(10),u=r(s),l=e(8),d=r(l),f=e(3),c=r(f),h=e(4),g=r(h),p=e(32),v=r(p),m=e(30),y=r(m),_=e(29),E=r(_),T=e(31),S=r(T),b=e(26),R=r(b),A=e(27),w=r(A);i.__dashjs_factory_name="DashParser",n.default=u.default.getClassFactory(i),t.exports=n.default},{10:10,152:152,26:26,27:27,29:29,3:3,30:30,31:31,32:32,4:4,8:8}],24:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e);this._name=t,this._merge=void 0!==n?n:function(e){return e&&e.length&&e.charAt(0)===e.charAt(0).toUpperCase()}(t)}return i(e,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),e}();n.default=a,t.exports=n.default},{}],25:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(24),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t,n,i,a,s){var u=this;r(this,e),this._name=t||"",this._properties=[],this._children=i||[],this._isRoot=a||!1,this._isArray=s||!0,Array.isArray(n)&&n.forEach(function(e){u._properties.push(new o.default(e))})}return i(e,[{key:"name",get:function(){return this._name}},{key:"isRoot",get:function(){return this._isRoot}},{key:"isArray",get:function(){return this._isArray}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),e}();n.default=s,t.exports=n.default},{24:24}],26:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}},o=e(25),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t);var e=["profiles","width","height","sar","frameRate","audioSamplingRate","mimeType","segmentProfiles","codecs","maximumSAPPeriod","startWithSAP","maxPlayoutRate","codingDependency","scanType","FramePacking","AudioChannelConfiguration","ContentProtection","EssentialProperty","SupplementalProperty","InbandEventStream"];a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"AdaptationSet",e,[new s.default("Representation",e,[new s.default("SubRepresentation",e)])])}return i(t,e),t}(s.default);n.default=u,t.exports=n.default},{25:25}],27:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}},o=e(25),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t);var e=["SegmentBase","SegmentTemplate","SegmentList"];a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"Period",e,[new s.default("AdaptationSet",e,[new s.default("Representation",e)])])}return i(t,e),t}(s.default);n.default=u,t.exports=n.default},{25:25}],28:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this._test=t,this._converter=n}return i(e,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),e}();n.default=a,t.exports=n.default},{}],29:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}},o=e(28),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=60,l=60,d=1e3,f=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,c=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return f.test(e.value)},function(e){var t=f.exec(e),n=void 0;if(n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&parseFloat(t[7])*d||0),t[9]&&t[10]){var r=parseInt(t[9],10)*l+parseInt(t[10],10);n+=("+"===t[8]?-1:1)*r*u*d}return new Date(n)})}return i(t,e),t}(s.default);n.default=c,t.exports=n.default},{28:28}],30:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}},o=e(28),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,l=31536e3,d=2592e3,f=86400,c=3600,h=60,g=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){for(var t=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"],n=t.length,r=0;r<n;r++)if(e.nodeName===t[r])return u.test(e.value);return!1},function(e){var t=u.exec(e),n=parseFloat(t[2]||0)*l+parseFloat(t[4]||0)*d+parseFloat(t[6]||0)*f+parseFloat(t[8]||0)*c+parseFloat(t[10]||0)*h+parseFloat(t[12]||0);return void 0!==t[1]&&(n=-n),n})}return i(t,e),t}(s.default);n.default=g,t.exports=n.default},{28:28}],31:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}},o=e(28),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,l=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return u.test(e.value)},function(e){return parseFloat(e)})}return i(t,e),t}(s.default);n.default=l,t.exports=n.default},{28:28}],32:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}},o=e(28),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e,t){var n={MPD:["id","profiles"],Period:["id"],BaseURL:["serviceLocation","byteRange"],SegmentBase:["indexRange"],Initialization:["range"],RepresentationIndex:["range"],SegmentList:["indexRange"],BitstreamSwitching:["range"],SegmentURL:["mediaRange","indexRange"],SegmentTemplate:["indexRange","media","index","initialization","bitstreamSwitching"],AssetIdentifier:["value","id"],EventStream:["value"],AdaptationSet:["profiles","mimeType","segmentProfiles","codecs","contentType"],FramePacking:["value","id"],AudioChannelConfiguration:["value","id"],ContentProtection:["value","id"],EssentialProperty:["value","id"],SupplementalProperty:["value","id"],InbandEventStream:["value","id"],Accessibility:["value","id"],Role:["value","id"],Rating:["value","id"],Viewpoint:["value","id"],ContentComponent:["contentType"],Representation:["id","dependencyId","mediaStreamStructureId"],Subset:["id"],Metrics:["metrics"],Reporting:["value","id"]};if(n.hasOwnProperty(t)){var r=n[t];return void 0!==r&&r.indexOf(e.name)>=0}return!1},function(e){return String(e)})}return i(t,e),t}(s.default);n.default=u,t.exports=n.default},{28:28}],33:[function(e,t,n){function r(){function e(e){e&&e.boxParser&&(r=e.boxParser)}function t(e){var t,n,i,a,o,s,u,l,d,f,c,h,g=r.parse(e),p=g.getBox("tfhd"),v=g.getBox("tfdt"),m=g.getBox("trun"),y=g.getBox("moof"),_=g.getBox("mfhd"),E=g.getBox("subs");c=_.sequence_number,i=m.sample_count,o=v.baseMediaDecodeTime,f=(p.base_data_offset||0)+(m.data_offset||0),s=[];var T=-1,S=-1;for(l=0;l<i;l++){u=m.samples[l],t=void 0!==u.sample_duration?u.sample_duration:p.default_sample_duration,a=void 0!==u.sample_size?u.sample_size:p.default_sample_size,n=void 0!==u.sample_composition_time_offset?u.sample_composition_time_offset:0;var b={dts:o,cts:o+n,duration:t,offset:y.offset+f,size:a,subSizes:[a]};if(E&&(T<E.entry_count&&l>S&&(T++,S+=E.entries[T].sample_delta),l==S)){b.subSizes=[];var R=E.entries[T];for(d=0;d<R.subsample_count;d++)b.subSizes.push(R.subsamples[d].subsample_size)}s.push(b),f+=a,o+=t}return h=o-v.baseMediaDecodeTime,{sampleList:s,sequenceNumber:c,totalDuration:h}}function n(e){var t=r.parse(e),n=t.getBox("mdhd");return n?n.timescale:NaN}var r=void 0;return{getSamplesInfo:t,getMediaTimescaleFromMoov:n,setConfig:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="FragmentedTextBoxParser",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{10:10}],34:[function(e,t,n){function r(e,t){function n(e,n,i,a){var s,u,l,d,f,c,h,g=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,p=g.SegmentURL_asArray.length,v=[];for(h=e.startNumber,d=(0,o.decideSegmentListRangeForTemplate)(r,t,e,n,i,a),f=Math.max(d.start,0),c=Math.min(d.end,g.SegmentURL_asArray.length-1),s=f;s<=c;s++)l=g.SegmentURL_asArray[s],u=(0,o.getIndexBasedSegment)(r,t,e,s),u.replacementTime=(h+s-1)*e.segmentDuration,u.media=l.media?l.media:"",u.mediaRange=l.mediaRange,u.index=l.index,u.indexRange=l.indexRange,v.push(u),u=null;return e.availableSegmentsNumber=p,v}var r=e.timelineConverter;return{getSegments:n}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=e(36);r.__dashjs_factory_name="ListSegmentsGetter";var s=a.default.getClassFactory(r);n.default=s,t.exports=n.default},{10:10,36:36}],35:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function n(e,t,n,i,a){var u,d=e.segmentInfoType;return"SegmentBase"!==d&&"BaseURL"!==d&&r(e,n)?("SegmentTimeline"===d?u=o.getSegments(e,t,n,a):"SegmentTemplate"===d?u=s.getSegments(e,t,n,a):"SegmentList"===d&&(u=l.getSegments(e,t,n,a)),i&&i(e,u)):u=e.segments,u}function r(e,t){var n,r,i=e.segments,a=!1;return i&&0!==i.length?(r=i[0].availabilityIdx,n=i[i.length-1].availabilityIdx,a=t<r||t>n):a=!0,a}var i=this.context,a=void 0,o=void 0,s=void 0,l=void 0;return a={getSegments:n},function(){o=(0,u.default)(i).create(e,t),s=(0,d.default)(i).create(e,t),l=(0,c.default)(i).create(e,t)}(),a}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(39),u=r(s),l=e(37),d=r(l),f=e(34),c=r(f);i.__dashjs_factory_name="SegmentsGetter";var h=o.default.getClassFactory(i);n.default=h,t.exports=n.default},{10:10,34:34,37:37,39:39}],36:[function(e,t,n){function r(e,t){for(;e.length<t;)e="0"+e;return e}function i(e,t){return e.representation.startNumber+t}function a(e,t,n){var i,a,o,s,u,l,d=t.length,f="%0".length;if(!e)return e;for(;;){if((i=e.indexOf("$"+t))<0)return e;if((a=e.indexOf("$",i+d))<0)return e;if((o=e.indexOf("%0",i+d))>i&&o<a)switch(s=e.charAt(a-1),u=parseInt(e.substring(o+f,a-1),10),s){case"d":case"i":case"u":l=r(n.toString(),u);break;case"x":l=r(n.toString(16),u);break;case"X":l=r(n.toString(16),u).toUpperCase();break;case"o":l=r(n.toString(8),u);break;default:return e}else l=n
;e=e.substring(0,i)+l+e.substring(a+1)}}function o(e,t,n,r){var a,o,s,u;return o=n.segmentDuration,isNaN(o)&&(o=n.adaptation.period.duration),s=n.adaptation.period.start+r*o,u=s+o,a=new c.default,a.representation=n,a.duration=o,a.presentationStartTime=s,a.mediaStartTime=e.calcMediaTimeFromPresentationTime(a.presentationStartTime,n),a.availabilityStartTime=e.calcAvailabilityStartTimeFromPresentationTime(a.presentationStartTime,n.adaptation.period.mpd,t),a.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(u,n.adaptation.period.mpd,t),a.wallStartTime=e.calcWallTimeForSegment(a,t),a.replacementNumber=i(a,r),a.availabilityIdx=r,a}function s(e,t,n,r,o,s,u,l,d){var f,h,g,p=r/s,v=Math.min(o/s,n.adaptation.period.mpd.maxSegmentDuration);return f=e.calcPresentationTimeFromMediaTime(p,n),h=f+v,g=new c.default,g.representation=n,g.duration=v,g.mediaStartTime=p,g.presentationStartTime=f,g.availabilityStartTime=n.adaptation.period.mpd.manifest.loadedTime,g.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(h,n.adaptation.period.mpd,t),g.wallStartTime=e.calcWallTimeForSegment(g,t),g.replacementTime=r,g.replacementNumber=i(g,d),u=a(u,"Number",g.replacementNumber),u=a(u,"Time",g.replacementTime),g.media=u,g.mediaRange=l,g.availabilityIdx=d,g}function u(e,t){if(!t||!t.segments)return null;var n,r,i=t.segments.length;if(e<i&&(n=t.segments[e])&&n.availabilityIdx===e)return n;for(r=0;r<i;r++)if((n=t.segments[r])&&n.availabilityIdx===e)return n;return null}function l(e,t,n,r,i){var a,o,s=i||10,u=Number.POSITIVE_INFINITY;return t&&!e.isTimeSyncCompleted()?{start:0,end:u}:!t&&n||r<0?null:(a=Math.max(r-2,0),o=Math.min(r+s,u),{start:a,end:o})}function d(e,t,n,r,i,a){var o,s,l=n.segmentDuration,d=n.adaptation.period.mpd.manifest.minBufferTime,f=n.segmentAvailabilityRange,c={start:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,f.start),end:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,f.end)},h=n.segments,g=2*l,p=a||Math.max(2*d,10*l),v=NaN,m=null;return c.start=Math.max(c.start,0),t&&!e.isTimeSyncCompleted()?(o=Math.floor(c.start/l),s=Math.floor(c.end/l),{start:o,end:s}):(h&&h.length>0?(m=u(i,n),v=m?e.calcPeriodRelativeTimeFromMpdRelativeTime(n,m.presentationStartTime):i>0?i*l:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,r)):v=i>0?i*l:t?c.end:c.start,o=Math.floor(Math.max(v-g,c.start)/l),s=Math.floor(Math.min(o+p/l,c.end/l)),{start:o,end:s})}Object.defineProperty(n,"__esModule",{value:!0}),n.replaceTokenForTemplate=a,n.getIndexBasedSegment=o,n.getTimeBasedSegment=s,n.getSegmentByIndex=u,n.decideSegmentListRangeForTimeline=l,n.decideSegmentListRangeForTemplate=d;var f=e(47),c=function(e){return e&&e.__esModule?e:{default:e}}(f)},{47:47}],37:[function(e,t,n){function r(e,t){function n(e,n,i,a){var s,u,l,d,f,c=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,h=e.segmentDuration,g=e.segmentAvailabilityRange,p=[],v=null,m=null;for(f=e.startNumber,s=isNaN(h)&&!t?{start:f,end:f}:(0,o.decideSegmentListRangeForTemplate)(r,t,e,n,i,a),l=s.start,d=s.end,u=l;u<=d;u++)m=(0,o.getIndexBasedSegment)(r,t,e,u),m.replacementTime=(f+u-1)*e.segmentDuration,v=c.media,v=(0,o.replaceTokenForTemplate)(v,"Number",m.replacementNumber),v=(0,o.replaceTokenForTemplate)(v,"Time",m.replacementTime),m.media=v,p.push(m),m=null;return isNaN(h)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((g.end-g.start)/h),p}var r=e.timelineConverter;return{getSegments:n}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=e(36);r.__dashjs_factory_name="TemplateSegmentsGetter";var s=a.default.getClassFactory(r);n.default=s,t.exports=n.default},{10:10,36:36}],38:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){R=0,A=!1,w=NaN,b.on(u.default.TIME_SYNCHRONIZATION_COMPLETED,_,this)}function t(){return A}function n(e){A=e}function r(){return R}function i(e){R=e}function a(){return w}function s(e){w=e}function l(e,t,n,r){return r?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-R)):t.availabilityStartTime}function d(e,t,n){return l.call(this,e,t,n)}function f(e,t,n){return l.call(this,e,t,n,!0)}function c(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*R)/1e3}function h(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)}function g(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset}function p(e,t){var n,r,i;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i}function v(e,t){var n=e.adaptation.period,r={start:n.start,end:n.start+n.duration};if(!t)return r;if(!A&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var i=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),a=c(new Date,n),o=n.start+n.duration;return r.start=Math.max(a-n.mpd.timeShiftBufferDepth,n.start),r.end=a>=o&&a-i<o?o-i:a-i,r}function m(e,t){return t-e.adaptation.period.start}function y(e,t){return t+e.adaptation.period.start}function _(e){A||void 0!==e.offset&&(i(e.offset/1e3),A=!0)}function E(e){var t=e.presentationTimeOffset;return e.adaptation.period.start-t}function T(){b.off(u.default.TIME_SYNCHRONIZATION_COMPLETED,_,this),R=0,A=!1,w=NaN}var S=this.context,b=(0,o.default)(S).getInstance(),R=void 0,A=void 0,w=void 0;return{initialize:e,isTimeSyncCompleted:t,setTimeSyncCompleted:n,getClientTimeOffset:r,setClientTimeOffset:i,getExpectedLiveEdge:a,setExpectedLiveEdge:s,calcAvailabilityStartTimeFromPresentationTime:d,calcAvailabilityEndTimeFromPresentationTime:f,calcPresentationTimeFromWallTime:c,calcPresentationTimeFromMediaTime:h,calcPeriodRelativeTimeFromMpdRelativeTime:m,calcMpdRelativeTimeFromPeriodRelativeTime:y,calcMediaTimeFromPresentationTime:g,calcSegmentAvailabilityRange:v,calcWallTimeForSegment:p,calcMSETimeOffset:E,reset:T}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(9),o=r(a),s=e(13),u=r(s),l=e(10),d=r(l);i.__dashjs_factory_name="TimelineConverter",n.default=d.default.getSingletonFactory(i),t.exports=n.default},{10:10,13:13,9:9}],39:[function(e,t,n){function r(e,t){function n(e,n,i,a){var s,u,l,d,f,c,h,g,p,v,m,y,_,E,T=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,S=T.SegmentTimeline,b=T.SegmentURL_asArray,R=e.availableSegmentsNumber>0,A=0,w=0,I=-1,D=[],O=!1,M=function(n,i){var a=T.media,s=n.mediaRange;return b&&(a=b[i].media||"",s=b[i].mediaRange),(0,o.getTimeBasedSegment)(r,t,e,A,n.d,E,a,s,I)};for(E=e.timescale,s=S.S_asArray,p=(0,o.decideSegmentListRangeForTimeline)(r,t,n,i,a),p?(y=p.start,_=p.end):m=r.calcMediaTimeFromPresentationTime(n||0,e),l=0,d=s.length;l<d;l++){if(u=s[l],c=0,u.hasOwnProperty("r")&&(c=u.r),u.hasOwnProperty("t")&&(A=u.t,w=A/E),c<0){if((g=s[l+1])&&g.hasOwnProperty("t"))h=g.t/E;else{var C=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:r.calcSegmentAvailabilityRange(e,t).end;h=r.calcMediaTimeFromPresentationTime(C,e),e.segmentDuration=u.d/E}c=Math.ceil((h-w)/(u.d/E))-1}if(v){if(R)break;I+=c+1}else for(f=0;f<=c;f++){if(I++,p){if(I>_){if(v=!0,R)break;continue}I>=y&&D.push(M(u,I))}else{if(D.length>10){if(v=!0,R)break;continue}O?D.push(M(u,I)):w>=m-u.d/E*1.5&&(O=!0,D.push(M(u,I)))}A+=u.d,w=A/E}}return R||(e.availableSegmentsNumber=I+1),D}var r=e.timelineConverter;return{getSegments:n}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=e(36);r.__dashjs_factory_name="TimelineSegmentsGetter";var s=a.default.getClassFactory(r);n.default=s,t.exports=n.default},{10:10,36:36}],40:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.period=null,this.index=-1,this.type=null};n.default=i,t.exports=n.default},{}],41:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(t,n,i,a){r(this,e),this.url=t||"",this.serviceLocation=n||t||"",this.dvb_priority=i||1,this.dvb_weight=a||1};i.DEFAULT_DVB_PRIORITY=1,i.DEFAULT_DVB_WEIGHT=1,n.default=i,t.exports=n.default},{}],42:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN};n.default=i,t.exports=n.default},{}],43:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""};n.default=i,t.exports=n.default},{}],44:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN};n.default=i,t.exports=n.default},{}],45:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};i.DEFAULT_ID="defaultId",n.default=i,t.exports=n.default},{}],46:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.maxPlayoutRate=NaN}return i(e,null,[{key:"hasInitialization",value:function(e){return null!==e.initialization||("BaseURL"!==e.segmentInfoType||"SegmentBase"!==e.segmentInfoType)&&null!==e.range}},{key:"hasSegments",value:function(e){return"BaseURL"!==e.segmentInfoType&&"SegmentBase"!==e.segmentInfoType&&!e.indexRange}}]),e}();n.default=a,t.exports=n.default},{}],47:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null};n.default=i,t.exports=n.default},{}],48:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.schemeIdUri="",this.value=""};n.default=i,t.exports=n.default},{}],49:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t=function(t){s.trigger(g.default.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){var n=new u.default(e.url);f.load({request:n,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)}function n(e){var t=function(t,n){s.trigger(g.default.LOADING_COMPLETED,{request:e,response:t||null,error:n||null,sender:l})};e?f.load({request:e,progress:function(){s.trigger(g.default.LOADING_PROGRESS,{request:e})},success:function(e){t(e)},error:function(e,n,r){t(void 0,new d.default(m,r,n))}}):t(void 0,new d.default(y,_))}function r(){f&&f.abort()}function i(){f&&(f.abort(),f=null)}var a=this.context,s=(0,c.default)(a).getInstance(),l=void 0,f=void 0;return l={checkForExistence:t,load:n,abort:r,reset:i},function(){f=(0,o.default)(a).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier})}(),l}Object.defineProperty(n,"__esModule",{value:!0});var a=e(57),o=r(a),s=e(167),u=r(s),l=e(165),d=r(l),f=e(9),c=r(f),h=e(13),g=r(h),p=e(10),v=r(p),m=1,y=2,_="request is null";i.__dashjs_factory_name="FragmentLoader";var E=v.default.getClassFactory(i);E.FRAGMENT_LOADER_ERROR_LOADING_FAILURE=m,E.FRAGMENT_LOADER_ERROR_NULL_REQUEST=y,n.default=E,t.exports=n.default},{10:10,13:13,165:165,167:167,57:57,9:9}],50:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){s.trigger(T.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}function n(e){var t=null;return e.indexOf("SmoothStreamingMedia")>-1?(S?(t=S.createMssParser(),S.registerEvents()):f.manifestError("manifest type unsupported","createParser"),t):e.indexOf("MPD")>-1?(0,A.default)(a).create():t}function r(e){var t=new g.default(e,m.HTTPRequest.MPD_TYPE);p.load({request:t,success:function(t,r,i){var a,o;if(i.responseURL&&i.responseURL!==e?(o=l.parseBaseUrl(i.responseURL),a=i.responseURL):(l.isRelative(e)&&(e=l.resolve(e,window.location.href)),o=l.parseBaseUrl(e)),null===E&&(E=n(t)),null===E)return void s.trigger(T.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(w,"Failed detecting manifest type: "+e)});var u=E.parse(t,y);u?(u.url=a||e,u.originalUrl||(u.originalUrl=u.url),u.baseUri=o,u.loadedTime=new Date,y.resolveManifestOnLoad(u)):s.trigger(T.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(w,D)})},error:function(t,n,r){s.trigger(T.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(I,"Failed loading manifest: "+e+", "+r)})}})}function i(){s.off(T.default.XLINK_READY,t,h),y&&(y.reset(),y=null),p&&(p.abort(),p=null),S&&S.reset()}var a=this.context,s=(0,_.default)(a).getInstance(),l=(0,d.default)(a).getInstance(),f=(0,c.default)(a).getInstance(),h=void 0,p=void 0,y=void 0,E=void 0,S=e.mssHandler;return h={load:r,reset:i},function(){s.on(T.default.XLINK_READY,t,h),p=(0,u.default)(a).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier}),y=(0,o.default)(a).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier}),E=null}(),h}Object.defineProperty(n,"__esModule",{value:!0});var a=e(72),o=r(a),s=e(57),u=r(s),l=e(159),d=r(l),f=e(152),c=r(f),h=e(173),g=r(h),p=e(165),v=r(p),m=e(182),y=e(9),_=r(y),E=e(13),T=r(E),S=e(10),b=r(S),R=e(23),A=r(R),w=1,I=2,D="parsing failed";i.__dashjs_factory_name="ManifestLoader";var O=b.default.getClassFactory(i);O.MANIFEST_LOADER_ERROR_PARSING_FAILURE=w,O.MANIFEST_LOADER_ERROR_LOADING_FAILURE=I,n.default=O,t.exports=n.default},{10:10,13:13,152:152,159:159,165:165,173:173,182:182,23:23,57:57,72:72,9:9}],51:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&(e.manifestModel&&(w=e.manifestModel),e.dashManifestModel&&(I=e.dashManifestModel))}function t(e){A=e,T=NaN,S=null,R=!1,b=!0,D=(0,c.default)(y).getInstance(),E.on(u.default.STREAMS_COMPOSED,m,this),E.on(u.default.PLAYBACK_STARTED,p,this),E.on(u.default.PLAYBACK_PAUSED,v,this),E.on(u.default.INTERNAL_MANIFEST_LOADED,h,this)}function n(e){d(e)}function r(){return A}function i(){E.off(u.default.PLAYBACK_STARTED,p,this),E.off(u.default.PLAYBACK_PAUSED,v,this),E.off(u.default.STREAMS_COMPOSED,m,this),E.off(u.default.INTERNAL_MANIFEST_LOADED,h,this),a(),b=!0,R=!1,T=NaN,D=null}function a(){null!==S&&(clearInterval(S),S=null)}function s(){a(),isNaN(T)||(_("Refresh manifest in "+T+" seconds."),S=setTimeout(f,1e3*T))}function l(){R=!0;var e=w.getValue(),t=e.url,n=I.getLocation(e);n&&(t=n),A.load(t)}function d(e){w.setValue(e);var t=new Date,n=(t.getTime()-e.loadedTime.getTime())/1e3;T=I.getManifestUpdatePeriod(e,n),E.trigger(u.default.MANIFEST_UPDATED,{manifest:e}),_("Manifest has been refreshed at "+t+"["+t.getTime()/1e3+"] "),b||s()}function f(){b&&!D.getScheduleWhilePaused()||R||l()}function h(e){e.error||d(e.manifest)}function p(){b=!1,s()}function v(){b=!0,a()}function m(){R=!1}var y=this.context,_=(0,g.default)(y).getInstance().log,E=(0,o.default)(y).getInstance(),T=void 0,S=void 0,b=void 0,R=void 0,A=void 0,w=void 0,I=void 0,D=void 0;return{initialize:t,setManifest:n,getManifestLoader:r,refreshManifest:l,setConfig:e,reset:i}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(9),o=r(a),s=e(13),u=r(s),l=e(10),d=r(l),f=e(99),c=r(f),h=e(8),g=r(h);i.__dashjs_factory_name="ManifestUpdater",n.default=d.default.getSingletonFactory(i),t.exports=n.default},{10:10,13:13,8:8,9:9,99:99}],52:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t,n){return vn=(0,E.default)(Xt).getInstance(),pn=(0,y.default)(Xt).getInstance(),vn.supportsMediaSource()?void(rn||(rn=!0,sn=(0,U.default)(Xt).getInstance(),yn=(0,u.default)(Xt).getInstance(),un=(0,c.default)(Xt).getInstance(),un.initialize(),En=(0,le.default)(Xt).getInstance(),_n=(0,fe.default)(Xt).getInstance(),hn=(0,F.default)(Xt).getInstance(),hn.setConfig({adapter:Ut()}),at(),me(void 0===n||n),e&&Ot(e),t&&Lt(t),$t("[dash.js "+H()+"] MediaPlayer has been initialized"))):void pn.capabilityError("mediasource")}function t(){return!!Tn&&!!tn}function n(){if(!an)throw Yt;(!on||i()&&an)&&yn.play()}function r(){if(!an)throw Yt;yn.pause()}function i(){if(!an)throw Yt;return yn.isPaused()}function a(){if(!an)throw Yt;return yn.isSeeking()}function s(){if(!an)throw Yt;return yn.getIsDynamic()}function l(e){if(!Tn)throw zt;Dt().muted=e}function f(){if(!Tn)throw zt;return Dt().muted}function h(e){if(!Tn)throw zt;Dt().volume=e}function p(){if(!Tn)throw zt;return Dt().volume}function m(e){var t=["video","audio","fragmentedText"];if(e){if(-1!==t.indexOf(e)){var n=Te().getCurrentBufferLevel(Se(e));return n||NaN}return $t("Warning  - getBufferLength requested for invalid type"),NaN}return t.map(function(e){return Ue(e).length>0?Te().getCurrentBufferLevel(Se(e)):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)})}function _(){var e=Kt();return e?e.manifestInfo.DVRWindowSize:0}function T(e){var t=Kt();if(!t)return 0;var n=t.range.start+e;return n>t.range.end&&(n=t.range.end),n}function b(e){if(!an)throw Yt;var t=yn.getIsDynamic()?T(e):e;yn.seek(t)}function A(e){if(!an)throw Yt;var t=Dt().currentTime;if(void 0!==e)t=mn.getTimeRelativeToStreamId(t,e);else if(yn.getIsDynamic()){var n=Kt();t=null===n?0:I()-(n.range.end-n.time)}return t}function I(){if(!an)throw Yt;var e=Dt().duration;if(yn.getIsDynamic()){var t,n=Kt();if(!n)return 0;t=n.range.end-n.range.start,e=t<n.manifestInfo.DVRWindowSize?t:n.manifestInfo.DVRWindowSize}return e}function O(){if(!an)throw Yt;return A()<0?NaN:Ht(A())}function C(){if(!an)throw Yt;return Ht(I())}function L(e,t,n){var r=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],i=new Date(1e3*e),a=i.toLocaleDateString(t),o=i.toLocaleTimeString(t,{hour12:n});return r?o+" "+a:o}function k(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())}function N(e,t,n){ie.default.extend(e,t,n,Xt)}function B(e,t,n){Jt.on(e,t,n)}function G(e,t,n){Jt.off(e,t,n)}function H(){return(0,ae.getVersionString)()}function V(){return Zt}function z(){if(!Tn)throw zt;return Tn}function Q(e){gn.setLiveDelayFragmentCount(e)}function J(e){gn.setLiveDelay(e)}function $(){return gn.getLiveDelay()}function te(e){gn.setUseSuggestedPresentationDelay(e)}function re(e,t){gn.setLastBitrateCachingInfo(e,t)}function oe(e,t){gn.setLastMediaSettingsCachingInfo(e,t)}function ue(e,t){sn.setMaxAllowedBitrateFor(e,t)}function de(e,t){sn.setMinAllowedBitrateFor(e,t)}function ce(e){return sn.getMaxAllowedBitrateFor(e)}function ge(e){return sn.getMinAllowedBitrateFor(e)}function pe(e,t){sn.setMaxAllowedRepresentationRatioFor(e,t)}function ve(e){return sn.getMaxAllowedRepresentationRatioFor(e)}function me(e){on=e}function ye(){return on}function _e(e){gn.setScheduleWhilePaused(e)}function Ee(){return gn.getScheduleWhilePaused()}function Te(){return _n}function Se(e){return hn.getReadOnlyMetricsFor(e)}function be(e){if(!an)throw Yt;return sn.getQualityFor(e,mn.getActiveStreamInfo())}function Re(e,t){if(!an)throw Yt;sn.setPlaybackQuality(e,mn.getActiveStreamInfo(),t)}function Ae(){sn.setElementSize(),sn.setWindowResizeEventCalled(!0)}function we(){return sn.getLimitBitrateByPortal()}function Ie(e){sn.setLimitBitrateByPortal(e)}function De(){return sn.getUsePixelRatioInLimitBitrateByPortal()}function Oe(e){sn.setUsePixelRatioInLimitBitrateByPortal(e)}function Me(e){if(!an)throw Yt;void 0===Sn&&(Sn=(0,D.default)(Xt).getInstance());for(var t=Dt().textTracks,n=t.length,r=0;r<n;r++){var i=t[r],a=e===r?"showing":"hidden";i.mode!==a&&(i.mode=a)}Sn.setTextTrack()}function Ce(){var e=NaN;return Sn&&(e=Sn.getCurrentTrackIdx()),e}function Pe(e){if(!an)throw Yt;var t=qt();return t?t.getBitrateListFor(e):[]}function Le(e,t){sn.setInitialBitrateFor(e,t)}function xe(e){if(!an)throw Yt;return sn.getInitialBitrateFor(e)}function ke(e,t){sn.setInitialRepresentationRatioFor(e,t)}function Fe(e){return sn.getInitialRepresentationRatioFor(e)}function Ne(e){if(!an)throw Yt;return cn.getStreamsInfo(e)}function Ue(e){if(!an)throw Yt;var t=mn.getActiveStreamInfo();return t?un.getTracksFor(e,t):[]}function Be(e,t,n){if(!an)throw Yt;return n=n||cn.getStreamsInfo(t)[0],n?cn.getAllMediaInfoForType(t,n,e):[]}function je(e){if(!an)throw Yt;var t=mn.getActiveStreamInfo();return t?un.getCurrentTrackFor(e,t):null}function Ge(e,t){un.setInitialSettings(e,t)}function Ke(e){return un.getInitialSettings(e)}function He(e){if(!an)throw Yt;un.setTrack(e)}function qe(e){return un.getSwitchMode(e)}function Ve(e,t){un.setSwitchMode(e,t)}function Ye(e){un.setSelectionModeForInitialTrack(e)}function ze(){return un.getSelectionModeForInitialTrack()}function We(){return sn.getAutoSwitchBitrateFor("video")||sn.getAutoSwitchBitrateFor("audio")}function Qe(e){sn.setAutoSwitchBitrateFor("video",e),sn.setAutoSwitchBitrateFor("audio",e)}function Xe(e){return sn.getAutoSwitchBitrateFor(e)}function Je(e,t){sn.setAutoSwitchBitrateFor(e,t)}function Ze(e){gn.setFastSwitchEnabled(e)}function $e(){return gn.getFastSwitchEnabled()}function et(e){gn.setBufferOccupancyABREnabled(e)}function tt(e,t){var n=Nt(),r=this,i=function e(i){i.error?t(null,i.error):t(i.manifest),Jt.off(ee.default.INTERNAL_MANIFEST_LOADED,e,r),n.reset()};Jt.on(ee.default.INTERNAL_MANIFEST_LOADED,i,r);var a=(0,M.default)(Xt).getInstance();a.initialize(),n.load(a.parseURI(e))}function nt(e,t){rt(e,t);var n=new o.default;n.schemeIdUri=e,n.value=t,gn.getUTCTimingSources().push(n)}function rt(e,t){var n=gn.getUTCTimingSources();n.forEach(function(r,i){r.schemeIdUri===e&&r.value===t&&n.splice(i,1)})}function it(){gn.setUTCTimingSources([])}function at(){nt(x.default.DEFAULT_UTC_TIMING_SOURCE.scheme,x.default.DEFAULT_UTC_TIMING_SOURCE.value)}function ot(e){gn.setUseManifestDateHeaderTimeSource(e)}function st(e){gn.setBufferToKeep(e)}function ut(e){gn.setBufferPruningInterval(e)}function lt(e){gn.setStableBufferTime(e)}function dt(e){gn.setBufferTimeAtTopQuality(e)}function ft(e){gn.setBufferTimeAtTopQualityLongForm(e)}function ct(e){gn.setLongFormContentDurationThreshold(e)}function ht(e){gn.setRichBufferThreshold(e)}function gt(e){gn.setBandwidthSafetyFactor(e)}function pt(){return gn.getBandwidthSafetyFactor()}function vt(e){gn.setAbandonLoadTimeout(e)}function mt(e){gn.setFragmentRetryAttempts(e)}function yt(e){gn.setFragmentRetryInterval(e)}function _t(e){Et(void 0,e)}function Et(e,t){gn.setXHRWithCredentialsForType(e,t)}function Tt(e){return gn.getXHRWithCredentialsForType(e)}function St(){return Bt()}function bt(e){ln=e}function Rt(e){nn=e}function At(e){var t=(0,S.default)(Xt).getInstance();t.setConfig({videoModel:Tn}),t.initialize(),t.displayCConTop(e)}function wt(){return Tn?Tn.getVideoContainer():null}function It(e){if(!Tn)throw zt;Tn.setVideoContainer(e)}function Dt(){if(!Tn)throw zt;return Tn.getElement()}function Ot(e){if(!rn)throw Qt;Tn=null,e&&(Tn=(0,q.default)(Xt).getInstance(),Tn.initialize(),Tn.setElement(e),Bt(),jt(),Gt()),kt()}function Mt(){return Tn?Tn.getTTMLRenderingDiv():null}function Ct(e){if(!Tn)throw zt;Tn.setTTMLRenderingDiv(e)}function Pt(){if(!tn)throw Wt;return tn}function Lt(e){if(!rn)throw Qt;if("string"==typeof e){var t=(0,M.default)(Xt).getInstance();t.initialize(),tn=t.parseURI(e)}else tn=e;kt()}function xt(){Lt(null),Ot(null),nn=null,ln=null}function kt(){an?(an=!1,cn.reset(),mn.reset(),yn.reset(),sn.reset(),un.reset(),Sn.reset(),mn=null,dn=null,t()&&Vt()):t()&&Vt()}function Ft(){var e=(0,K.default)(Xt).getInstance();e.initialize(),(0,R.default)(Xt).getInstance().setConfig({dashManifestModel:En}),un.initialize(),un.setConfig({errHandler:pn}),mn=(0,d.default)(Xt).getInstance(),mn.setConfig({capabilities:vn,manifestLoader:Nt(),manifestModel:(0,P.default)(Xt).getInstance(),dashManifestModel:En,protectionController:ln,adapter:cn,metricsModel:hn,dashMetrics:_n,liveEdgeFinder:(0,v.default)(Xt).getInstance(),mediaSourceController:(0,Y.default)(Xt).getInstance(),timeSyncController:(0,j.default)(Xt).getInstance(),baseURLController:(0,W.default)(Xt).getInstance(),errHandler:pn,timelineConverter:(0,he.default)(Xt).getInstance()}),mn.initialize(on,nn),sn.setConfig({abrRulesCollection:e,streamController:mn}),Sn=(0,D.default)(Xt).getInstance(),Sn.setConfig({errHandler:pn,dashManifestModel:En,mediaController:un,streamController:mn,videoModel:Tn})}function Nt(){return(0,g.default)(Xt).create({errHandler:pn,metricsModel:hn,requestModifier:(0,w.default)(Xt).getInstance(),mssHandler:fn})}function Ut(){return cn=(0,se.default)(Xt).getInstance(),cn.initialize(),cn.setConfig({dashManifestModel:En}),cn}function Bt(){if(ln)return ln;var e=dashjs.Protection;if("function"==typeof e){var t=e(Xt).create();return ee.default.extend(e.events),ne.default.extend(e.events,{publicOnly:!0}),ln=t.createProtectionSystem({log:$t,videoModel:Tn,capabilities:vn,eventBus:Jt,adapter:cn})}return null}function jt(){if(dn)return dn;var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(Xt).create();return dn=t.createMetricsReporting({log:$t,eventBus:Jt,mediaElement:Dt(),dashManifestModel:En,metricsModel:hn})}return null}function Gt(){if(fn)return fn;var e=dashjs.MssHandler;return"function"==typeof e?fn=e(Xt).create({eventBus:Jt,mediaPlayerModel:gn}):null}function Kt(){var e=hn.getReadOnlyMetricsFor("video")||hn.getReadOnlyMetricsFor("audio");return _n.getCurrentDVRInfo(e)}function Ht(e){var t,n=Kt();return n?(t=n.manifestInfo.availableFrom.getTime()/1e3,e+(t+n.range.start)):0}function qt(){if(!an)throw Yt;var e=mn.getActiveStreamInfo();return e?mn.getStreamById(e.id):null}function Vt(){an||(an=!0,$t("Playback Initialized"),Ft(),"string"==typeof tn?mn.load(tn):mn.loadWithManifest(tn))}var Yt="You must first call play() to init playback before calling this method",zt="You must first call attachView() to set the video element before calling this method",Wt="You must first call attachSource() with a valid source before calling this method",Qt="MediaPlayer not initialized!",Xt=this.context,Jt=(0,Z.default)(Xt).getInstance(),Zt=(0,X.default)(Xt).getInstance(),$t=Zt.log,en=void 0,tn=void 0,nn=void 0,rn=void 0,an=void 0,on=void 0,sn=void 0,un=void 0,ln=void 0,dn=void 0,fn=void 0,cn=void 0,hn=void 0,gn=void 0,pn=void 0,vn=void 0,mn=void 0,yn=void 0,_n=void 0,En=void 0,Tn=void 0,Sn=void 0;return en={initialize:e,on:B,off:G,extend:N,attachView:Ot,attachSource:Lt,isReady:t,play:n,isPaused:i,pause:r,isSeeking:a,isDynamic:s,seek:b,setMute:l,isMuted:f,setVolume:h,getVolume:p,time:A,duration:I,timeAsUTC:O,durationAsUTC:C,getActiveStream:qt,getDVRWindowSize:_,getDVRSeekOffset:T,convertToTimeCode:k,formatUTC:L,getVersion:H,getDebug:V,getBufferLength:m,getVideoModel:z,getVideoContainer:wt,getTTMLRenderingDiv:Mt,getVideoElement:Dt,getSource:Pt,setLiveDelayFragmentCount:Q,setLiveDelay:J,getLiveDelay:$,useSuggestedPresentationDelay:te,enableLastBitrateCaching:re,enableLastMediaSettingsCaching:oe,setMaxAllowedBitrateFor:ue,getMaxAllowedBitrateFor:ce,setMinAllowedBitrateFor:de,getMinAllowedBitrateFor:ge,setMaxAllowedRepresentationRatioFor:pe,getMaxAllowedRepresentationRatioFor:ve,setAutoPlay:me,getAutoPlay:ye,setScheduleWhilePaused:_e,getScheduleWhilePaused:Ee,getDashMetrics:Te,getMetricsFor:Se,getQualityFor:be,setQualityFor:Re,updatePortalSize:Ae,getLimitBitrateByPortal:we,setLimitBitrateByPortal:Ie,getUsePixelRatioInLimitBitrateByPortal:De,setUsePixelRatioInLimitBitrateByPortal:Oe,setTextTrack:Me,getBitrateInfoListFor:Pe,setInitialBitrateFor:Le,getInitialBitrateFor:xe,setInitialRepresentationRatioFor:ke,getInitialRepresentationRatioFor:Fe,getStreamsFromManifest:Ne,getTracksFor:Ue,getTracksForTypeFromManifest:Be,getCurrentTrackFor:je,setInitialMediaSettingsFor:Ge,getInitialMediaSettingsFor:Ke,setCurrentTrack:He,getTrackSwitchModeFor:qe,setTrackSwitchModeFor:Ve,setSelectionModeForInitialTrack:Ye,getSelectionModeForInitialTrack:ze,getAutoSwitchQuality:We,setAutoSwitchQuality:Qe,setFastSwitchEnabled:Ze,getFastSwitchEnabled:$e,getAutoSwitchQualityFor:Xe,setAutoSwitchQualityFor:Je,enableBufferOccupancyABR:et,setBandwidthSafetyFactor:gt,getBandwidthSafetyFactor:pt,setAbandonLoadTimeout:vt,retrieveManifest:tt,addUTCTimingSource:nt,removeUTCTimingSource:rt,clearDefaultUTCTimingSources:it,restoreDefaultUTCTimingSources:at,setBufferToKeep:st,setBufferPruningInterval:ut,setStableBufferTime:lt,setBufferTimeAtTopQuality:dt,setFragmentLoaderRetryAttempts:mt,setFragmentLoaderRetryInterval:yt,setXHRWithCredentials:_t,setXHRWithCredentialsForType:Et,getXHRWithCredentialsForType:Tt,setBufferTimeAtTopQualityLongForm:ft,setLongFormContentDurationThreshold:ct,setRichBufferThreshold:ht,getProtectionController:St,attachProtectionController:bt,setProtectionData:Rt,enableManifestDateHeaderTimeSource:ot,displayCaptionsOnTop:At,attachVideoContainer:It,attachTTMLRenderingDiv:Ct,getCurrentTextTrackIndex:Ce,reset:xt},function(){rn=!1,an=!1,on=!0,ln=null,nn=null,cn=null,ee.default.extend(ne.default),gn=(0,x.default)(Xt).getInstance()}(),en}Object.defineProperty(n,"__esModule",{value:!0});var a=e(48),o=r(a),s=e(67),u=r(s),l=e(70),d=r(l),f=e(65),c=r(f),h=e(50),g=r(h),p=e(155),v=r(p),m=e(152),y=r(m),_=e(148),E=r(_),T=e(145),S=r(T),b=e(69),R=r(b),A=e(157),w=r(A),I=e(143),D=r(I),O=e(101),M=r(O),C=e(98),P=r(C),L=e(99),x=r(L),k=e(100),F=r(k),N=e(59),U=r(N),B=e(71),j=r(B),G=e(130),K=r(G),H=e(102),q=r(H),V=e(66),Y=r(V),z=e(60),W=r(z),Q=e(8),X=r(Q),J=e(9),Z=r(J),$=e(13),ee=r($),te=e(53),ne=r(te),re=e(10),ie=r(re),ae=e(11),oe=e(15),se=r(oe),ue=e(22),le=r(ue),de=e(17),fe=r(de),ce=e(38),he=r(ce)
;i.__dashjs_factory_name="MediaPlayer";var ge=ie.default.getClassFactory(i);ge.events=ne.default,n.default=ge,t.exports=n.default},{10:10,100:100,101:101,102:102,11:11,13:13,130:130,143:143,145:145,148:148,15:15,152:152,155:155,157:157,17:17,22:22,38:38,48:48,50:50,53:53,59:59,60:60,65:65,66:66,67:67,69:69,70:70,71:71,8:8,9:9,98:98,99:99}],53:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}},o=e(14),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.STREAM_INITIALIZED="streamInitialized",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated"}return i(t,e),t}(s.default),l=new u;n.default=l,t.exports=n.default},{14:14}],54:[function(e,t,n){function r(){window.removeEventListener("load",r),s.createAll()}function i(){window.dashjs&&(window.clearInterval(u),s.createAll())}Object.defineProperty(n,"__esModule",{value:!0});var a=e(52),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(e,t,n){if(!e||"VIDEO"!==e.nodeName)return null;if(e._dashjs_player)return e._dashjs_player;var i,a=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==r})[0])&&e.src)t=document.createElement("source"),t.src=e.src;else if(!t&&!e.src)return null;return n=n||{},i=(0,o.default)(n).create(),i.initialize(e,t.src,e.autoplay),i.getDebug().log("Converted "+a+" to dash.js player and added content: "+t.src),e._dashjs_player=i,i}function t(t,i){var a=[];t=t||"[data-dashjs-player]",i=i||document;for(var o=i.querySelectorAll(t),s=0;s<o.length;s++){var u=e(o[s],null);a.push(u)}for(var l=i.querySelectorAll('source[type="'+r+'"]'),s=0;s<l.length;s++){var d=n(l[s]),u=e(d,null);a.push(u)}return a}function n(e){for(var t=!0;t;){var n=e;if(t=!1,"video"===n.nodeName.toLowerCase())return n;e=n.parentNode,t=!0}}var r="application/dash+xml";return{create:e,createAll:t}}(),u=void 0;!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?s.createAll():u=window.setInterval(i,500):window.addEventListener("load",r)),n.default=s,t.exports=n.default},{52:52}],55:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){fe=e,(pe=t)&&($.on(x.default.KEY_ERROR,I,se),$.on(x.default.SERVER_CERTIFICATE_UPDATED,I,se),$.on(x.default.LICENSE_REQUEST_COMPLETE,I,se),$.on(x.default.KEY_SYSTEM_SELECTED,I,se),$.on(x.default.KEY_SESSION_CREATED,I,se))}function n(e){le||($.on(x.default.CURRENT_TRACK_CHANGED,L,se),G(e),le=!0)}function r(){for(var e=ue.length,t=0;t<e;t++)ue[t].reset();ue=[],le=!1,de=!1,T(),$.off(x.default.CURRENT_TRACK_CHANGED,L,se)}function i(){me&&(me.pause(),me=null),_e&&(_e.reset(),_e=null),r(),ye=null,Te=null,te=null,ee=null,ne=null,re=null,Z=null,ie=null,he=!1,ge=!1,ce={},$.off(x.default.DATA_UPDATE_COMPLETED,Y,se),$.off(x.default.BUFFERING_COMPLETED,V,se),$.off(x.default.KEY_ERROR,I,se),$.off(x.default.SERVER_CERTIFICATE_UPDATED,I,se),$.off(x.default.LICENSE_REQUEST_COMPLETE,I,se),$.off(x.default.KEY_SYSTEM_SELECTED,I,se),$.off(x.default.KEY_SESSION_CREATED,I,se)}function a(){return fe.duration}function s(){return fe.start}function l(){return fe.index}function f(){return fe.id}function h(){return fe}function p(e){return null!==H(e)}function m(e){var t=H(e);return Te.getBitrateList(t)}function _(){Ee&&Ee.start()}function T(){Ee&&Ee.clear()}function b(){return le}function A(){return ge}function I(e){e.error&&(ie.mediaKeySessionError(e.error),Z(e.error),i())}function O(e){return"text"===e.type?e.mimeType:e.type}function C(e,t,n){var r,i,a=e.type;if("muxed"===a&&e)return i="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",Z(i),ie.manifestError(i,"multiplexedrep",ee.getValue()),!1;if("text"===a||"fragmentedText"===a||"embeddedText"===a)return!0;if(r=e.codec,Z(a+" codec: "+r),e.contentProtection&&!re.supportsEncryptedMedia())ie.capabilityError("encryptedmedia");else if(!re.supportsCodec((0,y.default)(J).getInstance().getElement(),r))return i=a+"Codec ("+r+") is not supported.",ie.manifestError(i,"codec",n),Z(i),!1;return!0}function L(e){if(e.newMediaInfo.streamInfo.id===fe.id){var t=z(e.oldMediaInfo);if(t){var n=me.getTime(),r=t.getBuffer(),i=e.newMediaInfo,a=ee.getValue(),o=ue.indexOf(t),s=t.getMediaSource();"fragmentedText"!==i.type?(t.reset(!0),U(i,a,s,{buffer:r,replaceIdx:o,currentTime:n}),me.seek(me.getTime())):t.updateMediaInfo(a,i)}}}function k(e){return"webm"===e.split("/")[1].toLowerCase()}function N(e){var t=k(e.mimeType)?(0,D.default)(J).getInstance():(0,w.default)(J).getInstance();return t.setConfig({baseURLController:oe,metricsModel:(0,E.default)(J).getInstance()}),t.initialize(),(0,R.default)(J).create({segmentBaseLoader:t,timelineConverter:ae,dashMetrics:(0,M.default)(J).getInstance(),metricsModel:(0,E.default)(J).getInstance(),baseURLController:oe})}function U(e,t,n,r){var i=(0,u.default)(J).create({indexHandler:N(e),timelineConverter:ae,adapter:ne,manifestModel:ee}),a=ne.getAllMediaInfoForType(t,fe,e.type);if(i.initialize(O(e),_e,n,se,Ee),Te.updateTopQualityIndex(e),r?(i.setBuffer(r.buffer),i.getIndexHandler().setCurrentTime(r.currentTime),ue[r.replaceIdx]=i):ue.push(i),"text"===e.type||"fragmentedText"===e.type){for(var o,s=0;s<a.length;s++)a[s].index===e.index&&(o=s),i.updateMediaInfo(t,a[s]);"fragmentedText"===e.type&&i.updateMediaInfo(t,a[o])}else i.updateMediaInfo(t,e)}function B(e,t){var n,r=ee.getValue(),i=ne.getAllMediaInfoForType(r,fe,e),a=null;if(!i||0===i.length)return void Z("No "+e+" data.");for(var o=0,s=i.length;o<s;o++)if(a=i[o],"embeddedText"===e)Se.addEmbeddedTrack(a);else{if(!C(a,t,r))continue;ye.isMultiTrackSupportedByType(a.type)&&ye.addTrack(a,fe)}"embeddedText"!==e&&0!==ye.getTracksFor(e,fe).length&&(ye.checkInitialMediaSettingsForType(e,fe),n=ye.getCurrentTrackFor(e,fe),U(n,r,t))}function G(e){var t,n=ee.getValue();if(Ee=(0,c.default)(J).getInstance(),Ee.initialize(),Ee.setConfig({manifestModel:ee,manifestUpdater:te}),t=ne.getEventsFor(n,fe),Ee.addInlineEvents(t),he=!0,B("video",e),B("audio",e),B("text",e),B("fragmentedText",e),B("embeddedText",e),B("muxed",e),q(),de=!0,he=!1,0===ue.length){var r="No streams to play.";ie.manifestError(r,"nostreams",n),Z(r)}else ve.initialize(ae,ue[0]),K()}function K(){var e=ue.length,t=!!ce.audio||!!ce.video,n=t?new Error(X,"Data update failed",null):null,r=0;for(r;r<e;r++)if(ue[r].isUpdating()||he)return;ge=!0,de&&(pe&&pe.initialize(ee.getValue(),H("audio"),H("video")),$.trigger(x.default.STREAM_INITIALIZED,{streamInfo:fe,error:n}))}function H(e){for(var t=ue.length,n=null,r=0;r<t;r++)if(n=ue[r],n.getType()===e)return n.getMediaInfo();return null}function q(){for(var e=0,t=ue.length;e<t;e++)ue[e].createBuffer()}function V(e){if(e.streamInfo===fe){var t=W(),n=t.length,r=0;for(r;r<n;r++)if(!t[r].isBufferingCompleted())return;$.trigger(x.default.STREAM_BUFFERING_COMPLETED,{streamInfo:fe})}}function Y(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===fe&&(ce[t.getType()]=e.error,K())}function z(e){return!!e&&W().filter(function(t){return t.getType()===e.type})[0]}function W(){var e,t,n=ue.length,r=[],i=0;for(i;i<n;i++)t=ue[i],"audio"!==(e=t.getType())&&"video"!==e&&"fragmentedText"!==e||r.push(t);return r}function Q(e){Z("Manifest updated... updating data system wide.");var t=ee.getValue();if(le=!1,he=!0,ge=!1,fe=e,Ee){var n=ne.getEventsFor(t,fe);Ee.addInlineEvents(n)}for(var r=0,i=ue.length;r<i;r++){var a=ue[r],o=ne.getMediaInfoForType(t,fe,a.getType());Te.updateTopQualityIndex(o),a.updateMediaInfo(t,o)}he=!1,K()}var X=1,J=this.context,Z=(0,F.default)(J).getInstance().log,$=(0,P.default)(J).getInstance(),ee=e.manifestModel,te=e.manifestUpdater,ne=e.adapter,re=e.capabilities,ie=e.errHandler,ae=e.timelineConverter,oe=e.baseURLController,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,he=void 0,ge=void 0,pe=void 0,ve=void 0,me=void 0,ye=void 0,_e=void 0,Ee=void 0,Te=void 0,Se=void 0;return se={initialize:t,activate:n,deactivate:r,getDuration:a,getStartTime:s,getStreamIndex:l,getId:f,getStreamInfo:h,hasMedia:p,getBitrateListFor:m,startEventController:_,isActivated:b,isInitialized:A,updateData:Q,reset:i,getProcessors:W},function(){ue=[],le=!1,de=!1,fe=null,ce={},he=!1,ge=!1,ve=(0,o.default)(J).getInstance(),me=(0,S.default)(J).getInstance(),Te=(0,v.default)(J).getInstance(),ye=(0,d.default)(J).getInstance(),_e=(0,g.default)(J).create(),Se=(0,j.default)(J).getInstance(),$.on(x.default.BUFFERING_COMPLETED,V,se),$.on(x.default.DATA_UPDATE_COMPLETED,Y,se)}(),se}Object.defineProperty(n,"__esModule",{value:!0});var a=e(155),o=r(a),s=e(56),u=r(s),l=e(65),d=r(l),f=e(63),c=r(f),h=e(64),g=r(h),p=e(59),v=r(p),m=e(102),y=r(m),_=e(100),E=r(_),T=e(67),S=r(T),b=e(16),R=r(b),A=e(18),w=r(A),I=e(19),D=r(I),O=e(17),M=r(O),C=e(9),P=r(C),L=e(13),x=r(L),k=e(8),F=r(k),N=e(10),U=r(N),B=e(143),j=r(B);i.__dashjs_factory_name="Stream",n.default=U.default.getClassFactory(i),t.exports=n.default},{10:10,100:100,102:102,13:13,143:143,155:155,16:16,17:17,18:18,19:19,56:56,59:59,63:63,64:64,65:65,67:67,8:8,9:9}],56:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n,r,i){$=e,te=r,ne=i,se=t,J=te.getStreamInfo().manifestInfo.isDynamic,Y.initialize(this),re=(0,o.default)(V).getInstance(),re.initialize($,this),ie=q(e),ae=(0,v.default)(V).create({metricsModel:(0,E.default)(V).getInstance(),manifestModel:Q,adapter:W,dashMetrics:(0,P.default)(V).getInstance(),dashManifestModel:(0,M.default)(V).getInstance(),timelineConverter:z,mediaPlayerModel:(0,y.default)(V).getInstance()}),ie.initialize($,n,this),ae.initialize($,this),ue=(0,S.default)(V).create({metricsModel:(0,E.default)(V).getInstance(),errHandler:(0,F.default)(V).getInstance(),requestModifier:(0,R.default)(V).getInstance()}),le=ae.getFragmentModel(),le.setLoader(ue),oe=(0,x.default)(V).create(),oe.initialize(this)}function n(e){Y.reset(),ie&&(ie.reset(e),ie=null),ae&&(ae.reset(),ae=null),oe&&(oe.reset(),oe=null),se=null,ue=null,ne=null,te=null,J=null,Z=null,ee=[],$=null}function r(){return oe.isUpdating()}function i(){return $}function a(){return re}function s(){return oe}function l(){return ue}function f(){return Y}function h(){return se}function p(){return ie.getBuffer()}function m(e){ie.setBuffer(e)}function _(){return ie}function T(){return le}function b(){return te?te.getStreamInfo():null}function A(e,t){t===Z||t&&Z&&t.type!==Z.type||(Z=t),-1===ee.indexOf(t)&&ee.push(t),W.updateData(e,this)}function I(){return ee}function O(){return Z}function C(){return ie.getMediaSource()}function L(){return ae}function k(){return ne}function N(){ae.start()}function U(){ae.stop()}function B(){return W.getCurrentRepresentationInfo(Q.getValue(),oe)}function j(e){return W.getRepresentationInfoForQuality(Q.getValue(),oe,e)}function G(){return ie.getIsBufferingCompleted()}function K(){return ie.getBuffer()||ie.createBuffer(Z)}function H(){return J}function q(e){return"video"===e||"audio"===e?(0,u.default)(V).create({metricsModel:(0,E.default)(V).getInstance(),manifestModel:Q,sourceBufferController:(0,w.default)(V).getInstance(),errHandler:(0,F.default)(V).getInstance(),streamController:(0,d.default)(V).getInstance(),mediaController:(0,c.default)(V).getInstance(),adapter:W,textController:(0,D.default)(V).getInstance()}):(0,g.default)(V).create({type:e,metricsModel:(0,E.default)(V).getInstance(),manifestModel:Q,sourceBufferController:(0,w.default)(V).getInstance(),errHandler:(0,F.default)(V).getInstance(),streamController:(0,d.default)(V).getInstance(),mediaController:(0,c.default)(V).getInstance(),adapter:W,textController:(0,D.default)(V).getInstance()})}var V=this.context,Y=e.indexHandler,z=e.timelineConverter,W=e.adapter,Q=e.manifestModel,X=void 0,J=void 0,Z=void 0,$=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0;return X={initialize:t,isUpdating:r,getType:i,getBufferController:_,getABRController:a,getFragmentLoader:l,getFragmentModel:T,getScheduleController:L,getEventController:k,getFragmentController:h,getRepresentationController:s,getIndexHandler:f,getCurrentRepresentationInfo:B,getRepresentationInfoForQuality:j,isBufferingCompleted:G,createBuffer:K,getStreamInfo:b,updateMediaInfo:A,getMediaInfoArr:I,getMediaInfo:O,getMediaSource:C,getBuffer:p,setBuffer:m,start:N,stop:U,isDynamic:H,reset:n},function(){ee=[]}(),X}Object.defineProperty(n,"__esModule",{value:!0});var a=e(59),o=r(a),s=e(62),u=r(s),l=e(70),d=r(l),f=e(65),c=r(f),h=e(142),g=r(h),p=e(68),v=r(p),m=e(99),y=r(m),_=e(100),E=r(_),T=e(49),S=r(T),b=e(157),R=r(b),A=e(69),w=r(A),I=e(143),D=r(I),O=e(22),M=r(O),C=e(17),P=r(C),L=e(21),x=r(L),k=e(152),F=r(k),N=e(10),U=r(N);i.__dashjs_factory_name="StreamProcessor",n.default=U.default.getClassFactory(i),t.exports=n.default},{10:10,100:100,142:142,143:143,152:152,157:157,17:17,21:21,22:22,49:49,59:59,62:62,65:65,68:68,69:69,70:70,99:99}],57:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){function t(e,n){var r=e.request,i=new XMLHttpRequest,a=[],o=!0,d=!0,c=new Date,h=c,y=0,_=function(e){d=!1,r.requestStartDate=c,r.requestEndDate=new Date,r.firstByteDate=r.firstByteDate||c,r.checkExistenceOnly||l.addHttpRequest(r.mediaType,null,r.type,r.url,i.responseURL||null,r.serviceLocation||null,r.range||null,r.requestStartDate,r.firstByteDate,r.requestEndDate,i.status,r.duration,i.getAllResponseHeaders(),e?a:null)},E=function(){-1!==g.indexOf(i)&&(g.splice(g.indexOf(i),1),d&&(_(!1),n>0?(n--,v.push(setTimeout(function(){t(e,n)},s.getRetryIntervalForType(r.type)))):(u.downloadError(m[r.type],r.url,r),e.error&&e.error(r,"error",i.statusText),e.complete&&e.complete(r,i.statusText))))},T=function(t){var n=new Date;o&&(o=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(r.firstByteDate=n)),t.lengthComputable&&(r.bytesLoaded=t.loaded,r.bytesTotal=t.total),a.push({s:h,d:n.getTime()-h.getTime(),b:[t.loaded?t.loaded-y:0]}),h=n,y=t.loaded,e.progress&&e.progress()},S=function(){i.status>=200&&i.status<=299&&(_(!0),e.success&&e.success(i.response,i.statusText,i),e.complete&&e.complete(r,i.statusText))};try{var b=f.modifyRequestURL(r.url),R=r.checkExistenceOnly?"HEAD":"GET";i.open(R,b,!0),r.responseType&&(i.responseType=r.responseType),r.range&&i.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=c),i=f.modifyRequestHeader(i),i.withCredentials=s.getXHRWithCredentialsForType(r.type),i.onload=S,i.onloadend=E,i.onerror=E,i.onprogress=T;var A=(new Date).getTime();isNaN(r.delayLoadingTime)||A>=r.delayLoadingTime?(g.push(i),i.send()):function(){var e={xhr:i};p.push(e),e.delayTimeout=setTimeout(function(){if(-1!==p.indexOf(e)){p.splice(p.indexOf(e),1);try{g.push(e.xhr),e.xhr.send()}catch(t){e.xhr.onerror()}}},r.delayLoadingTime-A)}()}catch(e){i.onerror()}}function n(e){e.request&&t(e,s.getRetryAttemptsForType(e.request.type))}function r(){v.forEach(function(e){return clearTimeout(e)}),v=[],p.forEach(function(e){return clearTimeout(e.delayTimeout)}),p=[],g.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.abort()}),g=[]}var a=this.context,s=(0,d.default)(a).getInstance(),u=e.errHandler,l=e.metricsModel,f=e.requestModifier,h=void 0,g=void 0,p=void 0,v=void 0,m=void 0;return h={load:n,abort:r},function(){var e;g=[],p=[],v=[],e={},i(e,o.HTTPRequest.MPD_TYPE,c.default.DOWNLOAD_ERROR_ID_MANIFEST),i(e,o.HTTPRequest.XLINK_EXPANSION_TYPE,c.default.DOWNLOAD_ERROR_ID_XLINK),i(e,o.HTTPRequest.INIT_SEGMENT_TYPE,c.default.DOWNLOAD_ERROR_ID_INITIALIZATION),i(e,o.HTTPRequest.MEDIA_SEGMENT_TYPE,c.default.DOWNLOAD_ERROR_ID_CONTENT),i(e,o.HTTPRequest.INDEX_SEGMENT_TYPE,c.default.DOWNLOAD_ERROR_ID_CONTENT),i(e,o.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,c.default.DOWNLOAD_ERROR_ID_CONTENT),i(e,o.HTTPRequest.OTHER_TYPE,c.default.DOWNLOAD_ERROR_ID_CONTENT),m=e}(),h}Object.defineProperty(n,"__esModule",{value:!0});var o=e(182),s=e(10),u=r(s),l=e(99),d=r(l),f=e(152),c=r(f);a.__dashjs_factory_name="XHRLoader";var h=u.default.getClassFactory(a);n.default=h,t.exports=n.default},{10:10,152:152,182:182,99:99}],58:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){var i=function(r,i){t.resolved=!0,t.resolvedContent=r||null,a.trigger(p.default.XLINK_ELEMENT_LOADED,{element:t,resolveObject:n,error:r||i?null:new o.default(y,"Failed loading Xlink element: "+e)})};if(e===r)i(null,!0);else{var u=new f.default(e,l.HTTPRequest.XLINK_TYPE);s.load({request:u,success:function(e){i(e)},error:function(){i(null)}})}}function n(){s&&(s.abort(),s=null)}var r="urn:mpeg:dash:resolve-to-zero:2013",i=this.context,a=(0,h.default)(i).getInstance(),s=(0,u.default)(i).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier});return{load:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(165),o=r(a),s=e(57),u=r(s),l=e(182),d=e(173),f=r(d),c=e(9),h=r(c),g=e(13),p=r(g),v=e(10),m=r(v),y=1;i.__dashjs_factory_name="XlinkLoader";var _=m.default.getClassFactory(i);_.XLINK_LOADER_ERROR_LOADING_FAILURE=y,n.default=_,t.exports=n.default},{10:10,13:13,165:165,173:173,182:182,57:57,9:9}],59:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){ye={video:!0,audio:!0},_e={},Ee={},Te={},Se={},be={},Ae={},Re={},Ue={},Ie=!1,De=!1,void 0===Oe&&(Oe=!1),Fe=(0,u.default)(fe).getInstance(),ke=(0,d.default)(fe).getInstance(),Pe=(0,S.default)(fe).getInstance(),Le=(0,R.default)(fe).getInstance(),xe=(0,w.default)(fe).getInstance(),je=(0,F.default)(fe).getInstance(),Ge=(0,U.default)(fe).getInstance(),Ke=(new Date).getTime()/1e3}function t(e,t){Ue[e]=(0,P.default)(fe).create(),Re[e]=t,Ae[e]=Ae[e]||{},Ae[e].state=K,ge.on(v.default.LOADING_PROGRESS,de,this),"video"==e&&(ge.on(y.default.QUALITY_CHANGE_RENDERED,i,this),Be=(0,x.default)(fe).create(),ue())}function n(){ge.off(v.default.LOADING_PROGRESS,de,this),ge.off(y.default.QUALITY_CHANGE_RENDERED,i,this),Ne=void 0,Be=void 0,clearTimeout(we),we=null,e()}function r(e){e&&(e.abrRulesCollection&&(ve=e.abrRulesCollection),e.streamController&&(me=e.streamController))}function i(e){"video"===e.mediaType&&(Ne=e.newQuality,Be.push(Ne,xe.getPlaybackQuality()))}function a(e,t){var n;return _e[t]=_e[t]||{},_e[t].hasOwnProperty(e)||(_e[t][e]=0),n=ae(_e[t][e],e),n=oe(n,e,_e[t][e]),n=le(n,e)}function s(e){var t=Fe.getSavedBitrateSettings(e);if(!Te.hasOwnProperty(e))if(Se.hasOwnProperty(e)){var n=Pe.getValue(),r=Le.getAdaptationForType(n,0,e).Representation;if(Array.isArray(r)){var i=Math.max(Math.round(r.length*Se[e])-1,0);Te[e]=r[i].bandwidth}else Te[e]=0}else isNaN(t)?Te[e]="video"===e?H:q:Te[e]=t;return Te[e]}function l(e,t){Te[e]=t}function f(e){return Se.hasOwnProperty(e)?Se[e]:null}function h(e,t){Se[e]=t}function p(e){return Te.hasOwnProperty("max")&&Te.max.hasOwnProperty(e)?Te.max[e]:NaN}function m(e){return Te.hasOwnProperty("min")&&Te.min.hasOwnProperty(e)?Te.min[e]:NaN}function _(e,t){Te.max=Te.max||{},Te.max[e]=t}function E(e,t){Te.min=Te.min||{},Te.min[e]=t}function T(e){return Se.hasOwnProperty("max")&&Se.max.hasOwnProperty(e)?Se.max[e]:1}function b(e,t){Se.max=Se.max||{},Se.max[e]=t}function A(e){return ye[e]}function I(e,t){ye[e]=t}function O(){return Ie}function C(e){Ie=e}function L(){return De}function k(e){De=e}function N(e){var t=e.getType(),n=e.getStreamInfo(),r=n.id,i=ne(t,n),o=(0,D.default)(fe).create({streamProcessor:e,currentValue:i,playbackIndex:Ne,switchHistory:Ue[t],droppedFramesHistory:Be,hasRichBuffer:J(t)});if(Be&&Be.push(Ne,xe.getPlaybackQuality()),A(t)){var s=a(t,r),u=ve.getMaxQuality(o),l=u.value;if(l>s&&(l=s),Ue[t].push({oldValue:i,newValue:l}),l>M.default.NO_CHANGE&&l!=i)(Ae[t].state===K||l>i)&&Y(t,n,i,l,s,u.reason);else if(ce.getLogToBrowserConsole()){var d=Ge.getCurrentBufferLevel(je.getReadOnlyMetricsFor(t));he("AbrController ("+t+") stay on "+i+"/"+s+" (buffer: "+d+")")}}}function B(e,t,n,r){var i=t.id,o=ne(e,t);if(null===n||isNaN(n)||n%1!=0)throw new Error("argument is not an integer");var s=a(e,i);n!==o&&n>=0&&n<=s&&Y(e,t,o,n,s,r)}function Y(e,t,n,r,i,a){if(ce.getLogToBrowserConsole()){var o=Ge.getCurrentBufferLevel(je.getReadOnlyMetricsFor(e));he("AbrController ("+e+") switch from "+n+" to "+r+"/"+i+" (buffer: "+o+")\n"+JSON.stringify(a))}re(e,t.id,r),ge.trigger(v.default.QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:t,oldQuality:n,newQuality:r,reason:a})}function z(e,t){Ae[e].state=t}function W(e){return Ae[e].state}function Q(e,t,n){if(n&&Re[e.type].getCurrentRepresentationInfo()&&Re[e.type].getCurrentRepresentationInfo().fragmentDuration){n/=1e3;var r=Re[e.type].getCurrentRepresentationInfo().fragmentDuration;if(n>r)return 0;t*=1-n/r}var i=X(e);if(!i||0===i.length)return V;for(var a=i.length-1;a>=0;a--){if(1e3*t>=i[a].bitrate)return a}return 0}function X(e){if(!e||!e.bitrateList)return null;for(var t,n=e.bitrateList,r=e.type,i=[],a=0,s=n.length;a<s;a++)t=new o.default,t.mediaType=r,t.qualityIndex=a,t.bitrate=n[a].bandwidth,t.width=n[a].width,t.height=n[a].height,i.push(t);return i}function J(e){var t=je.getReadOnlyMetricsFor(e),n=Ge.getCurrentBufferLevel(t),r=t.BufferState.length>0?t.BufferState[t.BufferState.length-1]:null,i=!1;return r&&n>r.target&&(i=n>r.target+ke.getRichBufferThreshold()),i}function Z(e,t){be[e]=t}function $(e){return be[e]}function ee(e){var t=e.type,n=e.streamInfo.id,r=e.representationCount-1;return ie(t,n,r),r}function te(e){var t=e.id,n=ne("audio",e),r=ne("video",e);return n===a("audio",t)&&r===a("video",t)}function ne(e,t){var n=t.id;return Ee[n]=Ee[n]||{},Ee[n].hasOwnProperty(e)||(Ee[n][e]=V),Ee[n][e]}function re(e,t,n){Ee[t]=Ee[t]||{},Ee[t][e]=n}function ie(e,t,n){_e[t]=_e[t]||{},_e[t][e]=n}function ae(e,t){var n=e;if(!Re[t])return n;var r=m(t);if(r){var i=Q(Re[t].getMediaInfo(),r);n=Math.max(e,i)}var a=p(t);if(a){var o=Q(Re[t].getMediaInfo(),a);n=Math.min(n,o)}return n}function oe(e,t,n){var r=T(t);return isNaN(r)||r>=1||r<0?e:Math.min(e,Math.round(n*r))}function se(e){Oe=e}function ue(){var e=xe.getElement();if(void 0!==e){var t=De&&window.hasOwnProperty("devicePixelRatio"),n=t?window.devicePixelRatio:1;Me=e.clientWidth*n,Ce=e.clientHeight*n}}function le(e,t){if("video"!==t||!Ie||!Re[t])return e;Oe||ue();var n=Pe.getValue(),r=Le.getAdaptationForType(n,0,t).Representation,i=e;if(Me>0&&Ce>0){for(;i>0&&r[i]&&Me<r[i].width&&Me-r[i-1].width<r[i].width-Me;)i-=1;r.length-2>=i&&r[i].width===r[i+1].width&&(i=Math.min(e,i+1))}return i}function de(e){var t=e.request.mediaType;if(A(t)){var n=Re[t].getScheduleController();if(!n)return;var r=(0,D.default)(fe).create({streamProcessor:Re[t],currentRequest:e.request,currentValue:ne(t,me.getActiveStreamInfo()),hasRichBuffer:J(t)}),i=ve.shouldAbandonFragment(r);if(i.value>M.default.NO_CHANGE){var a=n.getFragmentModel(),o=a.getRequests({state:c.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0];o&&(a.abortRequests(),z(t,G),Ue[t].reset(),Ue[t].push({oldValue:ne(t,me.getActiveStreamInfo()),newValue:i.value,confidence:1,reason:i.reason}),B(t,me.getActiveStreamInfo(),i.value,i.reason),ge.trigger(v.default.FRAGMENT_LOADING_ABANDONED,{streamProcessor:Re[t],request:o,mediaType:t}),clearTimeout(we),we=setTimeout(function(){z(t,K),we=null},ke.getAbandonLoadTimeout()))}}}var fe=this.context,ce=(0,j.default)(fe).getInstance(),he=ce.log,ge=(0,g.default)(fe).getInstance(),pe=void 0,ve=void 0,me=void 0,ye=void 0,_e=void 0,Ee=void 0,Te=void 0,Se=void 0,be=void 0,Re=void 0,Ae=void 0,we=void 0,Ie=void 0,De=void 0,Oe=void 0,Me=void 0,Ce=void 0,Pe=void 0,Le=void 0,xe=void 0,ke=void 0,Fe=void 0,Ne=void 0,Ue=void 0,Be=void 0,je=void 0,Ge=void 0,Ke=void 0;return pe={isPlayingAtTopQuality:te,updateTopQualityIndex:ee,getAverageThroughput:$,getBitrateList:X,getQualityForBitrate:Q,getMaxAllowedBitrateFor:p,getMinAllowedBitrateFor:m,setMaxAllowedBitrateFor:_,setMinAllowedBitrateFor:E,getMaxAllowedRepresentationRatioFor:T,setMaxAllowedRepresentationRatioFor:b,getInitialBitrateFor:s,setInitialBitrateFor:l,getInitialRepresentationRatioFor:f,setInitialRepresentationRatioFor:h,setAutoSwitchBitrateFor:I,getAutoSwitchBitrateFor:A,setLimitBitrateByPortal:C,getLimitBitrateByPortal:O,getUsePixelRatioInLimitBitrateByPortal:L,setUsePixelRatioInLimitBitrateByPortal:k,getQualityFor:ne,getAbandonmentStateFor:W,setAbandonmentStateFor:z,setPlaybackQuality:B,getPlaybackQuality:N,setAverageThroughput:Z,getTopQualityIndexFor:a,setElementSize:ue,setWindowResizeEventCalled:se,initialize:t,setConfig:r,reset:n},e(),pe}Object.defineProperty(n,"__esModule",{value:!0});var a=e(163),o=r(a),s=e(150),u=r(s),l=e(99),d=r(l),f=e(97),c=r(f),h=e(9),g=r(h),p=e(13),v=r(p),m=e(53),y=r(m),_=e(10),E=r(_),T=e(98),S=r(T),b=e(22),R=r(b),A=e(102),w=r(A),I=e(127),D=r(I),O=e(128),M=r(O),C=e(129),P=r(C),L=e(126),x=r(L),k=e(100),F=r(k),N=e(17),U=r(N),B=e(8),j=r(B),G="abandonload",K="allowload",H=1e3,q=100,V=0;i.__dashjs_factory_name="AbrController";var Y=E.default.getSingletonFactory(i);Y.ABANDON_LOAD=G,Y.QUALITY_DEFAULT=V,n.default=Y,t.exports=n.default},{10:10,100:100,102:102,126:126,127:127,128:128,129:129,13:13,150:150,163:163,17:17,22:22,53:53,8:8,9:9,97:97,98:98,99:99}],60:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){g.invalidateSelectedIndexes(e.entry)}function t(e){e.baseURLTreeModel&&(g=e.baseURLTreeModel),e.baseURLSelector&&(p=e.baseURLSelector)}function n(e){g.update(e),p.chooseSelectorFromManifest(e)}function r(e){var t=g.getForPath(e),n=t.reduce(function(e,t){var n=p.select(t);return n?(h.isRelative(n.url)?e.url=h.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e):new c.default},new c.default);if(!h.isRelative(n.url))return n}function i(){g.reset(),p.reset()}function a(e){n(e)}var s=void 0,l=this.context,f=(0,v.default)(l).getInstance(),h=(0,d.default)(l).getInstance(),g=void 0,p=void 0;return s={reset:i,initialize:a,resolve:r,setConfig:t},function(){g=(0,o.default)(l).create(),p=(0,u.default)(l).create(),f.on(y.default.SERVICE_LOCATION_BLACKLIST_CHANGED,e,s)}(),s}Object.defineProperty(n,"__esModule",{value:!0});var a=e(96),o=r(a),s=e(146),u=r(s),l=e(159),d=r(l),f=e(41),c=r(f),h=e(10),g=r(h),p=e(9),v=r(p),m=e(13),y=r(m);i.__dashjs_factory_name="BaseURLController",n.default=g.default.getSingletonFactory(i),t.exports=n.default},{10:10,13:13,146:146,159:159,41:41,9:9,96:96}],61:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){return!!(a.length&&e&&e.length)&&-1!==a.indexOf(e)}function n(e){-1===a.indexOf(e)&&(a.push(e),o.trigger(s,{entry:e}))}function r(e){e.error&&n(e.request.serviceLocation)}function i(){a=[]}var a=[],o=(0,u.default)(this.context).getInstance(),s=e.updateEventName,l=e.loadFailedEventName;return function(){l&&o.on(l,r,this)}(),{add:n,contains:t,reset:i}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(9),u=r(s);i.__dashjs_factory_name="BlackListController",n.default=o.default.getClassFactory(i),t.exports=n.default},{10:10,9:9}],62:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){Ee=e,J(t),Me=n,Le=(0,u.default)(te).getInstance(),Oe=(0,g.default)(te).getInstance(),Ce=(0,c.default)(te).getInstance(),xe=(0,D.default)(te).getInstance(),Pe=Me.getScheduleController(),he=Ce.getQualityFor(Ee,Me.getStreamInfo()),re.on(E.default.DATA_UPDATE_COMPLETED,B,this),re.on(E.default.INIT_FRAGMENT_LOADED,i,this),re.on(E.default.MEDIA_FRAGMENT_LOADED,s,this),re.on(E.default.QUALITY_CHANGE_REQUESTED,h,this),re.on(E.default.STREAM_COMPLETED,j,this),re.on(E.default.PLAYBACK_PROGRESS,m,this),re.on(E.default.PLAYBACK_TIME_UPDATED,m,this),re.on(E.default.PLAYBACK_RATE_CHANGED,H,this),re.on(E.default.PLAYBACK_SEEKING,p,this),re.on(E.default.WALLCLOCK_TIME_UPDATED,K,this),re.on(E.default.CURRENT_TRACK_CHANGED,G,this,y.default.EVENT_PRIORITY_HIGH),re.on(E.default.SOURCEBUFFER_APPEND_COMPLETED,f,this),re.on(E.default.SOURCEBUFFER_REMOVE_COMPLETED,N,this)}function n(e){if(!e||!me||!Me)return null;var t=null;try{(t=oe.createSourceBuffer(me,e))&&t.hasOwnProperty("initialize")&&t.initialize(Ee,this)}catch(e){se.mediaSourceError("Error creating "+Ee+" source buffer.")}return W(t),U(Me.getRepresentationInfoForQuality(he).MSETimeOffset),t}function r(){return!(!Me||!ue)&&Me.getStreamInfo().id===ue.getActiveStreamInfo().id}function i(e){e.fragmentModel===Me.getFragmentModel()&&(ne("Init fragment finished loading saving to",Ee+"'s init cache"),xe.save(e.chunk),l(e.chunk))}function a(e,t){var n=xe.extract(e,t);n?l(n):re.trigger(E.default.INIT_REQUESTED,{sender:ce})}function s(e){if(e.fragmentModel===Me.getFragmentModel()){var t=e.chunk,n=t.bytes,r=t.quality,i=Me.getRepresentationInfoForQuality(r),a=ae.getValue(),s=de.getEventsFor(a,i.mediaInfo,Me),u=de.getEventsFor(a,i,Me);if(s&&s.length>0||u&&u.length>0){var d=Me.getFragmentModel().getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,quality:r,index:t.index})[0],f=I(n,d,s,u);Me.getEventController().addInbandEvents(f)}t.bytes=P(n),l(t)}}function l(e){we=!0,be=e,oe.append(Te,e),"video"===e.mediaInfo.type&&re.trigger(E.default.VIDEO_CHUNK_RECEIVED,{chunk:e})}function f(e){if(Te===e.buffer){if(e.error||!L())return e.error.code===d.default.QUOTA_EXCEEDED_ERROR_CODE&&(ve=.8*oe.getTotalBufferedTime(Te)),void(e.error.code!==d.default.QUOTA_EXCEEDED_ERROR_CODE&&L()||(re.trigger(E.default.QUOTA_EXCEEDED,{sender:ce,criticalBufferLevel:ve}),F(k())));be&&!isNaN(be.index)&&(ye=Math.max(be.index,ye),b());var t=oe.getAllRanges(Te);if(t&&t.length>0)for(var n=0,r=t.length;n<r;n++)ne("Buffered Range for type:",Ee,":",t.start(n)," - ",t.end(n));m(),we=!1,be&&re.trigger(E.default.BYTES_APPENDED,{sender:ce,quality:be.quality,startTime:be.start,
index:be.index,bufferedRanges:t})}}function h(e){he!==e.newQuality&&Ee===e.mediaType&&Me.getStreamInfo().id===e.streamInfo.id&&(U(Me.getRepresentationInfoForQuality(e.newQuality).MSETimeOffset),he=e.newQuality)}function p(){_e=Number.POSITIVE_INFINITY,ge=!1,m()}function m(){_(),T()}function _(){Oe&&(pe=oe.getBufferLength(Te,Oe.getTime()),re.trigger(E.default.BUFFER_LEVEL_UPDATED,{sender:ce,bufferLevel:pe}),R())}function T(){r()&&(ie.addBufferState(Ee,Se,Pe.getBufferTarget()),ie.addBufferLevel(Ee,new Date,1e3*pe))}function b(){ye>=_e-1&&!ge&&(ge=!0,re.trigger(E.default.BUFFERING_COMPLETED,{sender:ce,streamInfo:Me.getStreamInfo()}))}function R(){A(pe<C&&!ge?M:O)}function A(e){Se===e||"fragmentedText"===Ee&&fe.getAllTracksAreDisabled()||(Se=e,T(),re.trigger(E.default.BUFFER_LEVEL_STATE_CHANGED,{sender:ce,state:e,mediaType:Ee,streamInfo:Me.getStreamInfo()}),re.trigger(e===O?E.default.BUFFER_LOADED:E.default.BUFFER_EMPTY,{mediaType:Ee}),ne(e===O?"Got enough buffer to start.":"Waiting for more buffer before starting playback."))}function I(e,t,n,r){var i=Math.max(isNaN(t.startTime)?0:t.startTime,0),a=[],o=[];De=!1;for(var s=n.concat(r),u=0,l=s.length;u<l;u++)a[s[u].schemeIdUri]=s[u];for(var d=(0,S.default)(te).getInstance().parse(e),f=d.getBoxes("emsg"),u=0,l=f.length;u<l;u++){var c=de.getEvent(f[u],a,i);c&&o.push(c)}return o}function P(e){if(!De)return e;for(var t=e.length,n=Math.pow(256,2),r=Math.pow(256,3),i=new Uint8Array(e.length),a=0,o=0;a<t;){var s=String.fromCharCode(e[a+4],e[a+5],e[a+6],e[a+7]),u=e[a]*r+e[a+1]*n+256*e[a+2]+1*e[a+3];if("emsg"!=s)for(var l=a;l<a+u;l++)i[o]=e[l],o++;a+=u}return i.subarray(0,o)}function L(){return oe.getTotalBufferedTime(Te)<ve}function x(){if(Te&&"fragmentedText"!==Ee){var e=Te.buffered.length?Te.buffered.start(0):0,t=Oe.getTime()-e-Le.getBufferToKeep();t>0&&(ne("pruning buffer: "+t+" seconds."),Ie=!0,oe.remove(Te,0,Math.round(e+t),me))}}function k(e){if(!Te)return null;var t=Oe.getTime(),n=Me.getFragmentModel().getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,time:t,threshold:e})[0],r=oe.getBufferRange(Te,t),i=n&&!isNaN(n.startTime)?n.startTime:Math.floor(t);return null===r&&Te.buffered.length>0&&(i=Te.buffered.end(Te.buffered.length-1)),{start:Te.buffered.start(0),end:i}}function F(e){e&&Te&&oe.remove(Te,e.start,e.end,me)}function N(e){Te===e.buffer&&(Ie&&(Ie=!1),_(),re.trigger(E.default.BUFFER_CLEARED,{sender:ce,from:e.from,to:e.to,hasEnoughSpaceToAppend:L()}))}function U(e){Te&&Te.timestampOffset!==e&&!isNaN(e)&&(Te.timestampOffset=e)}function B(e){e.sender.getStreamProcessor()!==Me||e.error||U(e.currentRepresentation.MSETimeOffset)}function j(e){e.fragmentModel===Me.getFragmentModel()&&(_e=e.request.index,b())}function G(e){Te&&e.newMediaInfo.type===Ee&&e.newMediaInfo.streamInfo.id===Me.getStreamInfo().id&&le.getSwitchMode(Ee)===v.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&F(k(0))}function K(){++Re*(Le.getWallclockTimeUpdateInterval()/1e3)>=Le.getBufferPruningInterval()&&!we&&(Re=0,x())}function H(){R()}function q(){return Ee}function V(){return Me}function Y(e){Me=e}function z(){return Te}function W(e){Te=e}function Q(){return pe}function X(){return ve}function J(e){me=e}function Z(){return me}function $(){return ge}function ee(e){re.off(E.default.DATA_UPDATE_COMPLETED,B,this),re.off(E.default.QUALITY_CHANGE_REQUESTED,h,this),re.off(E.default.INIT_FRAGMENT_LOADED,i,this),re.off(E.default.MEDIA_FRAGMENT_LOADED,s,this),re.off(E.default.STREAM_COMPLETED,j,this),re.off(E.default.CURRENT_TRACK_CHANGED,G,this),re.off(E.default.PLAYBACK_PROGRESS,m,this),re.off(E.default.PLAYBACK_TIME_UPDATED,m,this),re.off(E.default.PLAYBACK_RATE_CHANGED,H,this),re.off(E.default.PLAYBACK_SEEKING,p,this),re.off(E.default.WALLCLOCK_TIME_UPDATED,K,this),re.off(E.default.SOURCEBUFFER_APPEND_COMPLETED,f,this),re.off(E.default.SOURCEBUFFER_REMOVE_COMPLETED,N,this),ve=Number.POSITIVE_INFINITY,Se=M,he=c.default.QUALITY_DEFAULT,_e=Number.POSITIVE_INFINITY,ye=0,be=null,Ae=!1,ge=!1,we=!1,Ie=!1,Oe=null,Me=null,Ce=null,Pe=null,e||(oe.abort(me,Te),oe.removeSourceBuffer(me,Te)),Te=null}var te=this.context,ne=(0,w.default)(te).getInstance().log,re=(0,y.default)(te).getInstance(),ie=e.metricsModel,ae=e.manifestModel,oe=e.sourceBufferController,se=e.errHandler,ue=e.streamController,le=e.mediaController,de=e.adapter,fe=e.textController,ce=void 0,he=void 0,ge=void 0,pe=void 0,ve=void 0,me=void 0,ye=void 0,_e=void 0,Ee=void 0,Te=void 0,Se=void 0,be=void 0,Re=void 0,Ae=void 0,we=void 0,Ie=void 0,De=void 0,Oe=void 0,Me=void 0,Ce=void 0,Pe=void 0,Le=void 0,xe=void 0;return ce={initialize:t,createBuffer:n,getType:q,getStreamProcessor:V,setStreamProcessor:Y,getBuffer:z,setBuffer:W,getBufferLevel:Q,getCriticalBufferLevel:X,setMediaSource:J,getMediaSource:Z,getIsBufferingCompleted:$,switchInitData:a,reset:ee},function(){he=c.default.QUALITY_DEFAULT,ge=!1,pe=0,ve=Number.POSITIVE_INFINITY,ye=0,_e=Number.POSITIVE_INFINITY,Te=null,Se=M,Re=0,Ae=!1,we=!1,Ie=!1,De=!1}(),ce}Object.defineProperty(n,"__esModule",{value:!0});var a=e(97),o=r(a),s=e(99),u=r(s),l=e(69),d=r(l),f=e(59),c=r(f),h=e(67),g=r(h),p=e(65),v=r(p),m=e(9),y=r(m),_=e(13),E=r(_),T=e(147),S=r(T),b=e(10),R=r(b),A=e(8),w=r(A),I=e(153),D=r(I),O="bufferLoaded",M="bufferStalled",C=.5;i.__dashjs_factory_name="BufferController";var P=R.default.getClassFactory(i);P.BUFFER_LOADED=O,P.BUFFER_EMPTY=M,n.default=P,t.exports=n.default},{10:10,13:13,147:147,153:153,59:59,65:65,67:67,69:69,8:8,9:9,97:97,99:99}],63:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){D=!1,_={},E={},T={},S=null,b=100,R=b/1e3,I=(0,o.default)(v).getInstance()}function t(){null!==S&&D&&(clearInterval(S),S=null,D=!1)}function n(){m("Start Event Controller"),D||isNaN(b)||(D=!0,S=setInterval(s,b))}function r(e){if(_={},e)for(var t=0;t<e.length;t++){var n=e[t];_[n.id]=n,m("Add inline event with id "+n.id)}m("Added "+e.length+" inline events")}function i(e){for(var t=0;t<e.length;t++){var n=e[t];n.id in E?m("Repeated event with id "+n.id):(E[n.id]=n,m("Add inband event with id "+n.id))}}function a(){if(T)for(var e=I.getTime(),t=Object.keys(T),n=0;n<t.length;n++){var r=t[n],i=T[r];null!==i&&(i.duration+i.presentationTime)/i.eventStream.timescale<e&&(m("Remove Event "+r+" at time "+e),i=null,delete T[r])}}function s(){l(E),l(_),a()}function u(){var e=A.getValue(),t=e.url;e.hasOwnProperty("Location")&&(t=e.Location),m("Refresh manifest @ "+t),w.getManifestLoader().load(t)}function l(e){var t,n=I.getTime();if(e)for(var r=Object.keys(e),i=0;i<r.length;i++){var a=r[i],o=e[a];void 0!==o&&(0===(t=o.presentationTime/o.eventStream.timescale)||t<=n&&t+R>n)&&(m("Start Event "+a+" at "+n),o.duration>0&&(T[a]=o),o.eventStream.schemeIdUri==g&&o.eventStream.value==p?u():y.trigger(o.eventStream.schemeIdUri,{event:o}),delete e[a])}}function f(e){e&&(e.manifestModel&&(A=e.manifestModel),e.manifestUpdater&&(w=e.manifestUpdater))}function h(){t(),_=null,E=null,T=null,I=null}var g="urn:mpeg:dash:event:2012",p=1,v=this.context,m=(0,d.default)(v).getInstance().log,y=(0,c.default)(v).getInstance(),_=void 0,E=void 0,T=void 0,S=void 0,b=void 0,R=void 0,A=void 0,w=void 0,I=void 0,D=void 0;return{initialize:e,addInlineEvents:r,addInbandEvents:i,clear:t,start:n,setConfig:f,reset:h}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(67),o=r(a),s=e(10),u=r(s),l=e(8),d=r(l),f=e(9),c=r(f);i.__dashjs_factory_name="EventController",n.default=u.default.getSingletonFactory(i),t.exports=n.default},{10:10,67:67,8:8,9:9}],64:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var t=g[e];return t||(t=(0,l.default)(o).create({metricsModel:(0,f.default)(o).getInstance()}),g[e]=t),t}function t(e){return e&&e.type&&e.type===a.HTTPRequest.INIT_SEGMENT_TYPE}function n(){d.off(p.default.FRAGMENT_LOADING_COMPLETED,i,this);for(var e in g)g[e].reset();g={}}function r(e,t,n){var r=new s.default;return r.streamId=n,r.mediaInfo=t.mediaInfo,r.segmentType=t.type,r.start=t.startTime,r.duration=t.duration,r.end=r.start+r.duration,r.bytes=e,r.index=t.index,r.quality=t.quality,r.representationId=t.representationId,r}function i(e){if(g[e.request.mediaType]===e.sender){var n=e.request,i=e.response,a=t(n),o=n.mediaInfo.streamInfo;if(!i||!o)return void u("No "+n.mediaType+" bytes to push or stream is inactive.");var s=r(i,n,o.id);d.trigger(a?p.default.INIT_FRAGMENT_LOADED:p.default.MEDIA_FRAGMENT_LOADED,{chunk:s,fragmentModel:e.sender})}}var o=this.context,u=(0,_.default)(o).getInstance().log,d=(0,h.default)(o).getInstance(),c=void 0,g=void 0;return c={getModel:e,isInitializationRequest:t,reset:n},function(){g={},d.on(p.default.FRAGMENT_LOADING_COMPLETED,i,c)}(),c}Object.defineProperty(n,"__esModule",{value:!0});var a=e(182),o=e(164),s=r(o),u=e(97),l=r(u),d=e(100),f=r(d),c=e(9),h=r(c),g=e(13),p=r(g),v=e(10),m=r(v),y=e(8),_=r(y);i.__dashjs_factory_name="FragmentController",n.default=m.default.getClassFactory(i),t.exports=n.default},{10:10,100:100,13:13,164:164,182:182,8:8,9:9,97:97}],65:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){U={},M(),O()}function t(e,t){var n=d(e),i=r(e,t),a=[];return"fragmentedText"===e?void s(i[0]):(n||(n=N.getSavedMediaSettings(e),l(e,n)),void(i&&0!==i.length&&(n&&i.forEach(function(e){D(n,e)&&a.push(e)}),s(0===a.length?C(i):a.length>1?C(a):a[0]))))}function n(e){var t=e?e.type:null,n=e?e.streamInfo.id:null,r=d(t);return!(!e||!b(t)||(U[n]=U[n]||P(),U[n][t].list.indexOf(e)>=0||(U[n][t].list.push(e),r&&D(r,e)&&!i(t,e.streamInfo)&&s(e),0)))}function r(e,t){if(!e||!t)return[];var n=t.id;return U[n]&&U[n][e]?U[n][e].list:[]}function i(e,t){return!e||!t||t&&!U[t.id]?null:U[t.id][e].current}function a(e){var t=e.type,n=e.streamInfo.id;return U[n]&&U[n][t]&&R(U[n][t].current,e)}function s(e){if(e){var t=e.type,n=e.streamInfo,r=n.id,a=i(t,n);if(U[r]&&U[r][t]&&(!a||!R(e,a))){U[r][t].current=e,a&&k.trigger(o.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:a,newMediaInfo:e,switchMode:G[t]});var s=I(e);s&&U[r][t].storeLastSettings&&(s.roles&&(s.role=s.roles[0],delete s.roles),s.accessibility&&(s.accessibility=s.accessibility[0]),s.audioChannelConfiguration&&(s.audioChannelConfiguration=s.audioChannelConfiguration[0]),N.setSavedMediaSettings(t,s))}}}function l(e,t){e&&t&&(B[e]=t)}function d(e){return e?B[e]:null}function f(e,t){return-1!==H.indexOf(t)?void(G[e]=t):void x("track switch mode is not supported: "+t)}function h(e){return G[e]}function p(e){return-1!==q.indexOf(e)?void(j=e):void x("track selection mode is not supported: "+e)}function S(){return j||T}function b(e){return"audio"===e||"video"===e||"text"===e||"fragmentedText"===e}function R(e,t){var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,a=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),s=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&a&&o&&s}function A(e){e&&e.errHandler&&(K=e.errHandler)}function w(){e(),F.reset()}function I(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration};return t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0?t:null}function D(e,t){var n=!e.lang||e.lang===t.lang,r=!e.viewpoint||e.viewpoint===t.viewpoint,i=!e.role||!!t.roles.filter(function(t){return t===e.role})[0],a=!e.accessibility||!!t.accessibility.filter(function(t){return t===e.accessibility})[0],o=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return t===e.audioChannelConfiguration})[0];return n&&r&&i&&a&&o}function O(){G={audio:y,video:m}}function M(){B={audio:null,video:null}}function C(e){var t=S(),n=[],r=function(e){var t,n=0,r=[];return e.forEach(function(e){t=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),t>n?(n=t,r=[e]):t===n&&r.push(e)}),r},i=function(e){var t,n=0,r=[];return e.forEach(function(e){t=e.representationCount,t>n?(n=t,r=[e]):t===n&&r.push(e)}),r};switch(t){case _:n=r(e),n.length>1&&(n=i(n));break;case E:n=i(e),n.length>1&&(n=r(e));break;default:x("track selection mode is not supported: "+t)}return n[0]}function P(){return{audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null}}}var L=this.context,x=(0,c.default)(L).getInstance().log,k=(0,u.default)(L).getInstance(),F=(0,g.default)(L).getInstance(),N=(0,v.default)(L).getInstance(),U=void 0,B=void 0,j=void 0,G=void 0,K=void 0,H=[y,m],q=[_,E];return{initialize:e,checkInitialMediaSettingsForType:t,addTrack:n,getTracksFor:r,getCurrentTrackFor:i,isCurrentTrack:a,setTrack:s,setInitialSettings:l,getInitialSettings:d,setSwitchMode:f,getSwitchMode:h,setSelectionModeForInitialTrack:p,getSelectionModeForInitialTrack:S,isMultiTrackSupportedByType:b,isTracksEqual:R,setConfig:A,reset:w}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(13),o=r(a),s=e(9),u=r(s),l=e(10),d=r(l),f=e(8),c=r(f),h=e(143),g=r(h),p=e(150),v=r(p),m="neverReplace",y="alwaysReplace",_="highestBitrate",E="widestRange",T=_;i.__dashjs_factory_name="MediaController";var S=d.default.getSingletonFactory(i);S.TRACK_SWITCH_MODE_NEVER_REPLACE=m,S.TRACK_SWITCH_MODE_ALWAYS_REPLACE=y,S.TRACK_SELECTION_MODE_HIGHEST_BITRATE=_,S.TRACK_SELECTION_MODE_WIDEST_RANGE=E,S.DEFAULT_INIT_TRACK_SELECTION_MODE=T,n.default=S,t.exports=n.default},{10:10,13:13,143:143,150:150,8:8,9:9}],66:[function(e,t,n){function r(){function e(){var e="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null}function t(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n}function n(e){e.setSource(null)}function r(e,t){return e.duration!=t&&(e.duration=t),e.duration}function i(e){var t=e.sourceBuffers,n=t.length,r=0;if("open"===e.readyState){for(r;r<n;r++){if(t[r].updating)return;if(0===t[r].buffered.length)return}e.endOfStream()}}return{createMediaSource:e,attachMediaSource:t,detachMediaSource:n,setDuration:r,signalEndOfStream:i}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="MediaSourceController",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{10:10}],67:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){de=0,fe=NaN,ce=null,pe=null,me=!1,he={},ve=(0,d.default)(J).getInstance()}function t(e){ge=e,te=le.getElement(),Q(),pe=ge.manifestInfo.isDynamic,fe=ge.start,$.on(g.default.DATA_UPDATE_COMPLETED,L,this),$.on(g.default.BYTES_APPENDED,z,this),$.on(g.default.BUFFER_LEVEL_STATE_CHANGED,W,this),$.on(g.default.PERIOD_SWITCH_STARTED,n,this),me&&(me=!1,s())}function n(e){!pe&&e.fromStreamInfo&&he[e.fromStreamInfo.id]&&delete he[e.fromStreamInfo.id]}function r(){var e=I(!0),t=pe?e-ge.start:0;return e+(ge.duration-t)-v()}function i(){return v()>0}function a(){return ge.id}function s(){if(te){te.autoplay=!0;var e=te.play();e&&"undefined"!=typeof Promise&&e instanceof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&$.trigger(g.default.PLAYBACK_NOT_ALLOWED),Z("Caught pending play exception - continuing ("+e+")")})}else me=!0}function l(){if(te)return te.paused}function f(){te&&(te.pause(),te.autoplay=!1)}function h(){if(te)return te.seeking}function p(e){le&&(Z("Requesting seek to time: "+e),le.setCurrentTime(e))}function v(){if(te)return te.currentTime}function m(){if(te)return te.playbackRate}function _(){if(te)return te.played}function E(){if(te)return te.ended}function T(){return pe}function S(e){fe=e}function b(){return fe}function R(e,t){var n=se.getMpd(oe.getValue()),r=void 0;r=ve.getUseSuggestedPresentationDelay()&&n.hasOwnProperty("suggestedPresentationDelay")?n.suggestedPresentationDelay:ve.getLiveDelay()?ve.getLiveDelay():isNaN(e)?2*ge.manifestInfo.minBufferTime:e*ve.getLiveDelayFragmentCount();var i=Math.max(t-10,t/2);return Math.min(r,i)}function A(){le&&te&&($.off(g.default.DATA_UPDATE_COMPLETED,L,this),$.off(g.default.BUFFER_LEVEL_STATE_CHANGED,W,this),$.off(g.default.BYTES_APPENDED,z,this),M(),X()),le=null,ge=null,te=null,pe=null,e()}function w(e){e&&(e.streamController&&(ne=e.streamController),e.timelineConverter&&(re=e.timelineConverter),e.metricsModel&&(ie=e.metricsModel),e.dashMetrics&&(ae=e.dashMetrics),e.manifestModel&&(oe=e.manifestModel),e.dashManifestModel&&(se=e.dashManifestModel),e.adapter&&(ue=e.adapter),e.videoModel&&(le=e.videoModel))}function I(e){var t=void 0,n=(0,u.default)(J).getInstance().getURIFragmentData(),r=parseInt(n.s,10),i=parseInt(n.t,10),a=NaN;if(e||(a=isNaN(r)?i:r),pe)!isNaN(a)&&a>1262304e3&&((t=a-ge.manifestInfo.availableFrom.getTime()/1e3)>fe||t<fe-ge.manifestInfo.DVRWindowSize)&&(t=null),t=t||fe;else if(!isNaN(a)&&a<Math.max(ge.manifestInfo.duration,ge.duration)&&a>=0)t=a;else{var o=he[ge.id];void 0===o&&(o=ne.getActiveStreamCommonEarliestTime()),t=Math.max(o,ge.start)}return t}function D(e){var t,n=ie.getReadOnlyMetricsFor("video")||ie.getReadOnlyMetricsFor("audio"),r=ae.getCurrentDVRInfo(n),i=r?r.range:null;if(!i)return NaN;if(e>i.end)t=Math.max(i.end-2*ge.manifestInfo.minBufferTime,i.start);else{if(!(e<i.start))return e;t=i.start}return t}function O(){if(null===ce){var e=function(){Y()};ce=setInterval(e,ve.getWallclockTimeUpdateInterval())}}function M(){clearInterval(ce),ce=null}function C(){var e=I(!1);e>0&&(p(e),Z("Starting playback at offset: "+e))}function P(){if(!l()&&pe&&0!==te.readyState){var e=v(),t=D(e);!isNaN(t)&&t!==e&&p(t)}}function L(e){if(!e.error){var t=ue.convertDataToTrack(oe.getValue(),e.currentRepresentation),n=t.mediaInfo.streamInfo;ge.id===n.id&&(ge=n,P())}}function x(){$.trigger(g.default.CAN_PLAY)}function k(){Z("Native video element event: play"),P(),O(),$.trigger(g.default.PLAYBACK_STARTED,{startTime:v()})}function F(){Z("Native video element event: playing"),$.trigger(g.default.PLAYBACK_PLAYING,{playingTime:v()})}function N(){Z("Native video element event: pause"),$.trigger(g.default.PLAYBACK_PAUSED,{ended:E()})}function U(){var e=v();Z("Seeking to: "+e),O(),$.trigger(g.default.PLAYBACK_SEEKING,{seekTime:e})}function B(){Z("Native video element event: seeked"),$.trigger(g.default.PLAYBACK_SEEKED)}function j(){var e=v();e!==de&&(de=e,$.trigger(g.default.PLAYBACK_TIME_UPDATED,{timeToEnd:r(),time:e}))}function G(){$.trigger(g.default.PLAYBACK_PROGRESS)}function K(){var e=m();Z("Native video element event: ratechange: ",e),$.trigger(g.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function H(){Z("Native video element event: loadedmetadata"),(!pe&&ge.isFirst||re.isTimeSyncCompleted())&&C(),$.trigger(g.default.PLAYBACK_METADATA_LOADED),O()}function q(){Z("Native video element event: ended"),f(),M(),$.trigger(g.default.PLAYBACK_ENDED)}function V(e){var t=e.target||e.srcElement;$.trigger(g.default.PLAYBACK_ERROR,{error:t.error})}function Y(){$.trigger(g.default.WALLCLOCK_TIME_UPDATED,{isDynamic:pe,time:new Date})}function z(e){var t=e.bufferedRanges;if(t&&t.length){var n=Math.max(t.start(0),ge.start),r=void 0===he[ge.id]?n:Math.max(he[ge.id],n);r!==he[ge.id]&&(!pe&&I(!0)<r&&v()<r&&p(r),he[ge.id]=r)}}function W(e){e.streamInfo.id===ge.id&&le.setStallState(e.mediaType,e.state===o.default.BUFFER_EMPTY)}function Q(){te.addEventListener("canplay",x),te.addEventListener("play",k),te.addEventListener("playing",F),te.addEventListener("pause",N),te.addEventListener("error",V),te.addEventListener("seeking",U),te.addEventListener("seeked",B),te.addEventListener("timeupdate",j),te.addEventListener("progress",G),te.addEventListener("ratechange",K),te.addEventListener("loadedmetadata",H),te.addEventListener("ended",q)}function X(){te.removeEventListener("canplay",x),te.removeEventListener("play",k),te.removeEventListener("playing",F),te.removeEventListener("pause",N),te.removeEventListener("error",V),te.removeEventListener("seeking",U),te.removeEventListener("seeked",B),te.removeEventListener("timeupdate",j),te.removeEventListener("progress",G),te.removeEventListener("ratechange",K),te.removeEventListener("loadedmetadata",H),te.removeEventListener("ended",q)}var J=this.context,Z=(0,y.default)(J).getInstance().log,$=(0,c.default)(J).getInstance(),ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,he=void 0,ge=void 0,pe=void 0,ve=void 0,me=void 0;return ee={initialize:t,setConfig:w,getStreamStartTime:I,getTimeToStreamEnd:r,isPlaybackStarted:i,getStreamId:a,getTime:v,getPlaybackRate:m,getPlayedRanges:_,getEnded:E,getIsDynamic:T,setLiveStartTime:S,getLiveStartTime:b,computeLiveDelay:R,play:s,isPaused:l,pause:f,isSeeking:h,seek:p,reset:A},e(),ee}Object.defineProperty(n,"__esModule",{value:!0});var a=e(62),o=r(a),s=e(101),u=r(s),l=e(99),d=r(l),f=e(9),c=r(f),h=e(13),g=r(h),p=e(10),v=r(p),m=e(8),y=r(m);i.__dashjs_factory_name="PlaybackController",n.default=v.default.getSingletonFactory(i),t.exports=n.default},{10:10,101:101,13:13,62:62,8:8,9:9,99:99}],68:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){ge=e,Me=t,Ie=(0,s.default)(re).getInstance(),De=(0,h.default)(re).getInstance(),Oe=(0,l.default)(re).getInstance(),Ce=(0,L.default)(re).getInstance(),Pe=Me.getFragmentController(),Le=Me.getBufferController(),pe=Pe.getModel(ge),ve=Me.isDynamic(),Fe=ce.getScheduleWhilePaused(),xe=(0,p.default)(re).create({dashMetrics:le,metricsModel:oe,textController:(0,_.default)(re).getInstance()}),ke=(0,m.default)(re).create({adapter:ue,sourceBufferController:(0,b.default)(re).getInstance(),textController:(0,_.default)(re).getInstance()}),de.getIsTextTrack(ge)&&ae.on(O.default.TIMED_TEXT_REQUESTED,G,this),ae.on(O.default.QUALITY_CHANGE_REQUESTED,y,this),ae.on(O.default.DATA_UPDATE_STARTED,F,this),ae.on(O.default.DATA_UPDATE_COMPLETED,S,this),ae.on(O.default.FRAGMENT_LOADING_COMPLETED,M,this),ae.on(O.default.STREAM_COMPLETED,D,this),ae.on(O.default.STREAM_INITIALIZED,R,this),ae.on(O.default.BUFFER_LEVEL_STATE_CHANGED,U,this),ae.on(O.default.BUFFER_CLEARED,N,this),ae.on(O.default.BYTES_APPENDED,P,this),ae.on(O.default.INIT_REQUESTED,c,this),ae.on(O.default.QUOTA_EXCEEDED,B,this),ae.on(O.default.PLAYBACK_SEEKING,H,this),ae.on(O.default.PLAYBACK_STARTED,K,this),ae.on(O.default.PLAYBACK_RATE_CHANGED,q,this),ae.on(O.default.PLAYBACK_TIME_UPDATED,C,this),ae.on(O.default.URL_RESOLUTION_FAILED,j,this),ae.on(O.default.FRAGMENT_LOADING_ABANDONED,x,this)}function n(){me&&!Le.getIsBufferingCompleted()&&(te(),_e=!1,ye&&(ye=!1),d(0),ie("Schedule controller starting for "+ge))}function r(){_e||(_e=!0,clearTimeout(Ae),ie("Schedule controller stopping for "+ge))}function i(e,t){Ue[t]=Ue[t]||{};var n=Oe.getTopQualityIndexFor(e,t);return Ue[t][e]!=n&&(ie("Top quality"+e+" index has changed from "+Ue[t][e]+" to "+n),Ue[t][e]=n,!0)}function o(){if(!(_e||be||!Le||Ie.isPaused()&&!Fe)){u();var e=je.length>0;if(e||i(me.mediaInfo.type,Me.getStreamInfo().id)||xe.execute(Me,ge,Ce.isVideoTrackPresent())){var t=function(){if(me.quality!==Be)Be=me.quality,Le.switchInitData(Me.getStreamInfo().id,me.id);else{var e=je.shift();if(Pe.isInitializationRequest(e))Le.switchInitData(e.mediaInfo.streamInfo.id,e.representationId);else{var t=ke.execute(Me,e);t?pe.executeRequest(t):(be=!1,d(500))}}};be=!0,e?t():(Oe.getPlaybackQuality(Me),t())}else d(500)}}function u(){var e=1.5*me.fragmentDuration,t=pe.getRequests({state:T.default.FRAGMENT_MODEL_EXECUTED,time:Ie.getTime()+e,threshold:0})[0];t&&-1===je.indexOf(t)&&!de.getIsTextTrack(ge)&&(!De.isCurrentTrack(t.mediaInfo)||ce.getFastSwitchEnabled()&&t.quality<me.quality&&Le.getBufferLevel()>=e&&Oe.getAbandonmentStateFor(ge)!==l.default.ABANDON_LOAD?(v(t),ie("Reloading outdated fragment at index: ",t.index)):t.quality>me.quality&&Y(Ie.getTime()+Le.getBufferLevel()))}function d(e){clearTimeout(Ae),Ae=setTimeout(o,e)}function c(e){e.sender&&e.sender.getStreamProcessor()===Me&&g(me.quality)}function g(e){Be=e;var t=ue.getInitRequest(Me,e);t&&(be=!0,pe.executeRequest(t))}function v(e){je.push(e)}function y(e){if(ge===e.mediaType&&Me.getStreamInfo().id===e.streamInfo.id){if(null===(me=Me.getRepresentationInfoForQuality(e.newQuality))||void 0===me)throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");ee(new Date,a.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),te()}}function E(e){if(Ie){var t=pe.getRequests({state:T.default.FRAGMENT_MODEL_EXECUTED,time:Ie.getTime(),threshold:0})[0];t&&Ie.getTime()>=t.startTime&&(t.quality!==Ne&&e&&ae.trigger(O.default.QUALITY_CHANGE_RENDERED,{mediaType:ge,oldQuality:Ne,newQuality:t.quality}),Ne=t.quality)}}function S(e){e.error||e.sender.getStreamProcessor()!==Me||(me=ue.convertDataToTrack(se.getValue(),e.currentRepresentation))}function R(e){e.error||Me.getStreamInfo().id!==e.streamInfo.id||(me=Me.getCurrentRepresentationInfo(),ve&&ye&&(fe.setTimeSyncCompleted(!0),w()),_e&&n())}function w(){var e=(0,A.default)(re).getInstance().getLiveEdge(),t=me.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,n=e-Ie.computeLiveDelay(me.fragmentDuration,t),r=ue.getFragmentRequestForTime(Me,me,n,{ignoreIsFinished:!0});we=Ie.getLiveStartTime(),(isNaN(we)||r.startTime>we)&&(Ie.setLiveStartTime(r.startTime),we=r.startTime);var i=le.getCurrentManifestUpdate(oe.getMetricsFor("stream"));oe.updateManifestUpdateInfo(i,{currentTime:we,presentationStartTime:e,latency:e-we,clientTimeOffset:fe.getClientTimeOffset()})}function D(e){e.fragmentModel===pe&&(r(),be=!1,ie("Stream is complete"))}function M(e){e.sender===pe&&(de.getIsTextTrack(ge)&&(be=!1),e.error&&e.request.serviceLocation&&!_e&&(v(e.request),be=!1,d(0)))}function C(){E(!0)}function P(e){e.sender.getStreamProcessor()===Me&&(be=!1,d(0))}function x(e){e.streamProcessor===Me&&(v(e.request),be=!1,d(0))}function F(e){e.sender.getStreamProcessor()===Me&&r()}function N(e){e.sender.getStreamProcessor()===Me&&(pe.removeExecutedRequestsBeforeTime(e.to),e.hasEnoughSpaceToAppend&&_e&&n())}function U(e){e.sender.getStreamProcessor()!==Me||e.state!==f.default.BUFFER_EMPTY||Ie.isSeeking()||(ie("Buffer is empty! Stalling!"),ee(new Date,a.PlayListTrace.REBUFFERING_REASON))}function B(e){e.sender.getStreamProcessor()===Me&&r()}function j(){pe.abortRequests(),r()}function G(e){e.sender.getStreamProcessor()===Me&&g(e.index)}function K(){!_e&&Fe||n()}function H(e){we=e.seekTime,W(0),_e&&n();var t=le.getCurrentManifestUpdate(oe.getMetricsFor("stream")),r=me.DVRWindow?me.DVRWindow.end-Ie.getTime():NaN;oe.updateManifestUpdateInfo(t,{latency:r})}function q(e){Te&&(Te.playbackspeed=e.playbackRate.toString())}function V(){return we}function Y(e){we=e}function z(){return pe}function W(e){Re=e}function Q(){return Re}function X(){return Me}function J(){return xe.getBufferTarget(Me,ge,Ce.isVideoTrackPresent())}function Z(e){Ee=e}function $(e,t){ee(e,t),Ee=null}function ee(e,t){if(Ee&&!1===Se){var n=Te.start,r=e.getTime()-n.getTime();Te.duration=r,Te.stopreason=t,Ee.trace.push(Te),Se=!0}}function te(){Ee&&!0===Se&&me&&(Se=!1,Te=new a.PlayListTrace,Te.representationid=me.id,Te.start=new Date,Te.mstart=1e3*Ie.getTime(),Te.playbackspeed=Ie.getPlaybackRate().toString())}function ne(){ae.off(O.default.DATA_UPDATE_STARTED,F,this),ae.off(O.default.DATA_UPDATE_COMPLETED,S,this),ae.off(O.default.BUFFER_LEVEL_STATE_CHANGED,U,this),ae.off(O.default.QUALITY_CHANGE_REQUESTED,y,this),ae.off(O.default.FRAGMENT_LOADING_COMPLETED,M,this),ae.off(O.default.STREAM_COMPLETED,D,this),ae.off(O.default.STREAM_INITIALIZED,R,this),ae.off(O.default.QUOTA_EXCEEDED,B,this),ae.off(O.default.BYTES_APPENDED,P,this),ae.off(O.default.BUFFER_CLEARED,N,this),ae.off(O.default.INIT_REQUESTED,c,this),ae.off(O.default.PLAYBACK_RATE_CHANGED,q,this),ae.off(O.default.PLAYBACK_SEEKING,H,this),ae.off(O.default.PLAYBACK_STARTED,K,this),ae.off(O.default.PLAYBACK_TIME_UPDATED,C,this),ae.off(O.default.URL_RESOLUTION_FAILED,j,this),ae.off(O.default.FRAGMENT_LOADING_ABANDONED,x,this),de.getIsTextTrack(ge)&&ae.off(O.default.TIMED_TEXT_REQUESTED,G,this),r(),E(!1),be=!1,Re=0,we=NaN,Ie=null,Ee=null}var re=this.context,ie=(0,k.default)(re).getInstance().log,ae=(0,I.default)(re).getInstance(),oe=e.metricsModel,se=e.manifestModel,ue=e.adapter,le=e.dashMetrics,de=e.dashManifestModel,fe=e.timelineConverter,ce=e.mediaPlayerModel,he=void 0,ge=void 0,pe=void 0,ve=void 0,me=void 0,ye=void 0,_e=void 0,Ee=void 0,Te=void 0,Se=void 0,be=void 0,Re=void 0,Ae=void 0,we=void 0,Ie=void 0,De=void 0,Oe=void 0,Me=void 0,Ce=void 0,Pe=void 0,Le=void 0,xe=void 0,ke=void 0,Fe=void 0,Ne=void 0,Ue=void 0,Be=void 0,je=void 0;return he={initialize:t,getStreamProcessor:X,getSeekTarget:V,setSeekTarget:Y,getFragmentModel:z,setTimeToLoadDelay:W,getTimeToLoadDelay:Q,replaceRequest:v,start:n,stop:r,reset:ne,setPlayList:Z,getBufferTarget:J,finalisePlayList:$},function(){ye=!0,Be=NaN,Ne=NaN,Ue={},je=[],_e=!0,Ee=null,Te=null,Se=!0,be=!1,Re=0,we=NaN}(),he}Object.defineProperty(n,"__esModule",{value:!0});var a=e(184),o=e(67),s=r(o),u=e(59),l=r(u),d=e(62),f=r(d),c=e(65),h=r(c),g=e(138),p=r(g),v=e(139),m=r(v),y=e(143),_=r(y),E=e(97),T=r(E),S=e(69),b=r(S),R=e(155),A=r(R),w=e(9),I=r(w),D=e(13),O=r(D),M=e(10),C=r(M),P=e(70),L=r(P),x=e(8),k=r(x);i.__dashjs_factory_name="ScheduleController",n.default=C.default.getClassFactory(i),t.exports=n.default},{10:10,13:13,138:138,139:139,143:143,155:155,184:184,59:59,62:62,65:65,67:67,69:69,70:70,8:8,9:9,97:97}],69:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var n=t.codec,r=null;try{if(n.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new u.default("not really supported");r=e.addSourceBuffer(n)}catch(e){if(!t.isText&&-1===n.indexOf('codecs="stpp')&&-1===n.indexOf('codecs="wvtt'))throw e;var i=(0,o.default)(v).getInstance();r=i.getTextSourceBuffer()}return r}function t(e,t){try{e.removeSourceBuffer(t)}catch(e){}}function n(e,t,n){var r,i,a=null,o=0,s=0,u=null,l=null,d=0,f=n||.15;try{a=e.buffered}catch(e){return null}if(null!==a&&void 0!==a){for(i=0,r=a.length;i<r;i++)if(o=a.start(i),s=a.end(i),null===u)d=Math.abs(o-t),t>=o&&t<s?(u=o,l=s):d<=f&&(u=o,l=s);else{if(!((d=o-l)<=f))break;l=s}if(null!==u)return{start:u,end:l}}return null}function r(e){try{return e.buffered}catch(e){return null}}function i(e){var t,n,i=r(e),a=0;if(!i)return a;for(n=0,t=i.length;n<t;n++)a+=i.end(n)-i.start(n);return a}function a(e,t,r){var i;return i=n(e,t,r),null===i?0:i.end-t}function s(e,t){if(!t)return null;var n,i,a,o,s,u,l,d,f,c=r(t);if(!c)return null;for(var h=0,g=c.length;h<g;h++){if(d=e.length>h,s=d?{start:e.start(h),end:e.end(h)}:null,n=c.start(h),i=c.end(h),!s)return f={start:n,end:i};if(a=s.start===n,o=s.end===i,!a||!o){if(a)f={start:s.end,end:i};else{if(!o)return f={start:n,end:i};f={start:n,end:s.start}}return u=e.length>h+1?{start:e.start(h+1),end:e.end(h+1)}:null,l=h+1<g?{start:c.start(h+1),end:c.end(h+1)}:null,!u||l&&l.start===u.start&&l.end===u.end||(f.end=u.start),f}}return null}function l(e,t){var n=t.bytes,r="append"in e?"append":"appendBuffer"in e?"appendBuffer":null,i="Object"===Object.prototype.toString.call(e).slice(8,-1);r&&p(e,function(){try{i?e[r](n,t):e[r](n),p(e,function(){m.trigger(c.default.SOURCEBUFFER_APPEND_COMPLETED,{buffer:e,bytes:n})})}catch(t){m.trigger(c.default.SOURCEBUFFER_APPEND_COMPLETED,{buffer:e,bytes:n,error:new u.default(t.code,t.message,null)})}})}function f(e,t,n,r){p(e,function(){try{t>=0&&n>t&&"ended"!==r.readyState&&e.remove(t,n),p(e,function(){m.trigger(c.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:n})})}catch(r){m.trigger(c.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:n,error:new u.default(r.code,r.message,null)})}})}function h(e,t){try{"open"===e.readyState?t.abort():t.setTextTrack&&"ended"===e.readyState&&t.abort()}catch(e){}}function g(e){e&&e.dashManifestModel&&(y=e.dashManifestModel)}function p(e,t){var n,r=function(){e.updating||(clearInterval(n),t())
},i=function n(){e.updating||(e.removeEventListener("updateend",n,!1),t())};if(!e.updating)return void t();if("function"==typeof e.addEventListener)try{e.addEventListener("updateend",i,!1)}catch(e){n=setInterval(r,50)}else n=setInterval(r,50)}var v=this.context,m=(0,d.default)(v).getInstance(),y=void 0;return{append:l,remove:f,abort:h,createSourceBuffer:e,removeSourceBuffer:t,getBufferRange:n,getAllRanges:r,getTotalBufferedTime:i,getBufferLength:a,getRangeDifference:s,setConfig:g}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(143),o=r(a),s=e(165),u=r(s),l=e(9),d=r(l),f=e(13),c=r(f),h=e(10),g=r(h);i.__dashjs_factory_name="SourceBufferController";var p=g.default.getSingletonFactory(i);p.QUOTA_EXCEEDED_ERROR_CODE=22,n.default=p,t.exports=n.default},{10:10,13:13,143:143,165:165,9:9}],70:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,s){he=e,ce=s,ue.initialize(),oe=(0,I.default)(q).getInstance(),Q=(0,d.default)(q).getInstance(),Q.setConfig({manifestModel:J,dashManifestModel:Z}),Q.initialize(X),_e=(0,y.default)(q).getInstance(),Ee=(0,o.default)(q).getInstance(),Ee.setConfig({streamController:z,timelineConverter:ue,metricsModel:ee,dashMetrics:te,manifestModel:J,dashManifestModel:Z,adapter:$,videoModel:_e}),Y.on(g.default.TIME_SYNCHRONIZATION_COMPLETED,D,this),Y.on(g.default.PLAYBACK_SEEKING,n,this),Y.on(g.default.PLAYBACK_TIME_UPDATED,t,this),Y.on(g.default.PLAYBACK_ENDED,h,this),Y.on(g.default.PLAYBACK_ERROR,x,this),Y.on(g.default.PLAYBACK_STARTED,r,this),Y.on(g.default.PLAYBACK_PAUSED,i,this),Y.on(g.default.MANIFEST_UPDATED,O,this),Y.on(g.default.STREAM_BUFFERING_COMPLETED,a,this)}function t(e){if(M()){var t=_e.getPlaybackQuality();t&&ee.addDroppedFrames("video",t)}Ee.isSeeking()||e.timeToEnd<=H&&h()}function n(e){var t=s(e.seekTime);t&&t!==de?(P(b.PlayListTrace.END_OF_PERIOD_STOP_REASON),m(de,t,e.seekTime)):P(b.PlayListTrace.USER_REQUEST_STOP_REASON),L(b.PlayList.SEEK_START_REASON)}function r(){be?(be=!1,L(b.PlayList.INITIAL_PLAYOUT_START_REASON)):Se&&(Se=!1,L(b.PlayList.RESUME_FROM_PAUSE_START_REASON))}function i(e){e.ended||(Se=!0,P(b.PlayListTrace.USER_REQUEST_STOP_REASON))}function a(){var e=F().isLast;ye&&e&&re.signalEndOfStream(ye)}function s(e){var t=0,n=null,r=le.length;r>0&&(t+=le[0].getStartTime());for(var i=0;i<r;i++)if(n=le[i],t+=n.getDuration(),e<t)return n;return null}function l(e,t){for(var n=null,r=0,i=0,a=null,o=le.length,s=0;s<o;s++){if(n=le[s],i=n.getStartTime(),a=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===t)return e-r;Number.isFinite(a)&&(r+=a)}return null}function f(){var e=[];return de.getProcessors().forEach(function(t){e.push(t.getIndexHandler().getEarliestTime())}),Math.min.apply(Math,e)}function h(){var e=p();e&&m(de,e,NaN),P(e?b.PlayListTrace.END_OF_PERIOD_STOP_REASON:b.PlayListTrace.END_OF_CONTENT_STOP_REASON)}function p(){if(de){var e=function(){var e=de.getStreamInfo().start,t=de.getStreamInfo().duration;return{v:le.filter(function(n){return n.getStreamInfo().start===e+t})[0]}}();if("object"==typeof e)return e.v}}function m(e,t,n){!ge&&t&&e!==t&&(ge=!0,Y.trigger(g.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:t.getStreamInfo()}),e&&e.deactivate(),de=t,Ee.initialize(de.getStreamInfo()),_(n))}function _(e){function t(){V("MediaSource is open!"),window.URL.revokeObjectURL(n),ye.removeEventListener("sourceopen",t),ye.removeEventListener("webkitsourceopen",t),S(),T(e)}var n=void 0;ye?re.detachMediaSource(_e):ye=re.createMediaSource(),ye.addEventListener("sourceopen",t,!1),ye.addEventListener("webkitsourceopen",t,!1),n=re.attachMediaSource(ye,_e),V("MediaSource attached to element.  Waiting on open...")}function T(e){de.activate(ye),be?Ae=C():isNaN(e)?function(){var e=Ee.getStreamStartTime(!0);de.getProcessors().forEach(function(t){$.setIndexHandlerTime(t,e)}),Ee.seek(e)}():Ee.seek(e),de.startEventController(),!he&&be||Ee.play(),ge=!1,Y.trigger(g.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:de.getStreamInfo()})}function S(){var e=de.getStreamInfo().manifestInfo.duration,t=re.setDuration(ye,e);V("Duration successfully set to: "+t)}function R(e){for(var t=0,n=le.length;t<n;t++)if(le[t].getId()===e.id)return le[t];return null}function w(e){try{var t=$.getStreamsInfo(e);if(0===t.length)throw new Error("There are no streams");var n=te.getCurrentManifestUpdate(ee.getMetricsFor("stream"));ee.updateManifestUpdateInfo(n,{currentTime:Ee.getTime(),buffered:_e.getElement().buffered,presentationStartTime:t[0].start,clientTimeOffset:ue.getClientTimeOffset()});for(var r=0,i=t.length;r<i;r++){var a=t[r],o=R(a);o?o.updateData(a):(o=(0,u.default)(q).create({manifestModel:J,manifestUpdater:Q,adapter:$,timelineConverter:ue,capabilities:W,errHandler:se,baseURLController:ae}),le.push(o),o.initialize(a,fe)),ee.addManifestUpdateStreamInfo(n,a.id,a.index,a.start,a.duration)}de||m(null,le[0],NaN),Y.trigger(g.default.STREAMS_COMPOSED)}catch(t){se.manifestError(t.message,"nostreamscomposed",e),me=!0,K()}}function D(){var e=J.getValue();fe&&(Y.trigger(g.default.PROTECTION_CREATED,{controller:fe,manifest:e}),fe.setMediaElement(_e.getElement()),ce&&fe.setProtectionData(ce)),w(e)}function O(e){if(e.error)me=!0,K();else{var t,n,r=e.manifest,i=$.getStreamsInfo(r)[0],a=$.getMediaInfoForType(r,i,"video")||$.getMediaInfoForType(r,i,"audio");a&&(t=$.getDataForMedia(a),(n=Z.getRepresentationsForAdaptation(r,t)[0].useCalculatedLiveEdgeTime)&&(V("SegmentTimeline detected using calculated Live Edge Time"),Te.setUseManifestDateHeaderTimeSource(!1)));var o=Z.getUTCTimingSources(e.manifest),s=!Z.getIsDynamic(r)||n?o:o.concat(Te.getUTCTimingSources()),u=(0,v.default)(q).getInstance().isManifestHTTPS();s.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===E.default.DEFAULT_UTC_TIMING_SOURCE.value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(u?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),u?"https://":"http://"),V("Matching default timing source protocol to manifest protocol: ",e.value))}),ae.initialize(r),ie.setConfig({metricsModel:ee,dashMetrics:te}),ie.initialize(s,Te.getUseManifestDateHeaderTimeSource())}}function M(){return void 0===Ae&&(Ae=C()),Ae}function C(){var e=!1;return de.getProcessors().forEach(function(t){"video"===t.getMediaInfo().type&&(e=!0)}),e}function P(e,t){t=t||new Date,Re&&(de&&de.getProcessors().forEach(function(n){var r=n.getScheduleController();r&&r.finalisePlayList(t,e)}),ee.addPlayList(Re),Re=null)}function L(e){Re=new b.PlayList,Re.start=new Date,Re.mstart=1e3*Ee.getTime(),Re.starttype=e,de&&de.getProcessors().forEach(function(e){var t=e.getScheduleController();t&&t.setPlayList(Re)})}function x(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}ve=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),V("Video Element Error: "+t),e.error&&V(e.error),se.mediaSourceError(t),K()}}function k(){return he}function F(){return de?de.getStreamInfo():null}function N(e){return de.getId()===e.id}function U(e){return le.filter(function(t){return t.getId()===e})[0]}function B(e){X.load(e)}function j(e){Q.setManifest(e)}function G(e){e&&(e.capabilities&&(W=e.capabilities),e.manifestLoader&&(X=e.manifestLoader),e.manifestModel&&(J=e.manifestModel),e.dashManifestModel&&(Z=e.dashManifestModel),e.protectionController&&(fe=e.protectionController),e.adapter&&($=e.adapter),e.metricsModel&&(ee=e.metricsModel),e.dashMetrics&&(te=e.dashMetrics),e.liveEdgeFinder&&(ne=e.liveEdgeFinder),e.mediaSourceController&&(re=e.mediaSourceController),e.timeSyncController&&(ie=e.timeSyncController),e.baseURLController&&(ae=e.baseURLController),e.errHandler&&(se=e.errHandler),e.timelineConverter&&(ue=e.timelineConverter))}function K(){ie.reset(),P(ve||me?b.PlayListTrace.FAILURE_STOP_REASON:b.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,o=le.length;e<o;e++){le[e].reset(ve)}le=[],Y.off(g.default.PLAYBACK_TIME_UPDATED,t,this),Y.off(g.default.PLAYBACK_SEEKING,n,this),Y.off(g.default.PLAYBACK_ERROR,x,this),Y.off(g.default.PLAYBACK_STARTED,r,this),Y.off(g.default.PLAYBACK_PAUSED,i,this),Y.off(g.default.PLAYBACK_ENDED,h,this),Y.off(g.default.MANIFEST_UPDATED,O,this),Y.off(g.default.STREAM_BUFFERING_COMPLETED,a,this),ae.reset(),Q.reset(),ee.clearAllCurrentMetrics(),J.setValue(null),X.reset(),ue.reset(),ne.reset(),$.reset(),oe.reset(),ge=!1,pe=!1,de=null,ve=!1,me=!1,Ae=void 0,be=!0,Se=!1,ye&&(re.detachMediaSource(_e),ye=null),_e=null,fe&&(fe.setMediaElement(null),fe=null,ce=null,J.getValue()&&Y.trigger(g.default.PROTECTION_DESTROYED,{data:J.getValue().url})),Y.trigger(g.default.STREAM_TEARDOWN_COMPLETE)}var H=.1,q=this.context,V=(0,A.default)(q).getInstance().log,Y=(0,c.default)(q).getInstance(),z=void 0,W=void 0,Q=void 0,X=void 0,J=void 0,Z=void 0,$=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,he=void 0,ge=void 0,pe=void 0,ve=void 0,me=void 0,ye=void 0,_e=void 0,Ee=void 0,Te=void 0,Se=void 0,be=void 0,Re=void 0,Ae=void 0;return z={initialize:e,getAutoPlay:k,getActiveStreamInfo:F,isStreamActive:N,isVideoTrackPresent:M,getStreamById:U,getTimeRelativeToStreamId:l,load:B,loadWithManifest:j,getActiveStreamCommonEarliestTime:f,setConfig:G,reset:K},function(){fe=null,le=[],Te=(0,E.default)(q).getInstance(),he=!0,ge=!1,pe=!1,Se=!1,be=!0,Re=null,ve=!1,me=!1}(),z}Object.defineProperty(n,"__esModule",{value:!0});var a=e(67),o=r(a),s=e(55),u=r(s),l=e(51),d=r(l),f=e(9),c=r(f),h=e(13),g=r(h),p=e(101),v=r(p),m=e(102),y=r(m),_=e(99),E=r(_),T=e(10),S=r(T),b=e(184),R=e(8),A=r(R),w=e(153),I=r(w);i.__dashjs_factory_name="StreamController",n.default=S.default.getSingletonFactory(i),t.exports=n.default},{10:10,101:101,102:102,13:13,153:153,184:184,51:51,55:55,67:67,8:8,9:9,99:99}],71:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){P=t,O=0,M=!1,C=!1,L={"urn:mpeg:dash:utc:http-head:2014":T,"urn:mpeg:dash:utc:http-xsdate:2014":E.bind(null,c),"urn:mpeg:dash:utc:http-iso:2014":E.bind(null,h),"urn:mpeg:dash:utc:direct:2014":_,"urn:mpeg:dash:utc:http-head:2012":T,"urn:mpeg:dash:utc:http-xsdate:2012":E.bind(null,c),"urn:mpeg:dash:utc:http-iso:2012":E.bind(null,h),"urn:mpeg:dash:utc:direct:2012":_,"urn:mpeg:dash:utc:http-ntp:2014":y,"urn:mpeg:dash:utc:ntp:2014":y,"urn:mpeg:dash:utc:sntp:2014":y},i()||(R(e),a(!0))}function t(e){e&&(e.metricsModel&&(x=e.metricsModel),e.dashMetrics&&(k=e.dashMetrics))}function n(){return l()}function r(e){M=e}function i(){return M}function a(e){C=e}function s(e){O=e}function l(){return O}function f(e){var t,n,r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/,i=r.exec(e);return t=Date.UTC(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10),i[6]&&(parseInt(i[6],10)||0),i[7]&&1e3*parseFloat(i[7])||0),i[9]&&i[10]&&(n=60*parseInt(i[9],10)+parseInt(i[10],10),t+=("+"===i[8]?-1:1)*n*60*1e3),new Date(t).getTime()}function c(e){var t=Date.parse(e);return isNaN(t)&&(t=f(e)),t}function h(e){return Date.parse(e)}function m(e){return Date.parse(e)}function y(e,t,n){n()}function _(e,t,n){var r=c(e);return isNaN(r)?void n():void t(r)}function E(e,t,n,r,i){var a,o,s=!1,u=new XMLHttpRequest,l=i?"HEAD":"GET",d=t.match(/\S+/g);t=d.shift(),a=function(){s||(s=!0,d.length?E(e,d.join(" "),n,r,i):r())},o=function(){var t,r;200===u.status&&(t=i?u.getResponseHeader("Date"):u.response,r=e(t),isNaN(r)||(n(r),s=!0))},u.open(l,t),u.timeout=v||0,u.onload=o,u.onloadend=a,u.send()}function T(e,t,n){E(m,e,t,n,!0)}function S(){var e=x.getReadOnlyMetricsFor("stream"),t=k.getLatestMPDRequestHeaderValueByID(e,"Date"),n=null!==t?new Date(t).getTime():Number.NaN;isNaN(n)?b(!0):(s(n-(new Date).getTime()),b(!1,n/1e3,O))}function b(e,t,n){r(!1),D.trigger(d.default.TIME_SYNCHRONIZATION_COMPLETED,{time:t,offset:n,error:e?new o.default(p):null})}function R(e,t){var n=t||0,i=e[n],a=function(e,t){var n=!e||!t;n&&P?S():b(n,e,t)};r(!0),i?L.hasOwnProperty(i.schemeIdUri)?L[i.schemeIdUri](i.value,function(e){var t=(new Date).getTime(),n=e-t;s(n),I("Local time:      "+new Date(t)),I("Server time:     "+new Date(e)),I("Difference (ms): "+n),a(e,n)},function(){R(e,n+1)}):R(e,n+1):(s(0),a())}function A(){a(!1),r(!1)}var w=this.context,I=(0,g.default)(w).getInstance().log,D=(0,u.default)(w).getInstance(),O=void 0,M=void 0,C=void 0,P=void 0,L=void 0,x=void 0,k=void 0;return{initialize:e,getOffsetToDeviceTimeMs:n,setConfig:t,reset:A}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(165),o=r(a),s=e(9),u=r(s),l=e(13),d=r(l),f=e(10),c=r(f),h=e(8),g=r(h),p=1,v=5e3;i.__dashjs_factory_name="TimeSyncController";var m=c.default.getSingletonFactory(i);m.TIME_SYNC_FAILED_ERROR_CODE=p,m.HTTP_TIMEOUT_MS=v,n.default=m,t.exports=n.default},{10:10,13:13,165:165,8:8,9:9}],72:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){I=e}function n(e){D=e}function r(e){var t;M=new g.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:I}),O=e,t=f(O.Period_asArray,O,_,m),a(t,_,m)}function i(){R.off(d.default.XLINK_ELEMENT_LOADED,s,w),C&&(C.reset(),C=null)}function a(e,t,n){var r,i,a,o={};for(o.elements=e,o.type=t,o.resolveType=n,0===o.elements.length&&l(o),a=0;a<o.elements.length;a++)r=o.elements[a],i=A.isHTTPURL(r.url)?r.url:r.originalContent.BaseURL+r.url,C.load(i,r,o)}function s(e){var t,n,r,i="";t=e.element,n=e.resolveObject,t.resolvedContent&&(r=t.resolvedContent.indexOf(">")+1,i=t.resolvedContent.substr(0,r)+"<response>"+t.resolvedContent.substr(r)+"</response>",t.resolvedContent=M.xml_str2json(i)),p(n)&&l(n)}function l(e){var t,n,r=[];if(c(e),e.resolveType===y&&R.trigger(d.default.XLINK_READY,{manifest:O}),e.resolveType===m)switch(e.type){case _:for(t=0;t<O[_+"_asArray"].length;t++)n=O[_+"_asArray"][t],n.hasOwnProperty(E+"_asArray")&&(r=r.concat(f(n[E+"_asArray"],n,E,m))),n.hasOwnProperty(T+"_asArray")&&(r=r.concat(f(n[T+"_asArray"],n,T,m)));a(r,E,m);break;case E:R.trigger(d.default.XLINK_READY,{manifest:O})}}function f(e,t,n,r){var i,a,o,s=[];for(a=e.length-1;a>=0;a--)i=e[a],i.hasOwnProperty("xlink:href")&&i["xlink:href"]===S&&e.splice(a,1);for(a=0;a<e.length;a++)i=e[a],i.hasOwnProperty("xlink:href")&&i.hasOwnProperty("xlink:actuate")&&i["xlink:actuate"]===r&&(o=h(i["xlink:href"],t,n,a,r,i),s.push(o));return s}function c(e){var t,n,r,i,a,o,s=[];for(i=e.elements.length-1;i>=0;i--){if(t=e.elements[i],n=t.type+"_asArray",t.resolvedContent&&1){if(t.resolvedContent)for(a=0;a<t.resolvedContent[n].length;a++)r=t.resolvedContent[n][a],s.push(r)}else delete t.originalContent["xlink:actuate"],delete t.originalContent["xlink:href"],s.push(t.originalContent);for(t.parentElement[n].splice(t.index,1),o=0;o<s.length;o++)t.parentElement[n].splice(t.index+o,0,s[o]);s=[]}e.elements.length>0&&D.run(O)}function h(e,t,n,r,i,a){return{url:e,parentElement:t,type:n,index:r,resolveType:i,originalContent:a,resolvedContent:null,resolved:!1}}function p(e){var t,n;for(t=0;t<e.elements.length;t++)if(n=e.elements[t],!1===n.resolved)return!1;return!0}var b=this.context,R=(0,u.default)(b).getInstance(),A=(0,v.default)(b).getInstance(),w=void 0,I=void 0,D=void 0,O=void 0,M=void 0,C=void 0;return w={resolveManifestOnLoad:r,setMatchers:t,setIron:n,reset:i},function(){R.on(d.default.XLINK_ELEMENT_LOADED,s,w),C=(0,o.default)(b).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier})}(),w}Object.defineProperty(n,"__esModule",{value:!0});var a=e(58),o=r(a),s=e(9),u=r(s),l=e(13),d=r(l),f=e(10),c=r(f),h=e(4),g=r(h),p=e(159),v=r(p),m="onLoad",y="onActuate",_="Period",E="AdaptationSet",T="EventStream",S="urn:mpeg:dash:resolve-to-zero:2013";i.__dashjs_factory_name="XlinkController",n.default=c.default.getClassFactory(i),t.exports=n.default},{10:10,13:13,159:159,4:4,58:58,9:9}],73:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){return i=(0,o.default)(r).getInstance({eventBus:e.eventBus,metricsModel:e.metricsModel}),(0,d.default)(r).create(e)}function t(){return(0,g.default)(r).getInstance()}function n(){return(0,c.default)(r).getInstance()}var r=this.context,i=void 0;return{createMetricsReporting:e,getReportingFactory:t,getMetricsHandlerFactory:n}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(87),o=r(a),s=e(74),u=r(s),l=e(75),d=r(l),f=e(80),c=r(f),h=e(85),g=r(h),p=e(10),v=r(p);i.__dashjs_factory_name="MetricsReporting";var m=v.default.getClassFactory(i);m.events=u.default,n.default=m,t.exports=n.default},{10:10,74:74,75:75,80:80,85:85,87:87}],74:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}},o=e(14),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}return i(t,e),t}(s.default),l=new u;n.default=l,t.exports=n.default},{14:14}],75:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t){if(!t.error){var n=Object.keys(r);(0,u.default)(i).getInstance({dashManifestModel:e.dashManifestModel}).getMetrics(t.manifest).forEach(function(t){var a=JSON.stringify(t);if(r.hasOwnProperty(a))n.splice(a,1);else try{var s=(0,o.default)(i).create(e);s.initialize(t),r[a]=s}catch(e){}}),n.forEach(function(e){r[e].reset(),delete r[e]}),a.trigger(c.default.METRICS_INITIALISATION_COMPLETE)}}function n(){Object.keys(r).forEach(function(e){r[e].reset()}),r={}}var r={},i=this.context,a=e.eventBus;return function(){a.on(g.default.MANIFEST_UPDATED,t),a.on(g.default.STREAM_TEARDOWN_COMPLETE,n)}(),{}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(76),o=r(a),s=e(89),u=r(s),l=e(10),d=r(l),f=e(74),c=r(f),h=e(13),g=r(h);i.__dashjs_factory_name="MetricsCollectionController",n.default=d.default.getClassFactory(i),t.exports=n.default},{10:10,13:13,74:74,76:76,89:89}],76:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t){try{a=(0,u.default)(o).create({mediaElement:e.mediaElement}),a.initialize(t.Range),i=(0,d.default)(o).create({log:e.log}),i.initialize(t.Reporting,a),r=(0,c.default)(o).create({log:e.log,eventBus:e.eventBus}),r.initialize(t.metrics,i)}catch(e){throw n(),e}}function n(){r&&r.reset(),i&&i.reset(),a&&a.reset()}var r=void 0,i=void 0,a=void 0,o=this.context;return{initialize:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(78),u=r(s),l=e(79),d=r(l),f=e(77),c=r(f);i.__dashjs_factory_name="MetricsController",n.default=o.default.getClassFactory(i),t.exports=n.default},{10:10,77:77,78:78,79:79}],77:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){i.forEach(function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)})}function n(e,n){e.split(",").forEach(function(e,t,r){var a;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var o=r[t+1];o&&-1===o.indexOf("(")&&-1!==o.indexOf(")")&&(e+=","+o,delete r[t+1])}(a=l.create(e,n))&&i.push(a)}),u.on(d.default.METRIC_ADDED,t,a),u.on(d.default.METRIC_UPDATED,t,a)}function r(){u.off(d.default.METRIC_ADDED,t,a),u.off(d.default.METRIC_UPDATED,t,a),i.forEach(function(e){return e.reset()}),i=[]}var i=[],a=void 0,s=this.context,u=e.eventBus,l=(0,o.default)(s).getInstance({log:e.log,eventBus:e.eventBus});return a={initialize:n,reset:r}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(80),o=r(a),s=e(10),u=r(s),l=e(53),d=r(l);i.__dashjs_factory_name="MetricsHandlersController",n.default=u.default.getClassFactory(i),t.exports=n.default},{10:10,53:53,80:80}],78:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,n=t+e.duration;s.add(t,n)}),i=!!e[0]._useWallClockTime)}function n(){s.clear()}function r(){var e,t=s.length;if(!t)return!0;e=i?(new Date).getTime()/1e3:l.currentTime;for(var n=0;n<t;n+=1){var r=s.start(n),a=s.end(n);if(r<=e&&e<a)return!0}return!1}var i=!1,a=this.context,o=void 0,s=void 0,l=e.mediaElement;return o={initialize:t,reset:n,isEnabled:r},function(){s=(0,u.default)(a).create()}(),o}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(149),u=r(s);i.__dashjs_factory_name="RangeController",n.default=o.default.getClassFactory(i),t.exports=n.default},{10:10,149:149}],79:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){e.some(function(e){var n=a.create(e,t);if(n)return i.push(n),!0})}function n(){i.forEach(function(e){return e.reset()}),i=[]}function r(e,t){i.forEach(function(n){return n.report(e,t)})}var i=[],a=(0,u.default)(this.context).getInstance({log:e.log});return{initialize:t,reset:n,report:r}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(85),u=r(s);i.__dashjs_factory_name="ReportingController",n.default=o.default.getClassFactory(i),t.exports=n.default},{10:10,85:85}],80:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t,n){var r,u=t.match(a);if(u){try{r=s[u[1]](o).create({eventBus:e.eventBus}),r.initialize(u[1],n,u[3],u[5])}catch(e){r=null,i("MetricsHandlerFactory: Could not create handler for type "+u[1]+" with args "+u[3]+", "+u[5]+" ("+e.message+")")}return r}}function n(e,t){s[e]=t}function r(e){delete s[e]}var i=e.log,a=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,o=this.context,s={BufferLevel:u.default,DVBErrors:d.default,HttpList:c.default,PlayList:g.default,RepSwitchList:g.default,TcpList:g.default};return{create:t,register:n,unregister:r}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(81),u=r(s),l=e(82),d=r(l),f=e(84),c=r(f),h=e(83),g=r(h);i.__dashjs_factory_name="MetricsHandlerFactory",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{10:10,81:81,82:82,83:83,84:84}],81:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){try{return Object.keys(h).map(function(e){return h[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}function t(){var t=e();t&&d!==t.t&&(d=t.t,a.report(s,t))}function n(e,n,r){n&&(o=c.validateN(r),a=n,s=c.reconstructFullMetricName(e,r),l=setInterval(t,o))}function r(){clearInterval(l),l=null,o=0,a=null,d=null}function i(e,t,n){"BufferLevel"===e&&(h[n]=t)}var a=void 0,o=void 0,s=void 0,l=void 0,d=void 0,f=this.context,c=(0,u.default)(f).getInstance(),h=[];return{initialize:n,reset:r,handleNewMetric:i}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(88),u=r(s);i.__dashjs_factory_name="BufferLevelHandler",n.default=o.default.getClassFactory(i),t.exports=n.default},{10:10,88:88}],82:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){o.off(u.default.METRICS_INITIALISATION_COMPLETE,t,this),o.trigger(u.default.BECAME_REPORTING_PLAYER)}function n(e,n){n&&(a=n,o.on(u.default.METRICS_INITIALISATION_COMPLETE,t,this))}function r(){a=null}function i(e,t){"DVBErrors"===e&&a&&a.report(e,t)}var a=void 0,o=e.eventBus;return{initialize:n,reset:r,handleNewMetric:i}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(74),u=r(s);n.default=o.default.getClassFactory(i),t.exports=n.default},{10:10,74:74}],83:[function(e,t,n){function r(){function e(e,t){r=e,i=t}function t(){i=null,r=void 0}function n(e,t){e===r&&i&&i.report(r,t)}var r=void 0,i=void 0;return{initialize:e,reset:t,handleNewMetric:n}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="GenericMetricHandler",n.default=a.default.getClassFactory(r),t.exports=n.default},{10:10}],84:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){var e=d;e.length&&i&&i.report(s,e),d=[]}function t(t,n,r,u){n&&(a=f.validateN(r),i=n,u&&u.length&&(o=u),s=f.reconstructFullMetricName(t,r,u),l=setInterval(e,a))}function n(){clearInterval(l),l=null,a=null,o=null,d=[],i=null}function r(e,t){"HttpList"===e&&(o&&o!==t.type||d.push(t))}var i=void 0,a=void 0,o=void 0,s=void 0,l=void 0,d=[],f=(0,u.default)(this.context).getInstance();return{initialize:t,reset:n,handleNewMetric:r}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(88),u=r(s);i.__dashjs_factory_name="HttpListHandler",n.default=o.default.getClassFactory(i),t.exports=n.default},{10:10,88:88}],85:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){var n;try{n=i[e.schemeIdUri](a).create(),n.initialize(e,t)}catch(t){n=null,o("ReportingFactory: could not create Reporting with schemeIdUri "+e.schemeIdUri+" ("+t.message+")")}return n}function n(e,t){i[e]=t}function r(e){delete i[e]}var i={"urn:dvb:dash:reporting:2014":u.default},a=this.context,o=e.log;return{create:t,register:n,unregister:r}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(86),u=r(s);i.__dashjs_factory_name="ReportingFactory",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{10:10,86:86}],86:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t,n){var r=new XMLHttpRequest,i=function(){var e=p.indexOf(r);-1!==e&&(p.splice(e,1),r.status>=200&&r.status<300?t&&t():n&&n())};p.push(r);try{r.open("GET",e),r.onloadend=i,r.onerror=i,r.send()}catch(e){r.onerror()}}function t(t,n){Array.isArray(n)||(n=[n]),l&&h.isEnabled()&&n.forEach(function(n){var r=a.serialise(n);s&&"DVBErrors"!==t&&(r="metricname="+t+"&"+r),r=c+"?"+r,e(r,null,function(){l=!1})})}function n(e,t){var n;if(h=t,!(c=e["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");f||(n=e["dvb:probability"]||e["dvb:priority"]||0,n&&(1e3===n||n/1e3>=o.random())&&(l=!0),f=!0)}function r(){g||(p.forEach(function(e){return e.abort()}),p=[]),f=!1,l=!1,c=null,h=null}var i=this.context,a=(0,u.default)(i).getInstance(),o=(0,d.default)(i).getInstance(),s=!0,l=!1,f=!1,c=null,h=null,g=!0,p=[];return{report:t,initialize:n,reset:r}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(90),u=r(s),l=e(91),d=r(l);i.__dashjs_factory_name="DVBReporting",n.default=o.default.getClassFactory(i),t.exports=n.default},{10:10,90:90,91:91}],87:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t=new o.default;if(m){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=m.originalUrl||m.url),t.terror||(t.terror=new Date),v.addDVBErrors(t)}}function n(e){e.error||(m=e.manifest)}function r(e){t({errorcode:o.default.BASE_URL_CHANGED,servicelocation:e.entry})}function i(){t({errorcode:o.default.BECAME_REPORTER})}function a(e){(0===e.responsecode||e.responsecode>=400||e.responsecode<100||e.responsecode>=600)&&t({errorcode:e.responsecode||o.default.CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}function s(e){switch(e.metric){case"HttpList":a(e.value)}}function l(e){var n;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:n=o.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:n=o.default.CORRUPT_MEDIA_OTHER;break;default:return}t({errorcode:n})}function f(){p.on(u.default.MANIFEST_UPDATED,n,g),p.on(u.default.SERVICE_LOCATION_BLACKLIST_CHANGED,r,g),p.on(d.default.METRIC_ADDED,s,g),p.on(d.default.METRIC_UPDATED,s,g),p.on(d.default.PLAYBACK_ERROR,l,g),p.on(c.default.BECAME_REPORTING_PLAYER,i,g)}function h(){p.off(u.default.MANIFEST_UPDATED,n,g),p.off(u.default.SERVICE_LOCATION_BLACKLIST_CHANGED,r,g),p.off(d.default.METRIC_ADDED,s,g),p.off(d.default.METRIC_UPDATED,s,g),p.off(d.default.PLAYBACK_ERROR,l,g),p.off(c.default.BECAME_REPORTING_PLAYER,i,g)}var g=void 0,p=e.eventBus,v=e.metricsModel,m=void 0;return g={initialise:f,reset:h},f(),g}Object.defineProperty(n,"__esModule",{value:!0});var a=e(92),o=r(a),s=e(13),u=r(s),l=e(53),d=r(l),f=e(74),c=r(f),h=e(10),g=r(h);i.__dashjs_factory_name="DVBErrorsTranslator",n.default=g.default.getSingletonFactory(i),t.exports=n.default},{10:10,13:13,53:53,74:74,92:92}],88:[function(e,t,n){function r(){return{reconstructFullMetricName:function(e,t,n){var r=e;return t&&(r+="("+t,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="HandlerHelpers",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{10:10}],89:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){var i,a,o=r.getMpd(e),s=0;return t?s=o.availabilityStartTime.getTime()/1e3:(i=this.getRegularPeriods(e,o),i.length&&(s=i[0].start)),a=s,n&&n.hasOwnProperty("starttime")&&(a+=n.starttime),a}function n(e){var n=[];return e.Metrics_asArray&&e.Metrics_asArray.forEach(function(i){var a=new o.default,s=r.getIsDynamic(e);i.hasOwnProperty("metrics")&&(a.metrics=i.metrics,i.Range_asArray&&i.Range_asArray.forEach(function(n){var i=new u.default;i.starttime=t(e,s,n),n.hasOwnProperty("duration")?i.duration=n.duration:i.duration=r.getDuration(e),i._useWallClockTime=s,a.Range.push(i)}),i.Reporting_asArray&&(i.Reporting_asArray.forEach(function(e){var t=new d.default;if(e.hasOwnProperty("schemeIdUri")){t.schemeIdUri=e.schemeIdUri;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);a.Reporting.push(t)}}),n.push(a)))}),n}var r=e.dashManifestModel;return{getMetrics:n}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(93),o=r(a),s=e(94),u=r(s),l=e(95),d=r(l),f=e(10),c=r(f);i.__dashjs_factory_name="ManifestParsing",n.default=c.default.getSingletonFactory(i),t.exports=n.default},{10:10,93:93,94:94,95:95}],90:[function(e,t,n){function r(){function e(t){var n,r,i=[],a=[];for(n in t)if(t.hasOwnProperty(n)&&0!==n.indexOf("_")){if(r=t[n],void 0!==r&&null!==r||(r=""),Array.isArray(r)){if(!r.length)continue;a=[],r.forEach(function(t){var n="Object"!==Object.prototype.toString.call(t).slice(8,-1);a.push(n?t:e(t))}),r=a.map(encodeURIComponent).join(",")}else"string"==typeof r?r=encodeURIComponent(r):r instanceof Date?r=r.toISOString():"number"==typeof r&&(r=Math.round(r));i.push(n+"="+r)}return i.join("&")}return{serialise:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="MetricSerialiser",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{10:10}],91:[function(e,t,n){function r(){function e(){n&&(o||(o=new r(a)),n.getRandomValues(o),s=0)}function t(t,r){var a;return t||(t=0),r||(r=1),n?(s===o.length&&e(),a=o[s]/i,s+=1):a=Math.random(),a*(r-t)+t}
var n=window.crypto||window.msCrypto,r=Uint32Array,i=Math.pow(2,8*r.BYTES_PER_ELEMENT)-1,a=10,o=void 0,s=void 0,u=void 0;return u={random:t},e(),u}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="RNG",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{10:10}],92:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};i.SSL_CONNECTION_FAILED_PREFIX="SSL",i.DNS_RESOLUTION_FAILED="C00",i.HOST_UNREACHABLE="C01",i.CONNECTION_REFUSED="C02",i.CONNECTION_ERROR="C03",i.CORRUPT_MEDIA_ISOBMFF="M00",i.CORRUPT_MEDIA_OTHER="M01",i.BASE_URL_CHANGED="F00",i.BECAME_REPORTER="S00",n.default=i,t.exports=n.default},{}],93:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.metrics="",this.Range=[],this.Reporting=[]};n.default=i,t.exports=n.default},{}],94:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1};n.default=i,t.exports=n.default},{}],95:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.schemeIdUri="",this.value=""};n.default=i,t.exports=n.default},{}],96:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){function e(e,t,n){var r=g.getBaseURLsFromElement(n);e[t]?p.areSimpleEquivalent(r,e[t].data.baseUrls)||(e[t].data.baseUrls=r,e[t].data.selectedIdx=c):e[t]=new h(r)}function t(t){var n=g.getBaseURLsFromElement(t);p.areSimpleEquivalent(n,d.data.baseUrls)||(d.data.baseUrls=n,d.data.selectedIdx=c),t.Period_asArray&&t.Period_asArray.forEach(function(t,n){e(d.children,n,t),t.AdaptationSet_asArray&&t.AdaptationSet_asArray.forEach(function(t,r){e(d.children[n].children,r,t),t.Representation_asArray&&t.Representation_asArray.sort(g.getRepresentationSortFunction()).forEach(function(t,i){e(d.children[n].children[r].children,i,t)})})})}function n(e,t){var r=t||d;e(r.data),r.children&&r.children.forEach(function(t){return n(e,t)})}function r(e){n(function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=c)})}function i(e){t(e)}function a(){d=new h}function o(e){var t=d,n=[t.data];return e.forEach(function(e){(t=t.children[e])&&n.push(t.data)}),n.filter(function(e){return e.baseUrls.length})}var u=void 0,d=void 0,f=this.context,g=(0,s.default)(f).getInstance(),p=(0,l.default)(f).getInstance();return u={reset:a,update:i,getForPath:o,invalidateSelectedIndexes:r},function(){d=new h}(),u}Object.defineProperty(n,"__esModule",{value:!0});var o=e(22),s=r(o),u=e(156),l=r(u),d=e(10),f=r(d),c=NaN,h=function e(t,n){i(this,e),this.data={baseUrls:t||null,selectedIdx:n||c},this.children=[]};a.__dashjs_factory_name="BaseURLTreeModel",n.default=f.default.getClassFactory(a),t.exports=n.default},{10:10,156:156,22:22}],97:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){O=e}function n(e){var t=function(e,t){return e.action===c.default.ACTION_COMPLETE&&e.action===t.action},n=function(e,t){return!isNaN(e.index)&&e.startTime===t.startTime&&e.adaptationIndex===t.adaptationIndex},r=function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality};return function(i){var a=!1;return i.some(function(i){if(n(e,i)||r(e,i)||t(e,i))return a=!0}),a}(I)}function r(e){var t=e.state instanceof Array?e.state:[e.state],n=[];return t.forEach(function(t){var r=h(t);n=n.concat(f(r,e))}),n}function i(e){I=I.filter(function(t){return isNaN(t.startTime)||t.startTime>=e})}function a(){O.abort(),D=[]}function s(e){switch(e.action){case c.default.ACTION_COMPLETE:I.push(e),y(e,v),b.trigger(u.default.STREAM_COMPLETED,{request:e,fragmentModel:this});break;case c.default.ACTION_DOWNLOAD:y(e,p),D.push(e),l(e);break;default:S("Unknown request action.")}}function l(e){b.trigger(u.default.FRAGMENT_LOADING_STARTED,{sender:A,request:e}),O.load(e)}function d(e,t,n){for(var r=e.length-1,i=r;i>=0;i--){var a=e[i],o=a.startTime,s=o+a.duration;if(n=void 0!==n?n:a.duration/2,!isNaN(o)&&!isNaN(s)&&t+n>=o&&t-n<s||isNaN(o)&&isNaN(t))return a}return null}function f(e,t){return t.hasOwnProperty("time")?[d(e,t.time,t.threshold)]:e.filter(function(e){for(var n in t)if("state"!==n&&t.hasOwnProperty(n)&&e[n]!=t[n])return!1;return!0})}function h(e){var t=void 0;switch(e){case p:t=D;break;case v:t=I;break;default:t=[]}return t}function y(e,t){R.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t),R.addRequestsQueue(e.mediaType,D,I)}function _(e){e.sender===O&&(D.splice(D.indexOf(e.request),1),e.response&&!e.error&&I.push(e.request),y(e.request,e.error?m:v),b.trigger(u.default.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}function E(){b.off(u.default.LOADING_COMPLETED,_,this),O&&(O.reset(),O=null),I=[],D=[]}var T=this.context,S=(0,g.default)(T).getInstance().log,b=(0,o.default)(T).getInstance(),R=e.metricsModel,A=void 0,w=void 0,I=void 0,D=void 0,O=void 0;return A={setLoader:t,getRequests:r,isFragmentLoaded:n,removeExecutedRequestsBeforeTime:i,abortRequests:a,executeRequest:s,reset:E},function(){w=null,O=null,I=[],D=[],b.on(u.default.LOADING_COMPLETED,_,A)}(),A}Object.defineProperty(n,"__esModule",{value:!0});var a=e(9),o=r(a),s=e(13),u=r(s),l=e(10),d=r(l),f=e(166),c=r(f),h=e(8),g=r(h),p="loading",v="executed",m="failed";i.__dashjs_factory_name="FragmentModel";var y=d.default.getClassFactory(i);y.FRAGMENT_MODEL_LOADING=p,y.FRAGMENT_MODEL_EXECUTED=v,y.FRAGMENT_MODEL_CANCELED="canceled",y.FRAGMENT_MODEL_FAILED=m,n.default=y,t.exports=n.default},{10:10,13:13,166:166,8:8,9:9}],98:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){return i}function t(e){i=e,e&&r.trigger(u.default.MANIFEST_LOADED,{data:e})}var n=this.context,r=(0,o.default)(n).getInstance(),i=void 0;return{getValue:e,setValue:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(9),o=r(a),s=e(13),u=r(s),l=e(10),d=r(l);i.__dashjs_factory_name="ManifestModel",n.default=d.default.getSingletonFactory(i),t.exports=n.default},{10:10,13:13,9:9}],99:[function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){function e(e){Ge=e}function t(){return Ge}function n(e){Fe=e}function i(){return Fe}function a(e){Ne=e}function o(){return Ne}function u(e){Ce=e}function M(){return isNaN(Ce)?He?m:v:Ce}function C(e){Pe=e}function P(){return Pe}function L(e){Le=e}function x(){return Le}function k(e){xe=e}function F(){return xe}function N(e){ke=e}function U(){return ke}function B(e){Ie=e}function j(){return Ie}function G(e,t){Oe.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(Oe.ttl=t)}function K(){return Oe}function H(e,t){Me.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(Me.ttl=t)}function q(){return Me}function V(e){De=e}function Y(){return De}function z(e){Ue[s.HTTPRequest.MEDIA_SEGMENT_TYPE]=e}function W(e,t){Ue[e]=t}function Q(){return Ue[s.HTTPRequest.MEDIA_SEGMENT_TYPE]}function X(e){return Ue[e]}function J(e){Be[s.HTTPRequest.MEDIA_SEGMENT_TYPE]=e}function Z(e,t){Be[e]=t}function $(){return Be[s.HTTPRequest.MEDIA_SEGMENT_TYPE]}function ee(e){return Be[e]}function te(e){je=e}function ne(){return je}function re(e){we=e}function ie(){return we}function ae(e){Re=e}function oe(e){Ae=e}function se(){return Re}function ue(){return Ae}function le(e){Te=e}function de(){return Te}function fe(e){Se=e}function ce(){return Se}function he(e){be=e}function ge(){return be}function pe(e,t){e?Ke[e]=!!t:Object.keys(Ke).forEach(function(e){pe(e,t)})}function ve(e){var t=Ke[e];return void 0===t?Ke.default:t}function me(){return He}function ye(e){He=e}function _e(){}var Ee=void 0,Te=void 0,Se=void 0,be=void 0,Re=void 0,Ae=void 0,we=void 0,Ie=void 0,De=void 0,Oe=void 0,Me=void 0,Ce=void 0,Pe=void 0,Le=void 0,xe=void 0,ke=void 0,Fe=void 0,Ne=void 0,Ue=void 0,Be=void 0,je=void 0,Ge=void 0,Ke=void 0,He=void 0;return Ee={setBufferOccupancyABREnabled:e,getBufferOccupancyABREnabled:t,setBandwidthSafetyFactor:n,getBandwidthSafetyFactor:i,setAbandonLoadTimeout:a,getAbandonLoadTimeout:o,setLastBitrateCachingInfo:G,getLastBitrateCachingInfo:K,setLastMediaSettingsCachingInfo:H,getLastMediaSettingsCachingInfo:q,setStableBufferTime:u,getStableBufferTime:M,setBufferTimeAtTopQuality:C,getBufferTimeAtTopQuality:P,setBufferTimeAtTopQualityLongForm:L,getBufferTimeAtTopQualityLongForm:x,setLongFormContentDurationThreshold:k,getLongFormContentDurationThreshold:F,setRichBufferThreshold:N,getRichBufferThreshold:U,setBufferToKeep:B,getBufferToKeep:j,setBufferPruningInterval:V,getBufferPruningInterval:Y,setFragmentRetryAttempts:z,getFragmentRetryAttempts:Q,setRetryAttemptsForType:W,getRetryAttemptsForType:X,setFragmentRetryInterval:J,getFragmentRetryInterval:$,setRetryIntervalForType:Z,getRetryIntervalForType:ee,setWallclockTimeUpdateInterval:te,getWallclockTimeUpdateInterval:ne,setScheduleWhilePaused:re,getScheduleWhilePaused:ie,getUseSuggestedPresentationDelay:ce,setUseSuggestedPresentationDelay:fe,setLiveDelayFragmentCount:ae,getLiveDelayFragmentCount:se,getLiveDelay:ue,setLiveDelay:oe,setUseManifestDateHeaderTimeSource:le,getUseManifestDateHeaderTimeSource:de,setUTCTimingSources:he,getUTCTimingSources:ge,setXHRWithCredentialsForType:pe,getXHRWithCredentialsForType:ve,setFastSwitchEnabled:ye,getFastSwitchEnabled:me,reset:_e},function(){var e,t;be=[],Se=!1,Te=!0,we=!0,Ge=!1,He=!1,Oe={enabled:!0,ttl:d},Me={enabled:!0,ttl:f},Re=l,Ae=void 0,Ie=g,De=p,Ce=NaN,Pe=y,Le=_,xe=E,ke=T,Fe=c,Ne=h,je=D,Ke={default:O},e={},r(e,s.HTTPRequest.MPD_TYPE,R),r(e,s.HTTPRequest.XLINK_EXPANSION_TYPE,w),r(e,s.HTTPRequest.MEDIA_SEGMENT_TYPE,S),r(e,s.HTTPRequest.INIT_SEGMENT_TYPE,S),r(e,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,S),r(e,s.HTTPRequest.INDEX_SEGMENT_TYPE,S),r(e,s.HTTPRequest.OTHER_TYPE,S),Ue=e,t={},r(t,s.HTTPRequest.MPD_TYPE,A),r(t,s.HTTPRequest.XLINK_EXPANSION_TYPE,I),r(t,s.HTTPRequest.MEDIA_SEGMENT_TYPE,b),r(t,s.HTTPRequest.INIT_SEGMENT_TYPE,b),r(t,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,b),r(t,s.HTTPRequest.INDEX_SEGMENT_TYPE,b),r(t,s.HTTPRequest.OTHER_TYPE,b),Be=t}(),Ee}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=e(182),u={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso"},l=4,d=36e4,f=36e4,c=.9,h=1e4,g=30,p=30,v=12,m=20,y=30,_=60,E=600,T=20,S=3,b=1e3,R=3,A=500,w=1,I=500,D=50,O=!1;i.__dashjs_factory_name="MediaPlayerModel";var M=o.default.getSingletonFactory(i);M.DEFAULT_UTC_TIMING_SOURCE=u,n.default=M,t.exports=n.default},{10:10,182:182}],100:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&e.adapter&&(Y=e.adapter)}function t(){q.trigger(D.default.METRICS_CHANGED)}function n(e){q.trigger(D.default.METRIC_CHANGED,{mediaType:e}),t()}function r(e,t,r){q.trigger(D.default.METRIC_UPDATED,{mediaType:e,metric:t,value:r}),n(e)}function i(e,t,r){q.trigger(D.default.METRIC_ADDED,{mediaType:e,metric:t,value:r}),n(e)}function a(e){delete z[e],n(e)}function s(){z={},t()}function d(e){return z.hasOwnProperty(e)?z[e]:null}function c(e){var t;return z.hasOwnProperty(e)?t=z[e]:(t=new o.default,z[e]=t),t}function g(e,t,n){var r=c(e);r[t].push(n),r[t].length>K&&r[t].shift()}function v(e,t,n,r,i,a){var o=new u.default;return o.tcpid=t,o.dest=n,o.topen=r,o.tclose=i,o.tconnect=a,A(e,Y.metricsList.TCP_CONNECTION,o),o}function y(e,t,n,r){var i=new l.HTTPRequestTrace;return i.s=t,i.d=n,i.b=r,e.trace.push(i),e.interval||(e.interval=0),e.interval+=n,i}function T(e,t,n,r,i,a,o,s,u,d,f,c,h,g){var p=new l.HTTPRequest;return i&&i!==r&&(T(e,null,n,r,null,null,o,s,null,null,null,c,null,null),p.actualurl=i),p.tcpid=t,p.type=n,p.url=r,p.range=o,p.trequest=s,p.tresponse=u,p.responsecode=f,p._tfinish=d,p._stream=e,p._mediaduration=c,p._responseHeaders=h,p._serviceLocation=a,g?g.forEach(function(e){y(p,e.s,e.d,e.b)}):(delete p.interval,delete p.trace),A(e,Y.metricsList.HTTP_REQUEST,p),p}function b(e,t,n,r,i){var a=new f.default;return a.t=t,a.mt=n,a.to=r,i?a.lto=i:delete a.lto,A(e,Y.metricsList.TRACK_SWITCH,a),a}function A(e,t,n){g(e,t,n),i(e,t,n)}function I(e,t,n){var r=new h.default;return r.t=t,r.level=n,A(e,Y.metricsList.BUFFER_LEVEL,r),r}function O(e,t,n){var r=new p.default;return r.target=n,r.state=t,A(e,Y.metricsList.BUFFER_STATE,r),r}function M(e,t,n,r){var i=new m.default;return i.time=t,i.range=r,i.manifestInfo=n,A(e,Y.metricsList.DVR_INFO,i),i}function C(e,t){var n=new _.default,r=c(e).DroppedFrames;return n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,r.length>0&&r[r.length-1]==n?r[r.length-1]:(A(e,Y.metricsList.DROPPED_FRAMES,n),n)}function L(e,t,n,r,i,a,o,s,u){var l=new S.default;return l.mediaType=e,l.t=t,l.type=n,l.startTime=r,l.availabilityStartTime=i,l.duration=a,l.quality=o,l.range=s,l.state=u,A(e,Y.metricsList.SCHEDULING_INFO,l),l}function x(e,t,n){var r=new w.default;r.loadingRequests=t,r.executedRequests=n,c(e).RequestsQueue=r,i(e,Y.metricsList.REQUESTS_QUEUE,r)}function k(e,t,n,r,a,o,s,u,l,d){var f=new E.ManifestUpdate;return f.mediaType=e,f.type=t,f.requestTime=n,f.fetchTime=r,f.availabilityStartTime=a,f.presentationStartTime=o,f.clientTimeOffset=s,f.currentTime=u,f.buffered=l,f.latency=d,g("stream","ManifestUpdate",f),i(e,Y.metricsList.MANIFEST_UPDATE,f),f}function F(e,t){if(e){for(var n in t)e[n]=t[n];r(e.mediaType,Y.metricsList.MANIFEST_UPDATE,e)}}function N(e,t,n,i,a){if(e){var o=new E.ManifestUpdateStreamInfo;return o.id=t,o.index=n,o.start=i,o.duration=a,e.streamInfo.push(o),r(e.mediaType,Y.metricsList.MANIFEST_UPDATE_STREAM_INFO,e),o}return null}function U(e,t,n,i,a,o,s,u){if(e){var l=new E.ManifestUpdateTrackInfo;return l.id=t,l.index=n,l.streamIndex=i,l.mediaType=a,l.startNumber=s,l.fragmentInfoType=u,l.presentationTimeOffset=o,e.trackInfo.push(l),r(e.mediaType,Y.metricsList.MANIFEST_UPDATE_TRACK_INFO,e),l}return null}function B(e){return e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,A("stream",Y.metricsList.PLAY_LIST,e),e}function j(e){return A("stream",Y.metricsList.DVB_ERRORS,e),e}function G(e,t){var n=new P.default;return n._s=t,c(e).BolaState=[n],i(e,"BolaState",n),n}var K=1e3,H=this.context,q=(0,R.default)(H).getInstance(),V=void 0,Y=void 0,z=void 0;return V={metricsChanged:t,metricChanged:n,metricUpdated:r,metricAdded:i,clearCurrentMetricsForType:a,clearAllCurrentMetrics:s,getReadOnlyMetricsFor:d,getMetricsFor:c,addTcpConnection:v,addHttpRequest:T,addRepresentationSwitch:b,addBufferLevel:I,addBufferState:O,addDVRInfo:M,addDroppedFrames:C,addSchedulingInfo:L,addRequestsQueue:x,addManifestUpdate:k,updateManifestUpdateInfo:F,addManifestUpdateStreamInfo:N,addManifestUpdateRepresentationInfo:U,addPlayList:B,addDVBErrors:j,updateBolaState:G,setConfig:e},function(){z={}}(),V}Object.defineProperty(n,"__esModule",{value:!0});var a=e(171),o=r(a),s=e(188),u=r(s),l=e(182),d=e(185),f=r(d),c=e(178),h=r(c),g=e(179),p=r(g),v=e(180),m=r(v),y=e(181),_=r(y),E=e(183),T=e(187),S=r(T),b=e(9),R=r(b),A=e(186),w=r(A),I=e(13),D=r(I),O=e(10),M=r(O),C=e(177),P=r(C);i.__dashjs_factory_name="MetricsModel",n.default=M.default.getSingletonFactory(i),t.exports=n.default},{10:10,13:13,171:171,177:177,178:178,179:179,180:180,181:181,182:182,183:183,185:185,186:186,187:187,188:188,9:9}],101:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){a=new o.default,s=[],u=!1}function t(){return a}function n(){return s}function r(){return u}function i(e){function t(e,t,n,r){var i=r[0].split(/[=]/);return r.push({key:i[0],value:i[1]}),r.shift(),r}function n(e,t,n){return t>0&&(d&&0===s.length?s=n[t].split(/[&]/):f&&(r=n[t].split(/[&]/))),n}if(!e)return null;var r=[],i=new RegExp(/[?]/),o=new RegExp(/[#]/),l=new RegExp(/^(https:)?\/\//i),d=i.test(e),f=o.test(e);return u=l.test(e),e.split(/[?#]/).map(n),s.length>0&&(s=s.reduce(t,null)),r.length>0&&(r=r.reduce(t,null),r.forEach(function(e){a[e.key]=e.value})),e}var a=void 0,s=void 0,u=void 0;return{initialize:e,parseURI:i,getURIFragmentData:t,getURIQueryData:n,isManifestHTTPS:r}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(176),o=r(a),s=e(10),u=r(s);i.__dashjs_factory_name="URIQueryAndFragmentModel",n.default=u.default.getSingletonFactory(i),t.exports=n.default},{10:10,176:176}],102:[function(e,t,n){function r(){function e(){T=[]}function t(){y.playbackRate=S||1,y.removeEventListener("canplay",t)}function n(e){y&&(y.readyState<=2&&e>0?y.addEventListener("canplay",t):y.playbackRate=e)}function r(e){if(y.currentTime!=e)try{y.currentTime=e}catch(t){0===y.readyState&&t.code===t.INVALID_STATE_ERR&&setTimeout(function(){y.currentTime=e},400)}}function i(){return y}function a(e){y=e,y.preload="auto"}function o(e){e?y.src=e:(y.removeAttribute("src"),y.load())}function s(){return y.src}function u(){return E}function l(e){E=e}function d(){return _}function f(e){_=e,_.style.position="absolute",_.style.display="flex",_.style.overflow="hidden",_.style.pointerEvents="none",_.style.top=0,_.style.left=0}function c(e,t){v(e,t)}function h(){return T.length>0}function g(e){var t=void 0;null===e||y.seeking||-1!==T.indexOf(e)||(T.push(e),1===T.length&&(t=document.createEvent("Event"),t.initEvent("waiting",!0,!1),S=y.playbackRate,n(0),y.dispatchEvent(t)))}function p(e){var t=T.indexOf(e),r=void 0;null!==e&&(-1!==t&&T.splice(t,1),!1===h()&&0===y.playbackRate&&(n(S||1),y.paused||(r=document.createEvent("Event"),r.initEvent("playing",!0,!1),y.dispatchEvent(r))))}function v(e,t){t?g(e):p(e)}function m(){var e="webkitDroppedFrameCount"in y&&"webkitDecodedFrameCount"in y,t="getVideoPlaybackQuality"in y,n=null;return t?n=y.getVideoPlaybackQuality():e&&(n={droppedVideoFrames:y.webkitDroppedFrameCount,totalVideoFrames:y.webkitDroppedFrameCount+y.webkitDecodedFrameCount,creationTime:new Date}),n}var y=void 0,_=void 0,E=void 0,T=void 0,S=void 0;return{initialize:e,setCurrentTime:r,setStallState:c,getElement:i,setElement:a,setSource:o,getSource:s,getVideoContainer:u,setVideoContainer:l,getTTMLRenderingDiv:d,setTTMLRenderingDiv:f,getPlaybackQuality:m}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="VideoModel",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{10:10}],103:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(1),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(){r(this,e)}return i(e,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"===r.schemeIdUri.toLowerCase()&&"cenc"===r.value.toLowerCase()&&(t=r)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,r>0&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(t,n){var r=e.parsePSSHList(n);return r.hasOwnProperty(t.uuid.toLowerCase())?r[t.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e){return"pssh"in e?o.default.decodeArray(e.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(e){if(null===e)return[];for(var t=new DataView(e),n={},r=0;1;){var i,a,o,s,u=r;if(r>=t.buffer.byteLength)break;if(i=t.getUint32(r),a=r+i,r+=4,1886614376===t.getUint32(r))if(r+=4,0===(o=t.getUint8(r))||1===o){r++,r+=3,s="";var l,d;for(l=0;l<4;l++)d=t.getUint8(r+l).toString(16),s+=1===d.length?"0"+d:d;for(r+=4,s+="-",l=0;l<2;l++)d=t.getUint8(r+l).toString(16),s+=1===d.length?"0"+d:d;for(r+=2,s+="-",l=0;l<2;l++)d=t.getUint8(r+l).toString(16),s+=1===d.length?"0"+d:d;for(r+=2,s+="-",l=0;l<2;l++)d=t.getUint8(r+l).toString(16),s+=1===d.length?"0"+d:d;for(r+=2,s+="-",l=0;l<6;l++)d=t.getUint8(r+l).toString(16),s+=1===d.length?"0"+d:d;r+=6,s=s.toLowerCase(),t.getUint32(r),r+=4,n[s]=t.buffer.slice(u,a),r=a}else r=a;else r=a}return n}}]),e}();n.default=s,t.exports=n.default},{1:1}],104:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var n=null,i=(0,u.default)(r).getInstance();i.setConfig({log:e.log}),i.initialize();var a=t(e);return!n&&a&&(n=(0,o.default)(r).create({protectionModel:a,protectionKeyController:i,adapter:e.adapter,eventBus:e.eventBus,log:e.log}),e.capabilities.setEncryptedMediaSupported(!0)),n}function t(e){var t=e.log,i=e.eventBus,a=e.videoModel.getElement();return void 0!==a.onencrypted&&void 0!==a.mediaKeys&&void 0!==navigator.requestMediaKeySystemAccess&&"function"==typeof navigator.requestMediaKeySystemAccess?(t("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,c.default)(r).create({log:t,eventBus:i})):n(a,E)?(t("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,g.default)(r).create({log:t,eventBus:i,api:n(a,E)})):n(a,_)?(t("EME detected on this user agent! (ProtectionModel_01b)"),(0,v.default)(r).create({log:t,eventBus:i,api:n(a,_)})):(t("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null)}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof e[r[Object.keys(r)[0]]])return r}return null}var r=this.context;return{createProtectionSystem:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(106),o=r(a),s=e(107),u=r(s),l=e(105),d=r(l),f=e(112),c=r(f),h=e(113),g=r(h),p=e(111),v=r(p),m=e(10),y=r(m),_=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],E=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];i.__dashjs_factory_name="Protection";var T=y.default.getClassFactory(i);T.events=d.default,n.default=T,t.exports=n.default},{10:10,105:105,106:106,107:107,111:111,112:112,113:113}],105:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}},o=e(14),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}return i(t,e),t}(s.default),l=new u;n.default=l,t.exports=n.default},{14:14}],106:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){if(!L){var r;t||n||(r=R.getStreamsInfo(e)[0]),M=t||(r?R.getMediaInfoForType(e,r,"audio"):null),C=n||(r?R.getMediaInfoForType(e,r,"video"):null);var i=C||M,a=S.getSupportedKeySystemsFromContentProtection(i.contentProtection);a&&a.length>0&&y(a,!0),L=!0}}function n(e){var t=o.default.getPSSHForKeySystem(F,e);if(t){for(var n=b.getAllInitData(),r=0;r<n.length;r++)if(S.initDataEquals(t,n[r]))return void w("DRM: Ignoring initData because we have already seen it!");try{b.createKeySession(t,x)}catch(e){A.trigger(u.default.KEY_SESSION_CREATED,{data:null,error:"Error creating key session! "+e.message})}}else A.trigger(u.default.KEY_SESSION_CREATED,{data:null,error:"Selected key system is "+F.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!"})}function r(e){b.loadKeySession(e)}function i(e){b.removeKeySession(e)}function a(e){b.closeKeySession(e)}function s(e){b.setServerCertificate(e)}function l(e){e?(b.setMediaElement(e),A.on(u.default.NEED_KEY,T,this),A.on(u.default.INTERNAL_KEY_MESSAGE,E,this)):null===e&&(b.setMediaElement(e),A.off(u.default.NEED_KEY,T,this),A.off(u.default.INTERNAL_KEY_MESSAGE,E,this))}function f(e){x=e}function h(e){k=e}function g(e){P=e}function p(){l(null),F=void 0,b&&(b.reset(),b=null)}function m(e){var t=null,n=e.systemString;return P&&(t=n in P?P[n]:null),t}function y(e,t){var r=this,i=[],a=[];C&&a.push(new d.default(C.codec,k)),M&&i.push(new d.default(M.codec,k));var o,s=new c.default(i,a,"optional","temporary"===x?"optional":"required",[x]),l=[];if(F){for(o=0;o<e.length;o++)if(F===e[o].ks){var f=function(){l.push({ks:e[o].ks,configs:[s]});var i=function i(a){A.off(u.default.KEY_SYSTEM_ACCESS_COMPLETE,i,r),a.error?t||A.trigger(u.default.KEY_SYSTEM_SELECTED,{error:"DRM: KeySystem Access Denied! -- "+a.error}):(w("DRM: KeySystem Access Granted"),A.trigger(u.default.KEY_SYSTEM_SELECTED,{data:a.data}),n(e[o].initData))};return A.on(u.default.KEY_SYSTEM_ACCESS_COMPLETE,i,r),b.requestKeySystemAccess(l),"break"}();if("break"===f)break}}else if(void 0===F){F=null,O.push(e);for(var h=0;h<e.length;h++)l.push({ks:e[h].ks,configs:[s]});var g,p=function e(n){A.off(u.default.KEY_SYSTEM_ACCESS_COMPLETE,e,r),n.error?(F=void 0,A.off(u.default.INTERNAL_KEY_SYSTEM_SELECTED,v,r),t||A.trigger(u.default.KEY_SYSTEM_SELECTED,{data:null,error:"DRM: KeySystem Access Denied! -- "+n.error})):(g=n.data,w("DRM: KeySystem Access Granted ("+g.keySystem.systemString+")!  Selecting key system..."),b.selectKeySystem(g))},v=function e(i){if(A.off(u.default.INTERNAL_KEY_SYSTEM_SELECTED,e,r),A.off(u.default.KEY_SYSTEM_ACCESS_COMPLETE,p,r),i.error)F=void 0,t||A.trigger(u.default.KEY_SYSTEM_SELECTED,{data:null,error:"DRM: Error selecting key system! -- "+i.error});else{F=b.getKeySystem(),A.trigger(u.default.KEY_SYSTEM_SELECTED,{data:g});for(var a=0;a<O.length;a++)for(o=0;o<O[a].length;o++)if(F===O[a][o].ks){n(O[a][o].initData);break}}};A.on(u.default.INTERNAL_KEY_SYSTEM_SELECTED,v,r),A.on(u.default.KEY_SYSTEM_ACCESS_COMPLETE,p,r),b.requestKeySystemAccess(l)}else O.push(e)}function _(e,t){A.trigger(u.default.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function E(e){if(w("DRM: onKeyMessage"),e.error)return void w(e.error);var t=e.data;A.trigger(u.default.KEY_MESSAGE,{data:t});var n=t.messageType?t.messageType:"license-request",r=t.message,i=t.sessionToken,a=m(F),s=F.systemString,l=S.getLicenseServer(F,a,n),d={sessionToken:i,messageType:n};if(!l)return w("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+i.getSessionID()),void _(d);if(S.isClearKey(F)){var f=S.processClearKeyLicenseRequest(a,r);if(f)return w("DRM: ClearKey license request handled by application!"),_(d),void b.updateKeySession(i,f)}var c=new XMLHttpRequest,h=null;if(a&&a.serverURL){var g=a.serverURL;"string"==typeof g&&""!==g?h=g:"object"==typeof g&&g.hasOwnProperty(n)&&(h=g[n])}else a&&a.laURL&&""!==a.laURL?h=a.laURL:(h=F.getLicenseServerURLFromInitData(o.default.getPSSHData(i.initData)))||(h=e.data.laURL);if(!(h=l.getServerURLFromMessage(h,r,n)))return void _(d,"DRM: No license server URL specified!");c.open(l.getHTTPMethod(n),h,!0),c.responseType=l.getResponseType(s,n),c.onload=function(){200==this.status?(_(d),b.updateKeySession(i,l.getLicenseMessage(this.response,s,n))):_(d,"DRM: "+s+' update, XHR status is "'+this.statusText+'" ('+this.status+"), expected to be 200. readyState is "+this.readyState+".  Response is "+(this.response?l.getErrorResponse(this.response,s,n):"NONE"))},c.onabort=function(){_(d,"DRM: "+s+' update, XHR aborted. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)},c.onerror=function(){_(d,"DRM: "+s+' update, XHR error. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)};var p=function(e){var t;if(e)for(t in e)"authorization"===t.toLowerCase()&&(c.withCredentials=!0),c.setRequestHeader(t,e[t])};a&&p(a.httpRequestHeaders),p(F.getRequestHeadersFromMessage(r)),a&&a.withCredentials&&(c.withCredentials=!0),c.send(F.getLicenseRequestFromMessage(r))}function T(e){if(w("DRM: onNeedKey"),"cenc"!==e.key.initDataType)return void w("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);var t=e.key.initData;ArrayBuffer.isView(t)&&(t=t.buffer),w("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(t)));var n=S.getSupportedKeySystems(t,P);return 0===n.length?void w("DRM: Received needkey event with initData, but we don't support any of the key systems!"):void y(n,!1)}var S=e.protectionKeyController,b=e.protectionModel,R=e.adapter,A=e.eventBus,w=e.log,I=void 0,D=void 0,O=void 0,M=void 0,C=void 0,P=void 0,L=void 0,x=void 0,k=void 0,F=void 0;return I={initialize:t,createKeySession:n,loadKeySession:r,removeKeySession:i,closeKeySession:a,setServerCertificate:s,setMediaElement:l,setSessionType:f,setRobustnessLevel:h,setProtectionData:g,reset:p},function(){D=S.getKeySystems(),O=[],L=!1,x="temporary",k="",u.default.extend(v.default.events)}(),I}Object.defineProperty(n,"__esModule",{value:!0});var a=e(103),o=r(a),s=e(13),u=r(s),l=e(124),d=r(l),f=e(123),c=r(f),h=e(10),g=r(h),p=e(104),v=r(p);i.__dashjs_factory_name="ProtectionController",n.default=g.default.getClassFactory(i),t.exports=n.default},{10:10,103:103,104:104,123:123,124:124,13:13}],107:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&e.log&&(m=e.log)}function t(){_=[];var e;e=(0,c.default)(p).getInstance(),_.push(e),e=(0,d.default)(p).getInstance(),
_.push(e),e=(0,u.default)(p).getInstance(),_.push(e),T=e}function n(){return _}function r(e){for(var t=0;t<_.length;t++)if(_[t].systemString===e)return _[t];return null}function i(e){return e===T}function a(e,t){if(e.byteLength===t.byteLength){for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}return!1}function s(e){var t,n,r,i,a=[];if(e)for(r=0;r<_.length;++r)for(n=_[r],i=0;i<e.length;++i)if(t=e[i],t.schemeIdUri.toLowerCase()===n.schemeIdURI){var o=n.getInitData(t);o&&a.push({ks:_[r],initData:o})}return a}function l(e,t){var n,r=[],i=o.default.parsePSSHList(e);for(n=0;n<_.length;++n){var a=_[n].systemString,s=!t||a in t;_[n].uuid in i&&s&&r.push({ks:_[n],initData:i[_[n].uuid]})}return r}function f(e,t,n){if("license-release"===n||"individualization-request"===n)return null;var r=null;return t&&t.hasOwnProperty("drmtoday")?r=(0,g.default)(p).getInstance():"com.widevine.alpha"===e.systemString?r=(0,y.default)(p).getInstance():"com.microsoft.playready"===e.systemString?r=(0,v.default)(p).getInstance():"org.w3.clearkey"===e.systemString&&(r=(0,E.default)(p).getInstance()),r}function h(e,t){try{return T.getClearKeysFromProtectionData(e,t)}catch(e){return m("Failed to retrieve clearkeys from ProtectionData"),null}}var p=this.context,m=void 0,_=void 0,T=void 0;return{initialize:t,isClearKey:i,initDataEquals:a,getKeySystems:n,getKeySystemBySystemString:r,getSupportedKeySystemsFromContentProtection:s,getSupportedKeySystems:l,getLicenseServer:f,processClearKeyLicenseRequest:h,setConfig:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(103),o=r(a),s=e(108),u=r(s),l=e(110),d=r(l),f=e(109),c=r(f),h=e(115),g=r(h),p=e(116),v=r(p),m=e(117),y=r(m),_=e(114),E=r(_),T=e(10),S=r(T);i.__dashjs_factory_name="ProtectionKeyController",n.default=S.default.getSingletonFactory(i),t.exports=n.default},{10:10,103:103,108:108,109:109,110:110,114:114,115:115,116:116,117:117}],108:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<r.kids.length;a++){var s=r.kids[a],l=e.clearkeys.hasOwnProperty(s)?e.clearkeys[s]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+s+") is not known!");i.push(new o.default(s,l))}n=new u.default(i)}return n}function t(e){return d.default.parseInitDataFromContentProtection(e)}function n(){return null}function r(e){return new Uint8Array(e)}function i(){return null}return{uuid:h,schemeIdURI:p,systemString:g,getInitData:t,getRequestHeadersFromMessage:n,getLicenseRequestFromMessage:r,getLicenseServerURLFromInitData:i,getClearKeysFromProtectionData:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(121),o=r(a),s=e(118),u=r(s),l=e(103),d=r(l),f=e(10),c=r(f),h="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",g="org.w3.clearkey",p="urn:uuid:"+h;i.__dashjs_factory_name="KeySystemClearKey",n.default=c.default.getSingletonFactory(i),t.exports=n.default},{10:10,103:103,118:118,121:121}],109:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var t,n,r={},i=new DOMParser,o="utf16"===a?new Uint16Array(e):new Uint8Array(e);t=String.fromCharCode.apply(null,o),n=i.parseFromString(t,"application/xml");for(var s=n.getElementsByTagName("name"),u=n.getElementsByTagName("value"),l=0;l<s.length;l++)r[s[l].childNodes[0].nodeValue]=u[l].childNodes[0].nodeValue;return r.hasOwnProperty("Content")&&(r["Content-Type"]=r.Content,delete r.Content),r}function t(e){var t,n,r=null,i=new DOMParser,o="utf16"===a?new Uint16Array(e):new Uint8Array(e);if(t=String.fromCharCode.apply(null,o),n=i.parseFromString(t,"application/xml"),n.getElementsByTagName("Challenge")[0]){var s=n.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;s&&(r=c.default.decode(s))}return r}function n(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,i=new DOMParser,a=0;a<n;a++){var o=t.getUint16(r,!0);r+=2;var s=t.getUint16(r,!0);if(r+=2,1===o){var u=e.slice(r,r+s),l=String.fromCharCode.apply(null,new Uint16Array(u)),d=i.parseFromString(l,"application/xml");if(d.getElementsByTagName("LA_URL")[0]){var f=d.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(f)return f}if(d.getElementsByTagName("LUI_URL")[0]){var c=d.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(c)return c}}else r+=s}return null}function r(e){var t,n,r,i,a,s=new Uint8Array([112,115,115,104,0,0,0,0]),u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),l=0,d=null;if("pssh"in e)return o.default.parseInitDataFromContentProtection(e);if("pro"in e)d=c.default.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;d=c.default.decodeArray(e.prheader.__text)}return t=d.length,n=4+s.length+u.length+4+t,r=new ArrayBuffer(n),i=new Uint8Array(r),a=new DataView(r),a.setUint32(l,n),l+=4,i.set(s,l),l+=s.length,i.set(u,l),l+=u.length,a.setUint32(l,t),l+=4,i.set(d,l),l+=t,i.buffer}function i(e){if("utf8"!==e&&"utf16"!==e)throw new u.default("Illegal PlayReady message format! -- "+e);a=e}var a="utf16";return{uuid:h,schemeIdURI:p,systemString:g,getInitData:r,getRequestHeadersFromMessage:e,getLicenseRequestFromMessage:t,getLicenseServerURLFromInitData:n,setPlayReadyMessageFormat:i}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(103),o=r(a),s=e(165),u=r(s),l=e(10),d=r(l),f=e(1),c=r(f),h="9a04f079-9840-4286-ab92-e65be0885f95",g="com.microsoft.playready",p="urn:uuid:"+h;i.__dashjs_factory_name="KeySystemPlayReady",n.default=d.default.getSingletonFactory(i),t.exports=n.default},{1:1,10:10,103:103,165:165}],110:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){return o.default.parseInitDataFromContentProtection(e)}function t(){return null}function n(e){return new Uint8Array(e)}function r(){return null}return{uuid:l,schemeIdURI:f,systemString:d,getInitData:e,getRequestHeadersFromMessage:t,getLicenseRequestFromMessage:n,getLicenseServerURLFromInitData:r}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(103),o=r(a),s=e(10),u=r(s),l="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",d="com.widevine.alpha",f="urn:uuid:"+l;i.__dashjs_factory_name="KeySystemWidevine",n.default=u.default.getSingletonFactory(i),t.exports=n.default},{10:10,103:103}],111:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){O&&b();for(var e=0;e<x.length;e++)h(x[e]);A.trigger(y.default.TEARDOWN_COMPLETE)}function n(){return M}function r(){for(var e=[],t=0;t<L.length;t++)e.push(L[t].initData);for(var t=0;t<x.length;t++)e.push(x[t].initData);return e}function i(e){var t=O;t||(t=document.createElement("video"));for(var n=!1,r=0;r<e.length;r++)for(var i=e[r].ks.systemString,a=e[r].configs,o=null,s=null,u=0;u<a.length;u++){var l=a[u].videoCapabilities;if(l&&0!==l.length){s=[];for(var d=0;d<l.length;d++)""!==t.canPlayType(l[d].contentType,i)&&s.push(l[d])}if(s&&(!s||0!==s.length)){n=!0;var f=new g.default(o,s),c=C.getKeySystemBySystemString(i);A.trigger(y.default.KEY_SYSTEM_ACCESS_COMPLETE,{data:new v.default(c,f)});break}}n||A.trigger(y.default.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function a(e){M=e.keySystem,A.trigger(y.default.INTERNAL_KEY_SYSTEM_SELECTED)}function s(e){O!==e&&(O&&b(),(O=e)&&(O.addEventListener(I.keyerror,F),O.addEventListener(I.needkey,F),O.addEventListener(I.keymessage,F),O.addEventListener(I.keyadded,F),A.trigger(y.default.VIDEO_ELEMENT_SELECTED)))}function l(e){if(!M)throw new Error("Can not create sessions until you have selected a key system");if(k||0===x.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return L.push(t),O[I.generateKeyRequest](M.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")}function f(e,t){var n=e.sessionID;if(C.isClearKey(M))for(var r=0;r<t.keyPairs.length;r++)O[I.addKey](M.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else O[I.addKey](M.systemString,new Uint8Array(t),e.initData,n)}function h(e){O[I.cancelKeyRequest](M.systemString,e.sessionID)}function p(){}function m(){}function _(){}function T(){return{handleEvent:function(e){var t=null;switch(e.type){case I.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;A.trigger(y.default.NEED_KEY,{key:new u.default(n,"cenc")});break;case I.keyerror:if(t=S(x,e.sessionId),t||(t=S(L,e.sessionId)),t){var r="";switch(e.errorCode.code){case 1:r+="MEDIA_KEYERR_UNKNOWN - An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:r+="MEDIA_KEYERR_CLIENT - The Key System could not be installed or updated.";break;case 3:r+="MEDIA_KEYERR_SERVICE - The message passed into update indicated an error from the license service.";break;case 4:r+="MEDIA_KEYERR_OUTPUT - There is no available output device with the required characteristics for the content protection system.";break;case 5:r+="MEDIA_KEYERR_HARDWARECHANGE - A hardware configuration change caused a content protection error.";break;case 6:r+="MEDIA_KEYERR_DOMAIN - An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain."}r+="  System Code = "+e.systemCode,A.trigger(y.default.KEY_ERROR,{data:new d.default(t,r)})}else w("No session token found for key error");break;case I.keyadded:t=S(x,e.sessionId),t||(t=S(L,e.sessionId)),t?(w("DRM: Key added."),A.trigger(y.default.KEY_ADDED,{data:t})):w("No session token found for key added");break;case I.keymessage:if(k=null!==e.sessionId&&void 0!==e.sessionId,k?!(t=S(x,e.sessionId))&&L.length>0&&(t=L.shift(),x.push(t),t.sessionID=e.sessionId):L.length>0&&(t=L.shift(),x.push(t),0!==L.length&&P.mediaKeyMessageError("Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!")),t){var i=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=i,A.trigger(y.default.INTERNAL_KEY_MESSAGE,{data:new c.default(t,i,e.defaultURL)})}else w("No session token found for key message")}}}}function S(e,t){if(t&&e){for(var n=e.length,r=0;r<n;r++)if(e[r].sessionID==t)return e[r];return null}return null}function b(){O.removeEventListener(I.keyerror,F),O.removeEventListener(I.needkey,F),O.removeEventListener(I.keymessage,F),O.removeEventListener(I.keyadded,F)}var R=this.context,A=e.eventBus,w=e.log,I=e.api,D=void 0,O=void 0,M=void 0,C=void 0,P=void 0,L=void 0,x=void 0,k=void 0,F=void 0;return D={getAllInitData:r,requestKeySystemAccess:i,getKeySystem:n,selectKeySystem:a,setMediaElement:s,createKeySession:l,updateKeySession:f,closeKeySession:h,setServerCertificate:p,loadKeySession:m,removeKeySession:_,reset:t},function(){O=null,M=null,L=[],x=[],C=(0,o.default)(R).getInstance(),P=(0,E.default)(R).getInstance(),F=T()}(),D}Object.defineProperty(n,"__esModule",{value:!0});var a=e(107),o=r(a),s=e(125),u=r(s),l=e(119),d=r(l),f=e(120),c=r(f),h=e(123),g=r(h),p=e(122),v=r(p),m=e(13),y=r(m),_=e(152),E=r(_),T=e(10),S=r(T);i.__dashjs_factory_name="ProtectionModel_01b",n.default=S.default.getClassFactory(i),t.exports=n.default},{10:10,107:107,119:119,120:120,122:122,123:123,125:125,13:13,152:152}],112:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){var e,t=D.length;if(0!==t)for(var n=function(e){S(e),0===D.length&&(w?(w.removeEventListener("encrypted",O),w.setMediaKeys(null).then(function(){P.trigger(v.default.TEARDOWN_COMPLETE)})):P.trigger(v.default.TEARDOWN_COMPLETE))},r=0;r<t;r++)e=D[r],function(t){e.session.closed.then(function(){n(t)}),E(e).catch(function(){n(t)})}(e);else P.trigger(v.default.TEARDOWN_COMPLETE)}function n(){return A}function r(){for(var e=[],t=0;t<D.length;t++)e.push(D[t].initData);return e}function i(e){_(e,0)}function a(e){e.mksa.createMediaKeys().then(function(t){A=e.keySystem,I=t,w&&w.setMediaKeys(I),P.trigger(v.default.INTERNAL_KEY_SYSTEM_SELECTED)}).catch(function(){P.trigger(v.default.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})}function s(e){w!==e&&(w&&(w.removeEventListener("encrypted",O),w.setMediaKeys(null)),(w=e)&&(w.addEventListener("encrypted",O),I&&w.setMediaKeys(I)))}function l(e){if(!A||!I)throw new Error("Can not set server certificate until you have selected a key system");I.setServerCertificate(e).then(function(){L("DRM: License server certificate successfully updated."),P.trigger(v.default.SERVER_CERTIFICATE_UPDATED)}).catch(function(e){P.trigger(v.default.SERVER_CERTIFICATE_UPDATED,{error:"Error updating server certificate -- "+e.name})})}function f(e,t){if(!A||!I)throw new Error("Can not create sessions until you have selected a key system");var n=I.createSession(t),r=b(n,e,t);n.generateRequest("cenc",e).then(function(){L("DRM: Session created.  SessionID = "+r.getSessionID()),P.trigger(v.default.KEY_SESSION_CREATED,{data:r})}).catch(function(e){S(r),P.trigger(v.default.KEY_SESSION_CREATED,{data:null,error:"Error generating key request -- "+e.name})})}function h(e,t){var n=e.session;M.isClearKey(A)&&(t=t.toJWK()),n.update(t).catch(function(t){P.trigger(v.default.KEY_ERROR,{data:new d.default(e,"Error sending update() message! "+t.name)})})}function p(e){if(!A||!I)throw new Error("Can not load sessions until you have selected a key system");var t=I.createSession();t.load(e).then(function(n){if(n){var r=b(t);L("DRM: Session created.  SessionID = "+r.getSessionID()),P.trigger(v.default.KEY_SESSION_CREATED,{data:r})}else P.trigger(v.default.KEY_SESSION_CREATED,{data:null,error:"Could not load session! Invalid Session ID ("+e+")"})}).catch(function(t){P.trigger(v.default.KEY_SESSION_CREATED,{data:null,error:"Could not load session ("+e+")! "+t.name})})}function m(e){e.session.remove().then(function(){L("DRM: Session removed.  SessionID = "+e.getSessionID()),P.trigger(v.default.KEY_SESSION_REMOVED,{data:e.getSessionID()})},function(t){P.trigger(v.default.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionID()+"). "+t.name})})}function y(e){E(e).catch(function(t){S(e),P.trigger(v.default.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionID()+") "+t.name})})}function _(e,t){!function(t){var n=e[t].ks,r=e[t].configs;navigator.requestMediaKeySystemAccess(n.systemString,r).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,r=new g.default(n,t);r.mksa=e,P.trigger(v.default.KEY_SYSTEM_ACCESS_COMPLETE,{data:r})}).catch(function(){++t<e.length?_(e,t):P.trigger(v.default.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied!"})})}(t)}function E(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function T(){return{handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;P.trigger(v.default.NEED_KEY,{key:new u.default(t,e.initDataType)})}}}}}function S(e){for(var t=0;t<D.length;t++)if(D[t]===e){D.splice(t,1);break}}function b(e,t,n){var r={session:e,initData:t,handleEvent:function(e){switch(e.type){case"keystatuseschange":P.trigger(v.default.KEY_STATUSES_CHANGED,{data:this});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;P.trigger(v.default.INTERNAL_KEY_MESSAGE,{data:new c.default(this,t,void 0,e.messageType)})}},getSessionID:function(){return e.sessionId},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getSessionType:function(){return n}};return e.addEventListener("keystatuseschange",r),e.addEventListener("message",r),e.closed.then(function(){S(r),L("DRM: Session closed.  SessionID = "+r.getSessionID()),P.trigger(v.default.KEY_SESSION_CLOSED,{data:r.getSessionID()})}),D.push(r),r}var R,A,w,I,D,O,M,C=this.context,P=e.eventBus,L=e.log;return R={getAllInitData:r,requestKeySystemAccess:i,getKeySystem:n,selectKeySystem:a,setMediaElement:s,setServerCertificate:l,createKeySession:f,updateKeySession:h,loadKeySession:p,removeKeySession:m,closeKeySession:y,reset:t},function(){A=null,w=null,I=null,D=[],M=(0,o.default)(C).getInstance(),O=T()}(),R}Object.defineProperty(n,"__esModule",{value:!0});var a=e(107),o=r(a),s=e(125),u=r(s),l=e(119),d=r(l),f=e(120),c=r(f),h=e(122),g=r(h),p=e(13),v=r(p),m=e(10),y=r(m);i.__dashjs_factory_name="ProtectionModel_21Jan2015",n.default=y.default.getClassFactory(i),t.exports=n.default},{10:10,107:107,119:119,120:120,122:122,125:125,13:13}],113:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){try{for(var e=0;e<P.length;e++)h(P[e]);D&&D.removeEventListener(w.needkey,L),R.trigger(y.default.TEARDOWN_COMPLETE)}catch(e){R.trigger(y.default.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function n(){return O}function r(){for(var e=[],t=0;t<P.length;t++)e.push(P[t].initData);return e}function i(e){for(var t=!1,n=0;n<e.length;n++)for(var r=e[n].ks.systemString,i=e[n].configs,a=null,o=null,s=0;s<i.length;s++){var u=i[s].audioCapabilities,l=i[s].videoCapabilities;if(u&&0!==u.length){a=[];for(var d=0;d<u.length;d++)window[w.MediaKeys].isTypeSupported(r,u[d].contentType)&&a.push(u[d])}if(l&&0!==l.length){o=[];for(var f=0;f<l.length;f++)window[w.MediaKeys].isTypeSupported(r,l[f].contentType)&&o.push(l[f])}if(!(!a&&!o||a&&0===a.length||o&&0===o.length)){t=!0;var c=new g.default(a,o),h=x.getKeySystemBySystemString(r);R.trigger(y.default.KEY_SYSTEM_ACCESS_COMPLETE,{data:new v.default(h,c)});break}}t||R.trigger(y.default.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function a(e){try{M=e.mediaKeys=new window[w.MediaKeys](e.keySystem.systemString),O=e.keySystem,C=e,D&&T(),R.trigger(y.default.INTERNAL_KEY_SYSTEM_SELECTED)}catch(e){R.trigger(y.default.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+O.systemString+")! Could not create MediaKeys -- TODO"})}}function s(e){D!==e&&(D&&D.removeEventListener(w.needkey,L),(D=e)&&(D.addEventListener(w.needkey,L),M&&T()))}function l(e){if(!O||!M||!C)throw new Error("Can not create sessions until you have selected a key system");var t=null;if(null!==C.ksConfiguration.videoCapabilities&&C.ksConfiguration.videoCapabilities.length>0&&(t=C.ksConfiguration.videoCapabilities[0]),null===t&&null!==C.ksConfiguration.audioCapabilities&&C.ksConfiguration.audioCapabilities.length>0&&(t=C.ksConfiguration.audioCapabilities[0]),null===t)throw new Error("Can not create sessions for unknown content types.");var n=t.contentType,r=M.createSession(n,new Uint8Array(e)),i=S(r,e);r.addEventListener(w.error,i),r.addEventListener(w.message,i),r.addEventListener(w.ready,i),r.addEventListener(w.close,i),P.push(i),A("DRM: Session created.  SessionID = "+i.getSessionID()),R.trigger(y.default.KEY_SESSION_CREATED,{data:i})}function f(e,t){var n=e.session;x.isClearKey(O)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t))}function h(e){var t=e.session;t.removeEventListener(w.error,e),t.removeEventListener(w.message,e),t.removeEventListener(w.ready,e),t.removeEventListener(w.close,e);for(var n=0;n<P.length;n++)if(P[n]===e){P.splice(n,1);break}t[w.release]()}function p(){}function m(){}function _(){}function E(){return{handleEvent:function(e){switch(e.type){case w.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;R.trigger(y.default.NEED_KEY,{key:new u.default(t,"cenc")})}}}}}function T(){var e=null,t=function(){D.removeEventListener("loadedmetadata",e),D[w.setMediaKeys](M),R.trigger(y.default.VIDEO_ELEMENT_SELECTED)};D.readyState>=1?t():(e=t.bind(this),D.addEventListener("loadedmetadata",e))}function S(e,t){return{session:e,initData:t,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case w.error:;R.trigger(y.default.KEY_ERROR,{data:new d.default(this,"KeyError")});break;case w.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;R.trigger(y.default.INTERNAL_KEY_MESSAGE,{data:new c.default(this,t,e.destinationURL)});break;case w.ready:A("DRM: Key added."),R.trigger(y.default.KEY_ADDED);break;case w.close:A("DRM: Session closed.  SessionID = "+this.getSessionID()),R.trigger(y.default.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}}}var b=this.context,R=e.eventBus,A=e.log,w=e.api,I=void 0,D=void 0,O=void 0,M=void 0,C=void 0,P=void 0,L=void 0,x=void 0;return I={getAllInitData:r,requestKeySystemAccess:i,getKeySystem:n,selectKeySystem:a,setMediaElement:s,createKeySession:l,updateKeySession:f,closeKeySession:h,setServerCertificate:p,loadKeySession:m,removeKeySession:_,reset:t},function(){D=null,O=null,M=null,C=null,P=[],x=(0,o.default)(b).getInstance(),L=E()}(),I}Object.defineProperty(n,"__esModule",{value:!0});var a=e(107),o=r(a),s=e(125),u=r(s),l=e(119),d=r(l),f=e(120),c=r(f),h=e(123),g=r(h),p=e(122),v=r(p),m=e(13),y=r(m),_=e(10),E=r(_);i.__dashjs_factory_name="ProtectionModel_3Feb2014",n.default=E.default.getClassFactory(i),t.exports=n.default},{10:10,107:107,119:119,120:120,122:122,123:123,125:125,13:13}],114:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var r=0;r<n.kids.length;r++)e+=n.kids[r]+"&";return e=e.substring(0,e.length-1)}function t(){return"GET"}function n(){return"json"}function r(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var r=e.keys[n],i=r.kid.replace(/=/g,""),a=r.k.replace(/=/g,"");t.push(new o.default(i,a))}return new u.default(t)}function i(e){return String.fromCharCode.apply(null,new Uint8Array(e))}return{getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:r,getErrorResponse:i}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(121),o=r(a),s=e(118),u=r(s),l=e(10),d=r(l);i.__dashjs_factory_name="ClearKey",n.default=d.default.getSingletonFactory(i),t.exports=n.default},{10:10,118:118,121:121}],115:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){return e}function t(){return"POST"}function n(e){return a[e].responseType}function r(e,t){return a[t].getLicenseMessage(e)}function i(e,t){return a[t].getErrorResponse(e)}var a={"com.widevine.alpha":{responseType:"json",getLicenseMessage:function(e){return u.default.decodeArray(e.license)},getErrorResponse:function(e){return e}},"com.microsoft.playready":{responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}};return{getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:r,getErrorResponse:i}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(1),u=r(s);i.__dashjs_factory_name="DRMToday",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{1:1,10:10}],116:[function(e,t,n){function r(){function e(e){return e}function t(){return"POST"}function n(){return"arraybuffer"}function r(e){return e}function i(e){return String.fromCharCode.apply(null,new Uint8Array(e))}return{getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:r,getErrorResponse:i}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="PlayReady",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{10:10}],117:[function(e,t,n){function r(){function e(e){return e}function t(){return"POST"}function n(){return"arraybuffer"}function r(e){return e}function i(e){return String.fromCharCode.apply(null,new Uint8Array(e))}return{getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:r,getErrorResponse:i}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="Widevine",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{10:10}],118:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){if(r(this,e),n&&"persistent"!==n&&"temporary"!==n)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=t,this.type=n}return i(e,[{key:"toJWK",value:function(){var e,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r)}this.type&&(n.type=this.type);var i=JSON.stringify(n),a=i.length,o=new ArrayBuffer(a),s=new Uint8Array(o);for(e=0;e<a;e++)s[e]=i.charCodeAt(e);return o}}]),e}();n.default=a,t.exports=n.default},{}],119:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(t,n){r(this,e),this.sessionToken=t,this.error=n};n.default=i,t.exports=n.default},{}],120:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(t,n,i,a){r(this,e),this.sessionToken=t,this.message=n,this.defaultURL=i,this.messageType=a||"license-request"};n.default=i,t.exports=n.default},{}],121:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(t,n){r(this,e),this.keyID=t,this.key=n};n.default=i,t.exports=n.default},{}],122:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(t,n){r(this,e),this.keySystem=t,this.ksConfiguration=n};n.default=i,t.exports=n.default},{}],123:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(t,n,i,a,o){r(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=i,this.persistentState=a,this.sessionTypes=o};n.default=i,t.exports=n.default},{}],124:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(t,n){r(this,e),this.contentType=t,this.robustness=n};n.default=i,t.exports=n.default},{}],125:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(t,n){r(this,e),this.initData=t,this.initDataType=n};n.default=i,t.exports=n.default},{}],126:[function(e,t,n){function r(){function e(e,t){var n=t.droppedVideoFrames-i;i=t.droppedVideoFrames;var o=t.totalVideoFrames-a;a=t.totalVideoFrames,r[e]?(r[e].droppedVideoFrames+=n,r[e].totalVideoFrames+=o):r[e]={droppedVideoFrames:n,totalVideoFrames:o}}function t(){return r}function n(e){r=[],i=e.droppedVideoFrames,a=e.totalVideoFrames}var r=[],i=0,a=0;return{push:e,getFrameHistory:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="DroppedFramesHistory";var o=a.default.getClassFactory(r);n.default=o,t.exports=n.default},{10:10}],127:[function(e,t,n){function r(e){function t(){return c.mediaInfo.streamInfo}function n(){return c.mediaInfo}function r(){return c}function i(){return g}function a(){return c.mediaInfo.streamInfo.manifestInfo}function o(){return h}function s(){return p}function u(){return v}function l(){return m}function d(){return y}function f(){return _}var c=e.streamProcessor.getCurrentRepresentationInfo(),h=e.streamProcessor,g=e.currentValue,p=e.playbackIndex,v=e.switchHistory,m=e.droppedFramesHistory,y=e.currentRequest,_=e.hasRichBuffer;return{getCurrentValue:i,getManifestInfo:a,getMediaInfo:n,getPlaybackIndex:s,getDroppedFramesHistory:l,getCurrentRequest:d,getSwitchHistory:u,getStreamInfo:t,getStreamProcessor:o,getTrackInfo:r,hasRichBuffer:f}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="RulesContext",n.default=a.default.getClassFactory(r),t.exports=n.default},{10:10}],128:[function(e,t,n){function r(e,t){return{value:void 0===e?o:e,reason:void 0===t?null:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=-1;r.__dashjs_factory_name="SwitchRequest";var s=a.default.getClassFactory(r);s.NO_CHANGE=o,n.default=s,t.exports=n.default},{10:10}],129:[function(e,t,n){function r(){function e(e){r[e.oldValue]||(r[e.oldValue]={noDrops:0,drops:0,dropSize:0});var t=e.newValue-e.oldValue,n=t<0?1:0,a=n?-t:0,s=n?0:1;if(r[e.oldValue].drops+=n,r[e.oldValue].dropSize+=a,r[e.oldValue].noDrops+=s,i.push({idx:e.oldValue,noDrop:s,drop:n,dropSize:a}),i.length>o){var u=i.shift();r[u.idx].drops-=u.drop,r[u.idx].dropSize-=u.dropSize,r[u.idx].noDrops-=u.noDrop}}function t(){return r}function n(){r=[],i=[]}var r=[],i=[];return{push:e,getSwitchRequests:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=8;r.__dashjs_factory_name="SwitchRequestHistory";var s=a.default.getClassFactory(r);n.default=s,t.exports=n.default},{10:10}],130:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){l=[],f=[];var e=(0,S.default)(s).getInstance(),t=(0,R.default)(s).getInstance();(0,E.default)(s).getInstance().getBufferOccupancyABREnabled()?(l.push((0,v.default)(s).create({metricsModel:e,dashMetrics:t})),f.push((0,y.default)(s).create({metricsModel:e,dashMetrics:t}))):(l.push((0,o.default)(s).create({metricsModel:e,dashMetrics:t})),l.push((0,u.default)(s).create({metricsModel:e})),l.push((0,g.default)(s).create()),l.push((0,c.default)(s).create()),f.push((0,d.default)(s).create()))}function t(e){switch(e){case O:return l;case M:return f;default:return null}}function n(e){return e.filter(function(e){return e.value>D.default.NO_CHANGE})}function r(e){if(0!==e.length)return e.reduce(function(e,t){return e.value<t.value?e:t})}function i(e){return r(n(l.map(function(t){return t.getMaxIndex(e)})))||(0,D.default)(s).create()}function a(e){return r(n(f.map(function(t){return t.shouldAbandon(e)})))||(0,D.default)(s).create()}var s=this.context,l=void 0,f=void 0;return{initialize:e,getRules:t,getMaxQuality:i,shouldAbandonFragment:a}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(137),o=r(a),s=e(135),u=r(s),l=e(131),d=r(l),f=e(134),c=r(f),h=e(136),g=r(h),p=e(133),v=r(p),m=e(132),y=r(m),_=e(99),E=r(_),T=e(100),S=r(T),b=e(17),R=r(b),A=e(10),w=r(A),I=e(128),D=r(I),O="qualitySwitchRules",M="abandonFragmentRules";i.__dashjs_factory_name="ABRRulesCollection";var C=w.default.getSingletonFactory(i);C.QUALITY_SWITCH_RULES=O,C.ABANDON_FRAGMENT_RULES=M,n.default=C,t.exports=n.default},{10:10,100:100,128:128,131:131,132:132,133:133,134:134,135:135,136:136,137:137,17:17,99:99}],131:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){p={},m={},y=[],_=(0,u.default)(h).getInstance(),E=(0,d.default)(h).getInstance(),
T=(0,c.default)(h).getInstance()}function t(e,t){p[e]=p[e]||{},p[e][t]=p[e][t]||{}}function n(e,t){y[e]=y[e]||[],y[e].push(t)}function r(e){var r=e.getMediaInfo(),a=r.type,u=e.getCurrentRequest(),d=(0,o.default)(h).create(o.default.NO_CHANGE,{name:i.__dashjs_factory_name});if(!isNaN(u.index)){t(a,u.index);var c=_.getStableBufferTime();if(E.getCurrentBufferLevel(T.getReadOnlyMetricsFor(a))>c)return d;var v=p[a][u.index];if(null===v||null===u.firstByteDate||m.hasOwnProperty(v.id))return d;if(void 0===v.firstByteTime&&(y[a]=[],v.firstByteTime=u.firstByteDate.getTime(),v.segmentDuration=u.duration,v.bytesTotal=u.bytesTotal,v.id=u.index),v.bytesLoaded=u.bytesLoaded,v.elapsedTime=(new Date).getTime()-v.firstByteTime,v.bytesLoaded>0&&v.elapsedTime>0&&n(a,Math.round(8*v.bytesLoaded/v.elapsedTime)),y[a].length>=f&&v.elapsedTime>l&&v.bytesLoaded<v.bytesTotal){var S=y[a].reduce(function(e,t){return e+t},0);if(v.measuredBandwidthInKbps=Math.round(S/y[a].length),v.estimatedTimeOfDownload=+(8*v.bytesTotal/v.measuredBandwidthInKbps/1e3).toFixed(2),v.estimatedTimeOfDownload<v.segmentDuration*s||0===e.getTrackInfo().quality)return d;if(!m.hasOwnProperty(v.id)){var b=e.getStreamProcessor().getABRController(),R=v.bytesTotal-v.bytesLoaded,A=b.getBitrateList(r),w=b.getQualityForBitrate(r,v.measuredBandwidthInKbps*_.getBandwidthSafetyFactor());R>v.bytesTotal*A[w].bitrate/A[b.getQualityFor(a,r.streamInfo)].bitrate&&(d.value=w,d.reason.throughput=v.measuredBandwidthInKbps,d.reason.fragmentID=v.id,m[v.id]=v,g("AbandonRequestsRule ( ",a,"frag id",v.id,") is asking to abandon and switch to quality to ",w," measured bandwidth was",v.measuredBandwidthInKbps),delete p[a][v.id])}}else v.bytesLoaded===v.bytesTotal&&delete p[a][v.id]}return d}function a(){e()}var s=1.8,l=500,f=5,h=this.context,g=(0,v.default)(h).getInstance().log,p=void 0,m=void 0,y=void 0,_=void 0,E=void 0,T=void 0,S={shouldAbandon:r,reset:a};return e(),S}Object.defineProperty(n,"__esModule",{value:!0});var a=e(128),o=r(a),s=e(99),u=r(s),l=e(17),d=r(l),f=e(100),c=r(f),h=e(10),g=r(h),p=e(8),v=r(p);i.__dashjs_factory_name="AbandonRequestsRule",n.default=g.default.getClassFactory(i),t.exports=n.default},{10:10,100:100,128:128,17:17,8:8,99:99}],132:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){m[e]={index:t,quality:n}}function n(e,t,n){var r=m[e];return!r||t!==r.index||n<r.quality}function r(e){var r=e.getMediaInfo(),a=r.type,u=p.getReadOnlyMetricsFor(a),c=e.getCurrentRequest(),v=(0,o.default)(d).create(o.default.NO_CHANGE,{name:i.__dashjs_factory_name});if(0===u.BolaState.length)return f("WARNING: executing BolaAbandonRule before initializing BolaRule"),m[a]=null,v;var y=u.BolaState[0]._s,_=c.index,E=c.quality;if(isNaN(_)||0===E||!n(a,_,E)||!c.firstByteDate)return v;var T=Date.now(),S=T-c.firstByteDate.getTime(),b=c.bytesLoaded,R=c.bytesTotal,A=R-b,w=c.duration,I=h.getCurrentBufferLevel(u)?h.getCurrentBufferLevel(u):0,D=I+y.placeholderBuffer,O=8*b/(.001*S),M=y.bandwidthSafetyFactor*O,C=.001*(c.firstByteDate.getTime()-c.requestStartDate.getTime());C<.001*l&&(C=.001*l);var P=C+8*R/M,L="";g.default.BOLA_DEBUG&&(L="index="+_+" quality="+E+" bytesLoaded/bytesTotal="+b+"/"+R+" bufferLevel="+I+" timeSince1stByte="+(S/1e3).toFixed(3)+" estThroughput="+(M/1e6).toFixed(3)+" latency="+C.toFixed(3));var x=R*y.bitrates[0]/y.bitrates[E],k=A-C*M/8;if(k<1&&(k=1),S<s||A<=x||I>y.bufferTarget||k<=x||P<=w)return v;var F=D-C;F<0&&(F=0);for(var N=0;N+1<E&&R*y.bitrates[N+1]/y.bitrates[E]<k;)++N;var U=E;if(y.state===g.default.BOLA_STATE_STARTUP){U=0;for(var B=0;B<=N&&!(8*(x=R*y.bitrates[B]/y.bitrates[E])/w>M);++B)U=B}else for(var j=(y.Vp*(y.utilities[E]+y.gp)-F)/k,B=0;B<=N;++B){x=R*y.bitrates[B]/y.bitrates[E];var G=(y.Vp*(y.utilities[B]+y.gp)-F)/x;G>j&&(U=B,j=G)}var K=y.rebufferSafetyFactor*O*(I-C)/8;if(U===E&&k>K&&(U=N),U===E)return v;for(;U>0&&!((x=R*y.bitrates[U]/y.bitrates[E])<=K);)--U;var H=NaN;if(U>0){var q=y.utilities[U],V=y.utilities[U-1],G=y.bitrates[U],Y=y.bitrates[U-1];H=y.Vp*((G*V-Y*q)/(G-Y)+y.gp)}else{var q=y.utilities[0],V=y.utilities[1],G=y.bitrates[0],Y=y.bitrates[1];H=y.Vp*((G*V-Y*q)/(G-Y)+y.gp),H-=w}return D>H&&(y.placeholderBuffer=H-I,y.placeholderBuffer<0&&(y.placeholderBuffer=0)),y.lastQuality=U,p.updateBolaState(a,y),g.default.BOLA_DEBUG&&f("BolaDebug "+a+" BolaAbandonRule abandon to "+U+" - "+L),t(a,_,E),v.value=U,v.reason.state=y.state,v.reason.throughput=O,v.reason.bufferLevel=I,v.reason.bytesLoaded=c.bytesLoaded,v.reason.bytesTotal=c.bytesTotal,v.reason.elapsedTimeMs=S,v}function a(){m={}}var s=500,l=200,d=this.context,f=(0,c.default)(d).getInstance().log,h=e.dashMetrics,p=e.metricsModel,v=void 0,m=void 0,y=void 0;return v={shouldAbandon:r,reset:a},function(){m={},y=(0,u.default)(d).getInstance()}(),v}Object.defineProperty(n,"__esModule",{value:!0});var a=e(128),o=r(a),s=e(99),u=r(s),l=e(10),d=r(l),f=e(8),c=r(f),h=e(133),g=r(h);i.__dashjs_factory_name="BolaAbandonRule",n.default=d.default.getClassFactory(i),t.exports=n.default},{10:10,128:128,133:133,8:8,99:99}],133:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){B={},j={},G={},K=[],H=(0,d.default)(L).getInstance(),q=(0,h.default)(L).getInstance(),N.on(m.default.BUFFER_EMPTY,v,U),N.on(m.default.PLAYBACK_SEEKING,y,U),N.on(m.default.PERIOD_SWITCH_STARTED,I,U),N.on(m.default.MEDIA_FRAGMENT_LOADED,D,U)}function n(e){return e.map(function(e){return Math.log(e)})}function r(e,t,r,i){var a=NaN;if(i?(a=0,i.forEach(function(e,t){e>i[a]&&(a=t)})):(i=n(r),a=i.length-1),0===a)return null;var o=1-i[0]+(i[a]-i[0])/(t/e-1),s=e/(i[0]+o-1);return{utilities:i,gp:o,Vp:s}}function a(e){var t={},n=e.getMediaInfo(),i=e.getStreamProcessor(),a=e.getStreamInfo(),o=e.getTrackInfo(),s=i.isDynamic(),u=a.manifestInfo.duration,l=o.fragmentDuration,d=n.bitrateList.map(function(e){return e.bandwidth}),f=r(R,A,d,null);if(null===f)return t.state=E,t;if(t.state=T,t.bitrates=d,t.utilities=f.utilities,t.Vp=f.Vp,t.gp=f.gp,t.isDynamic=s,t.movieDuration=u,t.fragmentDuration=l,t.bandwidthSafetyFactor=H.getBandwidthSafetyFactor(),t.rebufferSafetyFactor=w,t.bufferTarget=H.getStableBufferTime(),t.lastQuality=0,t.placeholderBuffer=0,t.throughputCount=s?C:P,b){for(var c="",h=0;h<d.length;++h){var g=f.utilities[h],p=d[h],v=0;if(h>0){var m=f.utilities[h-1],y=d[h-1];v=f.Vp*((m*p-g*y)/(p-y)+f.gp)}var _=f.Vp*(g+f.gp);c+="\n"+h+":"+(1e-6*d[h]).toFixed(3)+"Mbps "+v.toFixed(3)+"/"+_.toFixed(3)}x("BolaDebug "+n.type+" bitrates"+c)}return t}function s(e,t){for(var n=e.bitrates.length,r=NaN,i=NaN,a=0;a<n;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(i)||o>=i)&&(i=o,r=a)}return r}function u(e,t){for(var n=k.getHttpRequests(e),r=[],i=n.length-1;i>=0&&r.length<t;--i){var a=n[i];a.type===f.HTTPRequest.MEDIA_SEGMENT_TYPE&&a._tfinish&&a.tresponse&&a.trace&&r.push(a)}return r}function l(e,t,n){var r=u(e,t);if(0===r.length)return 0;for(var i=0,a="",o=0;o<r.length;++o){var s=.001*(r[o]._tfinish.getTime()-r[o].trequest.getTime()),l=8*r[o].trace.reduce(function(e,t){return e+t.b[0]},0);b&&(a+=" "+(1e-6*l).toFixed(3)+"/"+s.toFixed(3)+"="+(1e-6*l/s).toFixed(3)+"Mbps"),i+=s/l}return b&&x("BolaDebug "+n+" BolaRule recent throughput = "+(r.length/(1e6*i)).toFixed(3)+"Mbps:"+a),r.length/i}function c(e,t){var n=0;return e.bitrates.some(function(e,r){return e>t||(n=r,!1)}),n}function g(e,t){var n=Date.now(),r=B[t],i=G[t],a=NaN;if(B[t]=n,G[t]=!1,!i){var o=u(e,1);o.length>0&&(a=o[0]._tfinish.getTime())>n&&(a=n)}var s=0;return s=i||r>a?n-r:n-a,isNaN(s)||s<=0?0:.001*s}function v(){b&&x("BolaDebug BUFFER_EMPTY"),K.forEach(function(e){var t=F.getReadOnlyMetricsFor(e);if(0!==t.BolaState.length){var n=t.BolaState[0]._s;n.state===S&&(n.placeholderBuffer=0,F.updateBolaState(e,n))}})}function y(e){b&&x("BolaDebug PLAYBACK_SEEKING "+e.seekTime.toFixed(3)),K.forEach(function(e){var t=F.getReadOnlyMetricsFor(e);if(0!==t.BolaState.length){var n=t.BolaState[0]._s;n.state!==E&&(n.state=T),F.updateBolaState(e,n)}}),j={},G={}}function I(){}function D(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=e.chunk.mediaInfo.type,n=e.chunk.start;void 0===t||isNaN(n)||(n<=j[t]?G[t]=!0:(G[t]=!1,j[t]=n))}}function O(e){var t=e.getStreamProcessor();t.getScheduleController().setTimeToLoadDelay(0);var n=(0,o.default)(L).create(o.default.NO_CHANGE,{name:i.__dashjs_factory_name}),r=e.getMediaInfo(),u=r.type,d=F.getReadOnlyMetricsFor(u);if(0===d.BolaState.length){b&&x("BolaDebug "+u+"\nBolaDebug "+u+" BolaRule for state=- fragmentStart="+q.getIndexHandlerTime(e.getStreamProcessor()).toFixed(3));var f=a(e);F.updateBolaState(u,f);var h=0;if(f.state!==E){K.push(u);var p=l(d,f.throughputCount,u);if(0===p)return b&&x("BolaDebug "+u+" BolaRule quality unchanged for INITIALIZE"),n;h=c(f,p*f.bandwidthSafetyFactor),f.lastQuality=h,n.value=h,n.reason.state=f.state,n.reason.throughput=p}return b&&x("BolaDebug "+u+" BolaRule quality "+h+" for INITIALIZE"),n}var v=d.BolaState[0]._s;if(v.state===E)return b&&x("BolaDebug "+u+" BolaRule quality 0 for ONE_BITRATE"),n;var m=v.bitrates,y=v.utilities;b&&x("BolaDebug "+u+"\nBolaDebug "+u+" EXECUTE BolaRule for state="+v.state+" fragmentStart="+q.getIndexHandlerTime(e.getStreamProcessor()).toFixed(3));var _=k.getCurrentBufferLevel(d)?k.getCurrentBufferLevel(d):0,R=l(d,v.throughputCount,u);_<=.1&&(v.placeholderBuffer=0);var A=g(d,u);A>0&&(v.placeholderBuffer+=A),v.placeholderBuffer<0&&(v.placeholderBuffer=0);var I=_+v.placeholderBuffer,D=s(v,I);if(b&&x("BolaDebug "+u+" BolaRule bufferLevel="+_.toFixed(3)+"(+"+v.placeholderBuffer.toFixed(3)+"="+I.toFixed(3)+") recentThroughput="+(1e-6*R).toFixed(3)+" tentativeQuality="+D),v.state===T){var h=c(v,R*v.bandwidthSafetyFactor);if(_>v.fragmentDuration/w){v.state=S;for(var O=0,M=0;M<h;++M){var C=v.Vp*(v.gp+(m[h]*y[M]-m[M]*y[h])/(m[h]-m[M]));C>O&&(O=C)}O>_&&(v.placeholderBuffer=O-_)}return b&&x("BolaDebug "+u+" BolaRule quality "+h+" for STARTUP"),v.lastQuality=h,F.updateBolaState(u,v),n.value=h,n.reason.state=T,n.reason.throughput=R,n}if(D>v.lastQuality){var h=c(v,R);D>h&&(h<v.lastQuality&&(h=v.lastQuality),D=h)}if(R>0)for(var P=w*R*_/v.fragmentDuration;D>0&&m[D]>P;)--D;var N=0;return N=I-v.Vp*(y[D]+v.gp),N>0&&(N>v.placeholderBuffer?(N-=v.placeholderBuffer,v.placeholderBuffer=0):(v.placeholderBuffer-=N,N=0)),N>0?D===m.length-1?N=0:t.getScheduleController().setTimeToLoadDelay(1e3*N):N=0,v.lastQuality=D,F.updateBolaState(u,v),n.value=D,n.reason.state=v.state,n.reason.throughput=R,n.reason.bufferLevel=_,b&&x("BolaDebug "+u+" BolaRule quality "+D+" delay="+N.toFixed(3)+" for STEADY"),n}function M(){N.off(m.default.BUFFER_EMPTY,v,U),N.off(m.default.PLAYBACK_SEEKING,y,U),N.off(m.default.PERIOD_SWITCH_STARTED,I,U),N.off(m.default.MEDIA_FRAGMENT_LOADED,D,U),t()}var C=2,P=3,L=this.context,x=(0,_.default)(L).getInstance().log,k=e.dashMetrics,F=e.metricsModel,N=(0,p.default)(L).getInstance(),U=void 0,B=void 0,j=void 0,G=void 0,K=void 0,H=void 0,q=void 0;return U={getMaxIndex:O,reset:M},t(),U}Object.defineProperty(n,"__esModule",{value:!0});var a=e(128),o=r(a),s=e(10),u=r(s),l=e(99),d=r(l),f=e(182),c=e(15),h=r(c),g=e(9),p=r(g),v=e(13),m=r(v),y=e(8),_=r(y),E=0,T=1,S=2,b=!1,R=10,A=30,w=.5;i.__dashjs_factory_name="BolaRule";var I=u.default.getClassFactory(i);I.BOLA_STATE_ONE_BITRATE=E,I.BOLA_STATE_STARTUP=T,I.BOLA_STATE_STEADY=S,I.BOLA_DEBUG=b,n.default=I,t.exports=n.default},{10:10,128:128,13:13,15:15,182:182,8:8,9:9,99:99}],134:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var a=e.getDroppedFramesHistory();if(a){for(var o=a.getFrameHistory(),s=0,l=0,d=u.default.NO_CHANGE,f=1;f<o.length;f++)if(o[f]&&(s=o[f].droppedVideoFrames,(l=o[f].totalVideoFrames)>i&&s/l>r)){d=f-1,n("DroppedFramesRule, index: "+d+" Dropped Frames: "+s+" Total Frames: "+l);break}return(0,u.default)(t).create(d,{droppedFrames:s})}return(0,u.default)(t).create()}var t=this.context,n=(0,d.default)(t).getInstance().log,r=.15,i=375;return{getMaxIndex:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(128),u=r(s),l=e(8),d=r(l);i.__dashjs_factory_name="DroppedFramesRule";var f=o.default.getClassFactory(i);n.default=f,t.exports=n.default},{10:10,128:128,8:8}],135:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t=(new Date).getTime(),r=e.getMediaInfo().type,i=f.getReadOnlyMetricsFor(r),u=i.BufferState.length>0?i.BufferState[i.BufferState.length-1]:null,l=(0,v.default)(a).create();return t-p<m||null===u?l:(n(r,u.state),u.state===o.default.BUFFER_EMPTY&&void 0!==h[r].firstBufferLoadedEvent&&(s("Switch to index 0; buffer is empty."),l.value=0,l.reason="InsufficientBufferRule: Buffer is empty"),p=t,l)}function n(e,t){h[e]=h[e]||{},h[e].state=t,t!==o.default.BUFFER_LOADED||h[e].firstBufferLoadedEvent||(h[e].firstBufferLoadedEvent=!0)}function r(){h={}}function i(){l.off(d.default.PLAYBACK_SEEKING,r,c),h={},p=0}var a=this.context,s=(0,g.default)(a).getInstance().log,l=(0,u.default)(a).getInstance(),f=e.metricsModel,c=void 0,h=void 0,p=void 0,m=void 0;return c={getMaxIndex:t,reset:i},function(){h={},p=0,m=1e3,l.on(d.default.PLAYBACK_SEEKING,r,c)}(),c}Object.defineProperty(n,"__esModule",{value:!0});var a=e(62),o=r(a),s=e(9),u=r(s),l=e(13),d=r(l),f=e(10),c=r(f),h=e(8),g=r(h),p=e(128),v=r(p);i.__dashjs_factory_name="InsufficientBufferRule",n.default=c.default.getClassFactory(i),t.exports=n.default},{10:10,128:128,13:13,62:62,8:8,9:9}],136:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){for(var a=e.getSwitchHistory(),o=a.getSwitchRequests(),s=0,u=0,l=0,f=(0,d.default)(t).create(),c=0;c<o.length;c++)if(void 0!==o[c]&&(s+=o[c].drops,u+=o[c].noDrops,l+=o[c].dropSize,s+u>=i&&s/u>r)){f.value=c>0?c-1:0,f.reason={index:f.value,drops:s,noDrops:u,dropSize:l},n("Switch history rule index: "+f.value+" samples: "+(s+u)+" drops: "+s);break}return f}var t=this.context,n=(0,u.default)(t).getInstance().log,r=.075,i=6;return{getMaxIndex:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(8),u=r(s),l=e(128),d=r(l);i.__dashjs_factory_name="SwitchRequest";var f=o.default.getClassFactory(i);n.default=f,t.exports=n.default},{10:10,128:128,8:8}],137:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){O=[],M=[],C=(0,d.default)(A).getInstance()}function n(e,t){O[e]=O[e]||[],O[e].push(t)}function r(e,t){if(M[e]||(M[e]=[]),M[e].push(t),M[e].length>_)return M[e].shift()}function i(e){var t=void 0;return M[e]&&M[e].length>0&&(t=M[e].reduce(function(e,t){return e+t})/M[e].length),t}function a(e,t){var n=Math.min(O[e].length,t?v:y),r=O[e].slice(-1*n,O[e].length);return r.length>1&&r.reduce(function(e,t){return(e*R<=t||e>=t*b)&&n++,t}),n=Math.min(O[e].length,n),O[e].slice(-1*n,O[e].length)}function s(e,t){var n=a(e,t),r=0;if(n.length>0){r=n.reduce(function(e,t){return e+t},0)/n.length}return O[e].length>=g&&O[e].shift(),r/1e3*C.getBandwidthSafetyFactor()}function l(e,t,n){var r=!1;if(e<S&&(r=!0),!r)switch(n){case"video":r=t<E;break;case"audio":r=t<T}return r}function c(e){var t=e.getMediaInfo(),a=t.type,d=D.getReadOnlyMetricsFor(a),c=e.getStreamProcessor(),h=c.getABRController(),g=c.isDynamic(),p=I.getCurrentHttpRequest(d),v=d.BufferState.length>0?d.BufferState[d.BufferState.length-1]:null,y=e.hasRichBuffer(),_=(0,m.default)(A).create();if(!d||!p||p.type!==f.HTTPRequest.MEDIA_SEGMENT_TYPE||!v||y)return _;var E=void 0,T=void 0;if(p.trace&&p.trace.length){T=p.tresponse.getTime()-p.trequest.getTime()||1,E=p._tfinish.getTime()-p.tresponse.getTime()||1;var S=p.trace.reduce(function(e,t){return e+t.b[0]},0),b=Math.round(8*S/(E/1e3)),R=void 0,C=void 0;l(T,E,a)?O[a]&&M[a]?(R=s(a,g),C=i(a)):(R=b/1e3,C=T):(n(a,b),R=s(a,g),r(a,T),C=i(a,g)),h.setAverageThroughput(a,R),h.getAbandonmentStateFor(a)!==u.default.ABANDON_LOAD&&(v.state===o.default.BUFFER_LOADED||g)&&(_.value=h.getQualityForBitrate(t,R,C),c.getScheduleController().setTimeToLoadDelay(0),w("ThroughputRule requesting switch to index: ",_.value,"type: ",a,"Average throughput",Math.round(R),"kbps"),_.reason={throughput:R,latency:C})}return _}function h(){t()}var g=20,v=3,y=4,_=y,E=50,T=5,S=50,b=1.3,R=1.3,A=this.context,w=(0,p.default)(A).getInstance().log,I=e.dashMetrics,D=e.metricsModel,O=void 0,M=void 0,C=void 0,P={getMaxIndex:c,reset:h};return t(),P}Object.defineProperty(n,"__esModule",{value:!0});var a=e(62),o=r(a),s=e(59),u=r(s),l=e(99),d=r(l),f=e(182),c=e(10),h=r(c),g=e(8),p=r(g),v=e(128),m=r(v);i.__dashjs_factory_name="ThroughputRule",n.default=h.default.getClassFactory(i),t.exports=n.default},{10:10,128:128,182:182,59:59,62:62,8:8,99:99}],138:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,r){return i.getCurrentBufferLevel(a.getReadOnlyMetricsFor(t))<n(e,t,r)}function n(e,t,n){var r=NaN,o=e.getCurrentRepresentationInfo();if("fragmentedText"===t)r=s.getAllTracksAreDisabled()?0:o.fragmentDuration;else if("audio"===t&&n){var l=i.getCurrentBufferLevel(a.getReadOnlyMetricsFor("video"));r=Math.floor(Math.max(l,o.fragmentDuration))}else{var d=o.mediaInfo.streamInfo,f=e.getABRController();if(f.isPlayingAtTopQuality(d)){var c=d.manifestInfo.duration>=u.getLongFormContentDurationThreshold();r=c?u.getBufferTimeAtTopQualityLongForm():u.getBufferTimeAtTopQuality()}else r=u.getStableBufferTime()}return r}var r=this.context,i=e.dashMetrics,a=e.metricsModel,s=e.textController,u=void 0,l={execute:t,getBufferTarget:n};return function(){u=(0,o.default)(r).getInstance()}(),l}Object.defineProperty(n,"__esModule",{value:!0});var a=e(99),o=r(a),s=e(10),u=r(s);i.__dashjs_factory_name="BufferLevelRule",n.default=u.default.getClassFactory(i),t.exports=n.default},{10:10,99:99}],139:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){var n=e.getCurrentRepresentationInfo(),o=n.mediaInfo,u=o.type,l=e.getScheduleController(),d=l.getSeekTarget(),f=!isNaN(d),c=e.getBuffer(),h=f?d:i.getIndexHandlerTime(e);if(isNaN(h)||"fragmentedText"===u&&s.getAllTracksAreDisabled())return null;if(f&&l.setSeekTarget(NaN),c){var g=a.getBufferRange(e.getBuffer(),h);null!==g&&(r("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end.",h," was changed to ",g.end),h=g.end)}var p=void 0;return t?(h=t.startTime+t.duration/2,p=i.getFragmentRequestForTime(e,n,h,{timeThreshold:0,ignoreIsFinished:!0})):(p=i.getFragmentRequestForTime(e,n,h,{keepIdx:!f}),p&&e.getFragmentModel().isFragmentLoaded(p)&&(p=i.getNextFragmentRequest(e,n)),p&&(i.setIndexHandlerTime(e,p.startTime+p.duration),p.delayLoadingTime=(new Date).getTime()+l.getTimeToLoadDelay(),l.setTimeToLoadDelay(0))),p}var n=this.context,r=(0,o.default)(n).getInstance().log,i=e.adapter,a=e.sourceBufferController,s=e.textController;return{execute:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(8),o=r(a),s=e(10),u=r(s);i.__dashjs_factory_name="NextFragmentRequestRule",n.default=u.default.getClassFactory(i),t.exports=n.default},{10:10,8:8}],140:[function(e,t,n){function r(){function e(e){for(var t="",n=0;n<e.length;++n){t+=e[n].uchar}return t.length-t.replace(/^\s+/,"").length}function t(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function n(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function r(e,t){var r=e.videoHeight/15;return t?"font-size: "+r+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?n(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?n(t.background):"transparent")+";":"font-size: "+r+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function i(e){return e.replace(/^\s+/g,"")}function a(e){return e.replace(/\s+$/g,"")}function o(n,o,u,l){var d=null,f=null,c=!1,h=-1,g={start:o,end:u,spans:[]},p="style_cea608_white_black",v={},m={},y=[],_=void 0,E=void 0;for(_=0;_<15;++_){var T=l.rows[_],S="",b=null;if(!1===T.isEmpty()){var R=e(T.chars);null===d&&(d={x:R,y1:_,y2:_+1,p:[]}),R!==h&&c&&(d.p.push(g),g={start:o,end:u,spans:[]},d.y2=_,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===v.hasOwnProperty(d.name)?(y.push(d),v[d.name]=d):(f=v[d.name],f.p.contat(d.p)),d={x:R,y1:_,y2:_+1,p:[]});for(var A=0;A<T.chars.length;++A){var w=T.chars[A],I=w.penState;if(null===b||!I.equals(b)){S.trim().length>0&&(g.spans.push({name:p,line:S,row:_}),S="");var D="style_cea608_"+I.foreground+"_"+I.background;I.underline&&(D+="_underline"),I.italics&&(D+="_italics"),m.hasOwnProperty(D)||(m[D]=JSON.parse(JSON.stringify(I))),b=I,p=D}S+=w.uchar}S.trim().length>0&&g.spans.push({name:p,line:S,row:_}),c=!0,h=R}else c=!1,h=-1,d&&(d.p.push(g),g={start:o,end:u,spans:[]},d.y2=_,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===v.hasOwnProperty(d.name)?(y.push(d),v[d.name]=d):(f=v[d.name],f.p.contat(d.p)),d=null)}d&&(d.p.push(g),d.y2=_+1,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===v.hasOwnProperty(d.name)?(y.push(d),v[d.name]=d):(f=v[d.name],f.p.contat(d.p)),d=null);var O=[];for(_=0;_<y.length;++_){var M=y[_],C="sub_cea608_"+s++,P=document.createElement("div");P.id=C;var L=t(M);P.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+L;var x=document.createElement("div");x.className="paragraph bodyStyle",x.style.cssText=r(n);var k=document.createElement("div");k.className="cueUniWrapper",k.style.cssText="unicode-bidi: normal; direction: ltr;";for(var F=0;F<M.p.length;++F){var N=M.p[F],U=0;for(E=0;E<N.spans.length;++E){var B=N.spans[E];if(B.line.length>0){if(0!==E&&U!=B.row){var j=document.createElement("br");j.className="lineBreak",k.appendChild(j)}var G=!1;U===B.row&&(G=!0),U=B.row;var K=m[B.name],H=document.createElement("span");H.className="spanPadding "+B.name+" customSpanColor",H.style.cssText=r(n,K),0!==E&&G?E===N.spans.length-1?H.textContent=a(B.line):H.textContent=B.line:0===E&&N.spans.length>1&&B.row===N.spans[1].row?H.textContent=i(B.line):H.textContent=B.line.trim(),k.appendChild(H)}}}x.appendChild(k),P.appendChild(x);var q={bodyStyle:["%",90]};for(E in m)m.hasOwnProperty(E)&&(q[E]=["%",90]);O.push({type:"html",start:o,end:u,cueHTMLElement:P,cueID:C,cellResolution:[32,15],isFromCEA608:!0,regions:y,regionID:M.name,videoHeight:n.videoHeight,videoWidth:n.videoWidth,fontSize:q,lineHeight:{},linePadding:{}})}return O}var s=0;return{createHTMLCaptionsFromScreen:o}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="EmbeddedTextHtmlRender",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{10:10}],141:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){O=e,s(t),M=n,C=M.getRepresentationController(),P=(0,c.default)(E).getInstance()}function n(e){try{D=S.createSourceBuffer(I,e),w||(D.hasOwnProperty("initialize")&&D.initialize(O,this),w=!0)}catch(e){b.mediaSourceError("Error creating "+O+" source buffer.")}return D}function r(){return O}function i(){return D}function a(e){D=e}function s(e){I=e}function l(){return I}function d(e){M=e}function f(){return M}function h(){return 0}function g(){return 0}function p(e){T.off(u.default.DATA_UPDATE_COMPLETED,v,this),T.off(u.default.INIT_FRAGMENT_LOADED,m,this),e||(S.abort(I,D),S.removeSourceBuffer(I,D))}function v(e){e.sender.getStreamProcessor()===M&&T.trigger(u.default.TIMED_TEXT_REQUESTED,{index:0,sender:e.sender})}function m(e){e.fragmentModel===M.getFragmentModel()&&e.chunk.bytes&&S.append(D,e.chunk)}function y(){return A}function _(e,t){var n=P.extract(e,O,t);n?S.append(n):T.trigger(u.default.INIT_REQUESTED,{sender:R})}var E=this.context,T=(0,o.default)(E).getInstance(),S=e.sourceBufferController,b=e.errHandler,R=void 0,A=void 0,w=void 0,I=void 0,D=void 0,O=void 0,M=void 0,C=void 0,P=void 0;return R={initialize:t,createBuffer:n,getType:r,getStreamProcessor:f,setStreamProcessor:d,getBuffer:i,setBuffer:a,getBufferLevel:h,getCriticalBufferLevel:g,setMediaSource:s,getMediaSource:l,getIsBufferingCompleted:y,switchInitData:_,reset:p},function(){w=!1,I=null,D=null,O=null,M=null,C=null,A=!1,T.on(u.default.DATA_UPDATE_COMPLETED,v,this),T.on(u.default.INIT_FRAGMENT_LOADED,m,this)}(),R}Object.defineProperty(n,"__esModule",{value:!0});var a=e(9),o=r(a),s=e(13),u=r(s),l=e(10),d=r(l),f=e(153),c=r(f);i.__dashjs_factory_name="NotFragmentedTextBufferController",n.default=d.default.getClassFactory(i),t.exports=n.default},{10:10,13:13,153:153,9:9}],142:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){return y.initialize(e,t,n)}function n(e){return y.createBuffer(e)}function r(){return y.getType()}function i(){return y.getBuffer()}function a(e){y.setBuffer(e)}function o(){return y.getMediaSource()}function s(e){y.setMediaSource(e)}function l(e){y.setStreamProcessor(e)}function f(){y.getStreamProcessor()}function c(){return y.getBufferLevel()}function h(){return y.getCriticalBufferLevel()}function g(e){y.reset(e)}function p(){return y.getIsBufferingCompleted()}function v(e,t){y.switchInitData(e,t)}var m=this.context,y=void 0,_=void 0;return _={initialize:t,createBuffer:n,getType:r,getStreamProcessor:f,setStreamProcessor:l,getBuffer:i,setBuffer:a,getBufferLevel:c,getCriticalBufferLevel:h,setMediaSource:s,getMediaSource:o,getIsBufferingCompleted:p,switchInitData:v,reset:g},function(e){y="fragmentedText"===e.type?(0,u.default)(m).create({metricsModel:e.metricsModel,manifestModel:e.manifestModel,sourceBufferController:e.sourceBufferController,errHandler:e.errHandler,streamController:e.streamController,mediaController:e.mediaController,adapter:e.adapter,textController:e.textController}):(0,d.default)(m).create({errHandler:e.errHandler,sourceBufferController:e.sourceBufferController})}(e),_}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(62),u=r(s),l=e(141),d=r(l);i.__dashjs_factory_name="TextBufferController",n.default=o.default.getClassFactory(i),n.default=o.default.getClassFactory(i),t.exports=n.default},{10:10,141:141,62:62}],143:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&(e.errHandler&&(p=e.errHandler),e.dashManifestModel&&(v=e.dashManifestModel),e.mediaController&&(m=e.mediaController),e.videoModel&&(y=e.videoModel),e.streamController&&(_=e.streamController),e.textTracks&&(E=e.textTracks),e.vttParser&&(T=e.vttParser),e.ttmlParser&&(S=e.ttmlParser),f.setConfig({errHandler:p,dashManifestModel:v,mediaController:m,videoModel:y,streamController:_,textTracks:E,vttParser:T,ttmlParser:S}))}function t(){return f}function n(){return h}function r(e){f.addEmbeddedTrack(e)}function i(){for(var e=f.getConfig(),t=e.fragmentModel,n=e.embeddedTracks,r=e.isFragmented,i=e.fragmentedTracks,a=e.allTracksAreDisabled,o=y.getElement(),s=o.textTracks,u=s.length,l=u-n.length,d=E.getCurrentTrackIdx(),c=0;c<u;c++){var h=s[c];if(a="showing"!==h.mode,"showing"===h.mode){if(d!==c&&(E.setCurrentTrackIdx(c),E.addCaptions(c,0,null),r&&c<l)){var g=m.getCurrentTrackFor("fragmentedText",_.getActiveStreamInfo()),p=i[c];p!==g&&(t.abortRequests(),E.deleteTrackCues(g),m.setTrack(p),f.setCurrentFragmentedTrackIdx(c))}break}}a&&E.setCurrentTrackIdx(-1)}function a(){return f.getConfig().textTracks.getCurrentTrackIdx()}function o(){h=!1,f.resetEmbedded()}var s=this.context,l=void 0,f=void 0,h=void 0,p=void 0,v=void 0,m=void 0,y=void 0,_=void 0,E=void 0,T=void 0,S=void 0;return l={setConfig:e,getTextSourceBuffer:t,getAllTracksAreDisabled:n,addEmbeddedTrack:r,setTextTrack:i,getCurrentTrackIdx:a,reset:o},function(){E=(0,d.default)(s).getInstance(),T=(0,c.default)(s).getInstance(),S=(0,g.default)(s).getInstance(),f=(0,u.default)(s).getInstance(),E.initialize(),h=!1}(),l}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(144),u=r(s),l=e(145),d=r(l),f=e(160),c=r(f),h=e(158),g=r(h);i.__dashjs_factory_name="TextController",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{10:10,144:144,145:145,158:158,160:160}],144:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){L=null,j=null,G=!1,K=NaN,H=[],Y=null,A||r();var n=t.getStreamProcessor();if(N=n.getMediaInfoArr(),U.setConfig({videoModel:q}),U.initialize(),B=!C.getIsTextTrack(e),I=(0,d.default)(_).getInstance(),F=(0,u.default)(_).getInstance(),F.setConfig({boxParser:I}),B){j=n.getFragmentModel(),this.buffered=(0,c.default)(_).create(),H=P.getTracksFor("fragmentedText",V.getActiveStreamInfo());for(var i=P.getCurrentTrackFor("fragmentedText",V.getActiveStreamInfo()),a=0;a<H.length;a++)if(H[a]===i){z=a;break}}}function t(){U.deleteAllTextTracks(),L=null,F=null,N=null,U=null,B=!1,j=null,G=!1,K=NaN,H=[],q=null,V=null,A=!1,W=null}function n(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&h(t.bytes,t)}function r(){W=[],N=[],q=(0,y.default)(_).getInstance(),U=(0,E.default)(_).getInstance(),U.setConfig({videoModel:q}),U.initialize(),I=(0,d.default)(_).getInstance(),F=(0,u.default)(_).getInstance(),F.setConfig({boxParser:I}),B=!1,z=null,Q=!1,X=0,$=[],Z=[],J=null,A=!0,ee=(0,S.default)(_).getInstance(),b.on(M.default.VIDEO_CHUNK_RECEIVED,n,this)}function i(){b.off(M.default.VIDEO_CHUNK_RECEIVED,n,this),null!==U&&U.deleteAllTextTracks(),A=!1,W=[],$=[null,null],Z=[],J=null}function a(e){A||r(),"CC1"===e.id||"CC3"===e.id?W.push(e):T("Warning: Embedded track "+e.id+" not supported!")}function s(e){e&&(e.errHandler&&(O=e.errHandler),e.dashManifestModel&&(C=e.dashManifestModel),e.mediaController&&(P=e.mediaController),e.videoModel&&(q=e.videoModel),e.streamController&&(V=e.streamController),e.textTracks&&(U=e.textTracks),e.vttParser&&(x=e.vttParser),e.ttmlParser&&(k=e.ttmlParser))}function l(){return{errHandler:O,dashManifestModel:C,mediaController:P,videoModel:q,fragmentModel:j,streamController:V,textTracks:U,isFragmented:B,embeddedTracks:W,fragmentedTracks:H}}function f(e){z=e}function h(e,t){function n(e,t){var n=new o.default,r={subtitle:"subtitles",caption:"captions"};n.captionData=e,n.lang=t.lang,n.label=t.id,n.index=t.index,n.isTTML=function(){var e=!1;return t.codec&&t.codec.search("stpp")>=0&&(e=!0),t.mimeType&&t.mimeType.search("ttml")>=0&&(e=!0),e}(),n.video=q.getElement(),n.defaultTrack=p(t),n.isFragmented=B,n.isEmbedded=!!t.isEmbedded,n.kind=function(){var e=t.roles.length>0?r[t.roles[0]]:r.caption;return e=e===r.caption||e===r.subtitle?e:r.caption}(),n.roles=t.roles;var i=(N?N.length:0)+W.length;U.addTextTrack(n,i)}var r,i,a,s,u,l,d,f=t.mediaInfo,c=f.type,h=f.mimeType,v=f.codec||h;if(!v)return void T("No text type defined");if("fragmentedText"===c)if(G)if(l=F.getSamplesInfo(e),i=l.sampleList,!Y&&i.length>0&&(Y=i[0].cts-t.start*K),v.search("stpp")>=0)for(L=null!==L?L:m(v),a=0;a<i.length;a++){var y=i[a],_=y.cts,E=_-Y;this.buffered.add(E/K,(E+y.duration)/K);var S=new DataView(e,y.offset,y.subSizes[0]);d=R.default.Utils.dataViewToString(S,"utf-8");var b=[],A=y.offset+y.subSizes[0];for(s=1;s<y.subSizes.length;s++){var I=new Uint8Array(e,A,y.subSizes[s]),D=String.fromCharCode.apply(null,I);b.push(D),A+=y.subSizes[s]}try{r=L.parse(d,_/K,(_+y.duration)/K,b),U.addCaptions(z,Y/K,r)}catch(e){T("TTML parser error: "+e.message)}}else{var M=[];for(a=0;a<i.length;a++){var C=i[a];C.cts-=Y,this.buffered.add(C.cts/K,(C.cts+C.duration)/K);var P=e.slice(C.offset,C.offset+C.size),x=R.default.parseBuffer(P);for(s=0;s<x.boxes.length;s++){var k=x.boxes[s]
;if(T("VTT box1: "+k.type),"vtte"!==k.type&&"vttc"===k.type)for(T("VTT vttc boxes.length = "+k.boxes.length),u=0;u<k.boxes.length;u++){var j=k.boxes[u];if(T("VTT box2: "+j.type),"payl"===j.type){var H=j.cue_text;T("VTT cue_text = "+H);var V=C.cts/K,Q=(C.cts+C.duration)/K;M.push({start:V,end:Q,data:H,styles:{}}),T("VTT "+V+"-"+Q+" : "+H)}}}}M.length>0&&U.addCaptions(z,0,M)}else{for(G=!0,a=0;a<N.length;a++)n(null,N[a]);K=F.getMediaTimescaleFromMoov(e)}else if("text"===c){var S=new DataView(e,0,e.byteLength);d=R.default.Utils.dataViewToString(S,"utf-8");try{r=m(v).parse(d),n(r,f)}catch(e){O.timedTextError(e,"parse",d)}}else if("video"===c)if("InitializationSegment"===t.segmentType){if(0===X)for(X=F.getMediaTimescaleFromMoov(e),a=0;a<W.length;a++)n(null,W[a])}else{if(0===X)return void T("CEA-608: No timescale for embeddedTextTrack yet");l=F.getSamplesInfo(e);var te=l.sequenceNumber;if(!$[0]&&!$[1]){var ne=void 0,re=void 0;for(a=0;a<W.length;a++){if("CC1"===W[a].id?(0,re=U.getTrackIdxForId("CC1")):"CC3"===W[a].id&&(1,re=U.getTrackIdxForId("CC3")),-1===re)return void T("CEA-608: data before track is ready.");ne=function(e,t){function n(e,n,r){var i=null;if(q.getTTMLRenderingDiv())i=ee.createHTMLCaptionsFromScreen(q.getElement(),e,n,r);else{i=[{start:e,end:n,data:r.getDisplayText(),styles:{}}]}i&&U.addCaptions(t,0,i)}return n}(0,re),$[a]=new w.default.Cea608Parser(a,{newCue:ne},null)}}if(X&&-1==Z.indexOf(te)){if(null!==J&&te!==J+1)for(a=0;a<$.length;a++)$[a]&&$[a].reset();for(var ie=g(e),ae=0;ae<$.length;ae++){var oe=ie.fields[ae],se=$[ae];if(se){for(a=0;a<oe.length;a++)se.addData(oe[a][0]/X,oe[a][1]);ie.endTime&&se.cueSplitAtTime(ie.endTime/X)}}J=te,Z.push(te)}}}function g(e){var t=I.parse(e),n=t.getBox("moof"),r=t.getBox("tfdt"),i=t.getBox("tfhd"),a=t.getBoxes("trun"),o=null;if(0===a.length)return null;o=a[0],a.length>1&&T("Warning: Too many truns");for(var s=n.offset+o.data_offset,u=o.sample_count,l=s,d=r.baseMediaDecodeTime,f=new DataView(e),c={startTime:null,endTime:null,fields:[[],[]]},h=0,g=0;g<u;g++){var p=o.samples[g];void 0===p.sample_duration&&(p.sample_duration=i.default_sample_duration),void 0===p.sample_size&&(p.sample_size=i.default_sample_size),void 0===p.sample_composition_time_offset&&(p.sample_composition_time_offset=0);for(var v=d+h+p.sample_composition_time_offset,m=w.default.findCea608Nalus(f,l,p.sample_size),y=0;y<m.length;y++)for(var _=w.default.extractCea608DataFromRange(f,m[y]),E=0;E<2;E++)_[E].length>0&&c.fields[E].push([v,_[E]]);h+=p.sample_duration,l+=p.sample_size}c.fields[0].sort(function(e,t){return e[0]-t[0]}),c.fields[1].sort(function(e,t){return e[0]-t[0]});var S=d+h;return c.startTime=d,c.endTime=S,c}function p(e){var t=!1;return W.length>1&&e.isEmbedded?t=e.id&&"CC1"===e.id:1===W.length?e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===W.length&&(t=e.index===N[0].index),t}function m(e){var t;return e.search("vtt")>=0?t=x:(e.search("ttml")>=0||e.search("stpp")>=0)&&(t=k,t.setConfig({videoModel:q})),t}var _=this.context,T=(0,v.default)(_).getInstance().log,b=(0,D.default)(_).getInstance(),A=!1,I=void 0,O=void 0,C=void 0,P=void 0,L=void 0,x=void 0,k=void 0,F=void 0,N=void 0,U=void 0,B=void 0,j=void 0,G=void 0,K=void 0,H=void 0,q=void 0,V=void 0,Y=void 0,z=void 0,W=void 0,Q=void 0,X=void 0,J=void 0,Z=void 0,$=void 0,ee=void 0;return{initialize:e,append:h,abort:t,addEmbeddedTrack:a,resetEmbedded:i,setConfig:s,getConfig:l,setCurrentFragmentedTrackIdx:f}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(174),o=r(a),s=e(33),u=r(s),l=e(147),d=r(l),f=e(149),c=r(f),h=e(10),g=r(h),p=e(8),v=r(p),m=e(102),y=r(m),_=e(145),E=r(_),T=e(140),S=r(T),b=e(6),R=r(b),A=e(2),w=r(A),I=e(9),D=r(I),O=e(13),M=r(O);i.__dashjs_factory_name="TextSourceBuffer",n.default=g.default.getSingletonFactory(i),t.exports=n.default},{10:10,102:102,13:13,140:140,145:145,147:147,149:149,174:174,2:2,33:33,6:6,8:8,9:9}],145:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(D=window.VTTCue||window.TextTrackCue,C=[],P=[],L=-1,x=0,k=0,F=0,N=0,U=null,B=null,K=!1,H=2147483647,j=!!navigator.userAgent.match(/Chrome/)&&!navigator.userAgent.match(/Edge/),void 0!==document.fullscreenElement?G="fullscreenElement":void 0!==document.webkitIsFullScreen?G="webkitIsFullScreen":document.msFullscreenElement?G="msFullscreenElement":document.mozFullScreen&&(G="mozFullScreen"))}function t(e){var t=C[e].kind,n=void 0!==C[e].label?C[e].label:C[e].lang,r=C[e].lang,i=j?document.createElement("track"):M.addTextTrack(t,n,r);return j&&(i.kind=t,i.label=n,i.srclang=r),i}function n(e){K=e,U&&!document[G]&&(U.style.zIndex=e?H:null)}function r(e,n){if(C.length===n)return void I("Trying to add too many tracks.");if(C.push(e),void 0===M&&(M=e.video),C.length===n){C.sort(function(e,t){return e.index-t.index}),U=O.getTTMLRenderingDiv();for(var r=-1,i=0;i<C.length;i++){var a=t.call(this,i);P.push(a),C[i].defaultTrack&&(a.default=!0,r=i),j&&M.appendChild(a);var o=M.textTracks[i];o.nonAddedCues=[],U&&(C[i].isTTML||C[i].isEmbedded)?o.renderingType="html":o.renderingType="default",this.addCaptions(i,0,C[i].captionData),w.trigger(u.default.TEXT_TRACK_ADDED)}if(v.call(this,r),r>=0){for(var s=0;s<M.textTracks.length;s++)M.textTracks[s].mode=s===r?"showing":"hidden";this.addCaptions(r,0,null)}w.trigger(u.default.TEXT_TRACKS_ADDED,{index:L,tracks:C})}}function i(e,t,n,r,i,a){var o=e/t,s=n/r,u=0,l=0;o>s?(l=t,u=l/r*n):(u=e,l=u/n*r);var d=0,f=0,c=0,h=0;return u/l>i?(h=l,c=l/(1/i),d=(e-c)/2,f=0):(c=u,h=u/i,d=0,f=(t-h)/2),a?{x:d+.1*c,y:f+.1*h,w:.8*c,h:.8*h}:{x:d,y:f,w:c,h:h}}function a(){var e=this.getCurrentTextTrack();if(e&&"html"===e.renderingType){var t=M.clientWidth/M.clientHeight,n=!1;e.isFromCEA608&&(t=3.5/3,n=!0);var r=i.call(this,M.clientWidth,M.clientHeight,M.videoWidth,M.videoHeight,t,n),a=r.w,o=r.h;if(a!=F||o!=N){x=r.x,k=r.y,F=a,N=o,U.style.left=x+"px",U.style.top=k+"px",U.style.width=F+"px",U.style.height=N+"px";for(var s=0;e.activeCues&&s<e.activeCues.length;++s){var u=e.activeCues[s];u.scaleCue(u)}G&&document[G]||K?U.style.zIndex=H:U.style.zIndex=null}}}function s(e,t){return Math.round(.01*e*t).toString()+"px"}function l(e){var t=F,n=N;if(t*n!=0&&e.layout){var r=e.layout,i=s(r.left,t),a=s(r.top,n),o=s(r.width,t),u=s(r.height,n);U.style.left=i,U.style.top=a,U.style.width=o,U.style.height=u;var l=U.firstChild;l&&l.style&&(l.style.left="0px",l.style.top="0px",l.style.width=o,l.style.height=u,G&&document[G]||K?l.style.zIndex=H:l.style.zIndex=null)}}function d(e){var t,n,r,i,a,o=F,s=N,u=[o/e.cellResolution[0],s/e.cellResolution[1]];if(e.linePadding)for(t in e.linePadding)if(e.linePadding.hasOwnProperty(t)){var l=e.linePadding[t];n=(l*u[0]).toString();for(var d=document.getElementsByClassName("spanPadding"),f=0;f<d.length;f++)d[f].style.cssText=d[f].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n),d[f].style.cssText=d[f].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.fontSize)for(t in e.fontSize)if(e.fontSize.hasOwnProperty(t)){"%"===e.fontSize[t][0]?r=e.fontSize[t][1]/100:"c"===e.fontSize[t][0]&&(r=e.fontSize[t][1]),n=(r*u[1]).toString(),a="defaultFontSize"!==t?document.getElementsByClassName(t):document.getElementsByClassName("paragraph");for(var c=0;c<a.length;c++)a[c].style.cssText=a[c].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.lineHeight)for(t in e.lineHeight)if(e.lineHeight.hasOwnProperty(t)){"%"===e.lineHeight[t][0]?i=e.lineHeight[t][1]/100:"c"===e.fontSize[t][0]&&(i=e.lineHeight[t][1]),n=(i*u[1]).toString(),a=document.getElementsByClassName(t);for(var h=0;h<a.length;h++)a[h].style.cssText=a[h].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}}function f(e,t,n){var r=e>=0?M.textTracks[e]:null,i=this;if(r){if("showing"!==r.mode)return void(n&&n.length>0&&(r.nonAddedCues=r.nonAddedCues.concat(n)));if(n||(n=r.nonAddedCues,r.nonAddedCues=[]),n&&0!==n.length)for(var o in n){var s,u=n[o];r.cellResolution=u.cellResolution,r.isFromCEA608=u.isFromCEA608,B||"html"!==u.type&&"image"!==u.type||(B=setInterval(a.bind(this),500)),"image"===u.type?(s=new D(u.start-t,u.end-t,""),s.image=u.data,s.id=u.id,s.size=0,s.type="image",s.layout=u.layout,s.scaleCue=l.bind(i),s.onenter=function(){if(U&&"showing"===r.mode){var e=new Image;e.id="ttmlImage_"+this.id,e.src=this.image,e.style.cssText="pointer-events: none; display: block; visibility: visible !important; position: relative !important;",U.appendChild(e),l.call(i,this)}},s.onexit=function(){if(U)for(var e=U.childNodes,t=0;t<e.length;t++)e[t].id==="ttmlImage_"+this.id&&U.removeChild(e[t])}):"html"===u.type?(s=new D(u.start-t,u.end-t,""),s.cueHTMLElement=u.cueHTMLElement,s.regions=u.regions,s.regionID=u.regionID,s.cueID=u.cueID,s.videoWidth=u.videoWidth,s.videoHeight=u.videoHeight,s.cellResolution=u.cellResolution,s.fontSize=u.fontSize,s.lineHeight=u.lineHeight,s.linePadding=u.linePadding,s.scaleCue=d.bind(i),U.style.left=x+"px",U.style.top=k+"px",U.style.width=F+"px",U.style.height=N+"px",s.onenter=function(){"showing"===r.mode&&(I("Cue "+this.startTime+"-"+this.endTime+" : "+this.cueHTMLElement.id+" : "+this.cueHTMLElement.innerText),U.appendChild(this.cueHTMLElement),d.call(i,this))},s.onexit=function(){for(var e=U.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&U.removeChild(e[t])}):(s=new D(u.start-t,u.end-t,u.data),u.styles&&(void 0!==u.styles.align&&"align"in s&&(s.align=u.styles.align),void 0!==u.styles.line&&"line"in s&&(s.line=u.styles.line),void 0!==u.styles.position&&"position"in s&&(s.position=u.styles.position),void 0!==u.styles.size&&"size"in s&&(s.size=u.styles.size))),r.addCue(s)}}}function h(){return L>=0?M.textTracks[L]:null}function g(){return L}function p(e){for(var t=-1,n=0;n<M.textTracks.length;n++)if(M.textTracks[n].label===e){t=n;break}return t}function v(e){if(L=e,b.call(this),e>=0){"html"===M.textTracks[e].renderingType?T.call(this):S.call(this)}else S.call(this)}function m(e){return M.textTracks[e]}function y(e){if(e.cues){for(var t=e.cues,n=t.length-1,r=n;r>=0;r--)e.removeCue(t[r]);e.mode="disabled"}}function _(){for(var e=P.length,t=0;t<e;t++)if(j)M.removeChild(P[t]);else{var n=m.call(this,t);n.nonAddedCues=[],y.call(this,n)}P=[],C=[],B&&(clearInterval(B),B=null),b.call(this)}function E(e){M.removeChild(P[e]),P.splice(e,1)}function T(){if(j){var e=document.getElementById("native-cue-style");if(!e){e=document.createElement("style"),e.id="native-cue-style",document.head.appendChild(e);var t=e.sheet;M.id?t.insertRule("#"+M.id+"::cue {background: transparent}",0):0!==M.classList.length?t.insertRule("."+M.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0)}}}function S(){if(j){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}}function b(){if(U)for(;U.firstChild;)U.removeChild(U.firstChild)}function R(e){e&&e.videoModel&&(O=e.videoModel)}var A=this.context,w=(0,o.default)(A).getInstance(),I=(0,c.default)(A).getInstance().log,D=void 0,O=void 0,M=void 0,C=void 0,P=void 0,L=void 0,x=void 0,k=void 0,F=void 0,N=void 0,U=void 0,B=void 0,j=void 0,G=void 0,K=void 0,H=void 0;return{initialize:e,displayCConTop:n,addTextTrack:r,addCaptions:f,getTextTrack:m,getCurrentTextTrack:h,getCurrentTrackIdx:g,setCurrentTrackIdx:v,getTrackIdxForId:p,deleteTrackCues:y,deleteAllTextTracks:_,deleteTextTrack:E,setConfig:R}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(9),o=r(a),s=e(13),u=r(s),l=e(10),d=r(l),f=e(8),c=r(f);i.__dashjs_factory_name="TextTracks",n.default=d.default.getSingletonFactory(i),t.exports=n.default},{10:10,13:13,8:8,9:9}],146:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e.selector&&(m=e.selector)}function t(e){m=s.getIsDVB(e)?p:h}function n(e){var t=e.baseUrls,n=e.selectedIdx;if(!isNaN(n))return t[n];var r=m.select(t);return r?(e.selectedIdx=t.indexOf(r),r):void a.trigger(u.default.URL_RESOLUTION_FAILED,{error:new Error(_,E)})}function r(){f.reset()}var i=this.context,a=(0,o.default)(i).getInstance(),s=(0,d.default)(i).getInstance(),l=void 0,f=void 0,h=void 0,p=void 0,m=void 0;return l={chooseSelectorFromManifest:t,select:n,reset:r,setConfig:e},function(){f=(0,c.default)(i).create({updateEventName:u.default.SERVICE_LOCATION_BLACKLIST_CHANGED,loadFailedEventName:u.default.FRAGMENT_LOADING_COMPLETED}),h=(0,v.default)(i).create({blacklistController:f}),p=(0,g.default)(i).create({blacklistController:f}),m=h}(),l}Object.defineProperty(n,"__esModule",{value:!0});var a=e(9),o=r(a),s=e(13),u=r(s),l=e(22),d=r(l),f=e(61),c=r(f),h=e(162),g=r(h),p=e(161),v=r(p),m=e(10),y=r(m),_=1,E="Failed to resolve a valid URL";i.__dashjs_factory_name="BaseURLSelector";var T=y.default.getClassFactory(i);T.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=_,T.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE=E,n.default=T,t.exports=n.default},{10:10,13:13,161:161,162:162,22:22,61:61,9:9}],147:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var n=d.default.parseBuffer(e),r=(0,o.default)(t).create();return r.setData(n),r}var t=this.context;return{parse:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(154),o=r(a),s=e(10),u=r(s),l=e(6),d=r(l);i.__dashjs_factory_name="BoxParser",n.default=u.default.getSingletonFactory(i),t.exports=n.default},{10:10,154:154,6:6}],148:[function(e,t,n){function r(){function e(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t}function t(){return a}function n(e){a=e}function r(e,t){var n=e.canPlayType(t);return"probably"===n||"maybe"===n}var i=void 0,a=void 0;return i={supportsMediaSource:e,supportsEncryptedMedia:t,supportsCodec:r,setEncryptedMediaSupported:n},function(){a=!1}(),i}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="Capabilities",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{10:10}],149:[function(e,t,n){function r(){function e(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length}function t(){this.customTimeRangeArray=[],this.length=0}function n(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length}function r(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)}function i(e){return this.customTimeRangeArray[e].start}function a(e){return this.customTimeRangeArray[e].end}return{customTimeRangeArray:[],length:0,add:e,clear:t,remove:n,mergeRanges:r,start:i,end:a}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="CustomTimeRanges",n.default=a.default.getClassFactory(r),t.exports=n.default},{10:10}],150:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){if(void 0!==y)return y;y=!1;var t;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return v("Warning: DOMStorage access denied: "+e.message),y}if(!t||e!==g&&e!==p)return y;try{t.setItem("1","1"),t.removeItem("1"),y=!0}catch(e){v("Warning: DOMStorage is supported, but cannot be used: "+e.message)}return y}function t(){e(g)&&f.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){v(e.message)}}})}function n(){return 6e5*Math.round((new Date).getTime()/6e5)}function r(t,n){return e(t)&&_["get"+n+"CachingInfo"]().enabled}function i(e){if(!r(g,"LastMediaSettings"))return null;var t=h.replace(/\?/,e),n=JSON.parse(localStorage.getItem(t))||{},i=(new Date).getTime()-parseInt(n.timestamp,10)>=_.getLastMediaSettingsCachingInfo().ttl||!1,a=n.settings;return i&&(localStorage.removeItem(t),a=null),a}function a(e){var t=NaN;if(r(g,"LastBitrate")){var n=c.replace(/\?/,e),i=JSON.parse(localStorage.getItem(n))||{},a=(new Date).getTime()-parseInt(i.timestamp,10)>=_.getLastBitrateCachingInfo().ttl||!1,o=parseInt(i.bitrate,10);isNaN(o)||a?a&&localStorage.removeItem(n):(t=o,v("Last saved bitrate for "+e+" was "+o))}return t}function o(e,t){if(r(g,"LastMediaSettings")){var i=h.replace(/\?/,e);try{localStorage.setItem(i,JSON.stringify({settings:t,timestamp:n()}))}catch(e){v(e.message)}}}function s(e,t){if(r(g,"LastBitrate")&&t){var i=c.replace(/\?/,e);try{localStorage.setItem(i,JSON.stringify({bitrate:t/1e3,timestamp:n()}))}catch(e){v(e.message)}}}var l=this.context,v=(0,d.default)(l).getInstance().log,m=void 0,y=void 0,_=void 0;return m={getSavedBitrateSettings:a,setSavedBitrateSettings:s,getSavedMediaSettings:i,setSavedMediaSettings:o,isSupported:e},function(){_=(0,u.default)(l).getInstance(),t()}(),m}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(99),u=r(s),l=e(8),d=r(l),f=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],c="dashjs_?_bitrate",h="dashjs_?_settings",g="localStorage",p="sessionStorage";i.__dashjs_factory_name="DOMStorage";var v=o.default.getSingletonFactory(i);n.default=v,t.exports=n.default},{10:10,8:8,99:99}],151:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){return g}function n(e){g=e}function r(e,t){var n=!0,r=0,i=void 0,a=void 0;if(void 0===t&&(t=!1),e.tag>16777215?(h.getUint32(g)!==e.tag&&(n=!1),r=4):e.tag>65535?(i=h.getUint16(g),a=h.getUint8(g+2),256*i+a!==e.tag&&(n=!1),r=3):e.tag>255?(h.getUint16(g)!==e.tag&&(n=!1),r=2):(h.getUint8(g)!==e.tag&&(n=!1),r=1),!n&&e.required&&!t)throw new u.default("required tag not found");return n&&(g+=r),n}function i(e,t){var n=r(e,t);return n&&s(),n}function a(e){var t=void 0;return r(e),t=s(),c[e.parse](t)}function o(e,t){var n=r(e,t),i=void 0;return n&&(i=s(),g+=i),n}function s(e){var t=1,n=128,r=-1,i=0,a=h.getUint8(g),o=void 0;for(o=0;o<8;o+=1){if((a&n)===n){i=void 0===e?a&~n:a,r=o;break}n>>=1}for(o=0;o<r;o+=1,t+=1)i=i<<8|255&h.getUint8(g+t);return g+=t,i}function l(e){var t=void 0;switch(e){case 4:t=h.getFloat32(g),g+=4;break;case 8:t=h.getFloat64(g),g+=8}return t}function d(e){var t=0,n=void 0;for(n=0;n<e;n+=1)t<<=8,t|=255&h.getUint8(g+n);return g+=e,t}function f(){return g<h.byteLength}var c=void 0,h=new DataView(e.data),g=0;return c={getPos:t,setPos:n,consumeTag:r,consumeTagAndSize:i,parseTag:a,skipOverElement:o,getMatroskaCodedNum:s,getMatroskaFloat:l,getMatroskaUint:d,moreData:f}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(165),u=r(s);i.__dashjs_factory_name="EBMLParser",n.default=o.default.getClassFactory(i),t.exports=n.default},{10:10,165:165}],152:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){d.trigger(u.default.ERROR,{error:"capability",event:e})}function t(e,t,n){d.trigger(u.default.ERROR,{error:"download",event:{id:e,url:t,request:n}})}function n(e,t,n,r){d.trigger(u.default.ERROR,{error:"manifestError",event:{message:e,id:t,manifest:n,event:r}})}function r(e,t,n){d.trigger(u.default.ERROR,{error:"cc",event:{message:e,id:t,cc:n}})}function i(e){d.trigger(u.default.ERROR,{error:"mediasource",event:e})}function a(e){d.trigger(u.default.ERROR,{error:"key_session",event:e})}function s(e){d.trigger(u.default.ERROR,{error:"key_message",event:e})}var l=this.context,d=(0,o.default)(l).getInstance();return{capabilityError:e,downloadError:t,manifestError:n,timedTextError:r,mediaSourceError:i,mediaKeySessionError:a,mediaKeyMessageError:s}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(9),o=r(a),s=e(13),u=r(s),l=e(10),d=r(l);i.__dashjs_factory_name="ErrorHandler";var f=d.default.getSingletonFactory(i);f.CAPABILITY_ERROR_MEDIASOURCE="mediasource",f.CAPABILITY_ERROR_MEDIAKEYS="mediakeys",f.DOWNLOAD_ERROR_ID_MANIFEST="manifest",f.DOWNLOAD_ERROR_ID_SIDX="SIDX",f.DOWNLOAD_ERROR_ID_CONTENT="content",f.DOWNLOAD_ERROR_ID_INITIALIZATION="initialization",f.DOWNLOAD_ERROR_ID_XLINK="xlink",f.MANIFEST_ERROR_ID_CODEC="codec",f.MANIFEST_ERROR_ID_PARSE="parse",f.MANIFEST_ERROR_ID_NOSTREAMS="nostreams",f.TIMED_TEXT_ERROR_ID_PARSE="parse",n.default=f,t.exports=n.default},{10:10,13:13,9:9}],153:[function(e,t,n){function r(){function e(e){var t=e.streamId,n=e.representationId;r[t]=r[t]||{},r[t][n]=e}function t(e,t){return r&&r[e]&&r[e][t]?r[e][t]:null}function n(){r={}}var r={};return{save:e,extract:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="InitCache",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{10:10}],154:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){return e&&l&&l.boxes&&0!==l.boxes.length?s(l.fetch(e)):null}function t(e){for(var t,n=l.fetchAll(e),r=[],i=0,a=n.length;i<a;i++)(t=s(n[i]))&&r.push(t);return r}function n(e){l=e}function r(){if(!l||!l.boxes||!l.boxes.length)return null;var e=l.boxes[l.boxes.length-1].type,n=t(e);return n[n.length-1]}function i(){return l._cursor.offset}function a(e,t,n){for(var r in n)t[r]=e[n[r]]}function s(e){if(!e)return null;var t,n,r=new o.default;switch(a(e,r,d),e.hasOwnProperty("_incomplete")&&(r.isComplete=!e._incomplete),r.type){case"sidx":if(a(e,r,f),r.references)for(t=0,n=r.references.length;t<n;t++)a(e.references[t],r.references[t],c);break;case"emsg":a(e,r,h);break;case"mdhd":a(e,r,g);break;case"mfhd":a(e,r,p);break;case"subs":a(e,r,v);break;case"tfhd":a(e,r,m);break;case"tfdt":a(e,r,y);break;case"trun":if(a(e,r,_),r.samples)for(t=0,n=r.samples.length;t<n;t++)a(e.samples[t],r.samples[t],E)}return r}var u=void 0,l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,g=void 0,p=void 0,v=void 0,m=void 0,y=void 0,_=void 0,E=void 0;return u={getBox:e,getBoxes:t,setData:n,getLastBox:r,getOffset:i},function(){d={offset:"_offset",size:"size",type:"type"},f={references:"references",timescale:"timescale",earliest_presentation_time:"earliest_presentation_time",first_offset:"first_offset"},c={reference_type:"reference_type",referenced_size:"referenced_size",subsegment_duration:"subsegment_duration"},h={id:"id",value:"value",timescale:"timescale",scheme_id_uri:"scheme_id_uri",presentation_time_delta:"presentation_time_delta",event_duration:"event_duration",message_data:"message_data"},g={timescale:"timescale"},p={sequence_number:"sequence_number"},v={entry_count:"entry_count",entries:"entries"},m={base_data_offset:"base_data_offset",sample_description_index:"sample_description_index",default_sample_duration:"default_sample_duration",default_sample_size:"default_sample_size",default_sample_flags:"default_sample_flags",flags:"flags"},y={version:"version",baseMediaDecodeTime:"baseMediaDecodeTime",flags:"flags"},_={sample_count:"sample_count",first_sample_flags:"first_sample_flags",data_offset:"data_offset",flags:"flags",samples:"samples"},E={sample_size:"sample_size",sample_duration:"sample_duration",sample_composition_time_offset:"sample_composition_time_offset"}}(),u}Object.defineProperty(n,"__esModule",{value:!0});var a=e(168),o=r(a),s=e(10),u=r(s);i.__dashjs_factory_name="IsoFile",n.default=u.default.getClassFactory(i),t.exports=n.default},{10:10,168:168}],155:[function(e,t,n){function r(){function e(e,t){r=e,i=t}function t(){var e=i.getCurrentRepresentationInfo(),t=e.DVRWindow.end;return e.useCalculatedLiveEdgeTime&&(t=r.getExpectedLiveEdge(),r.setClientTimeOffset(t-e.DVRWindow.end)),t}function n(){r=null,i=null}var r=void 0,i=void 0;return{initialize:e,getLiveEdge:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="LiveEdgeFinder";var o=a.default.getSingletonFactory(r);n.default=o,t.exports=n.default},{10:10}],156:[function(e,t,n){function r(){function e(e,t){return JSON.stringify(e)===JSON.stringify(t)}return{areSimpleEquivalent:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="ObjectUtils",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{10:10}],157:[function(e,t,n){function r(){function e(e){return e}function t(e){return e}return{modifyRequestURL:e,modifyRequestHeader:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="RequestModifier",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{10:10}],158:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&e.videoModel&&(ne=e.videoModel)}function t(e){if(e.hasOwnProperty("begin")&&e.hasOwnProperty("end")){return[h(e.begin),h(e.end)]}return null}function n(){var e="cue_TTML_"+ie;return ie++,e}function r(e,t,n){function r(e,t){if(e.hasOwnProperty(t)){var n=e[t];a.indexOf(n)<0&&a.push(n)}}for(var i=[],a=[],o=[],s=0;s<e.length;s++){var u=e[s];r(u,"begin"),r(u,"end")}if(0===a.length)return o;if(void 0!==t&&void 0!==n){for(var s=0;s<a.length;s++){var l=h(a[s]);t<l&&l<n&&i.push(l)}i.push(t),i.push(n)}else for(var s=0;s<a.length;s++)i.push(h(a[s]));i.sort(function(e,t){return e-t});for(var s=0;s<i.length-1;s++)o.push([i[s],i[s+1]]);return o}function i(e,t){return void 0!==t&&e<t&&(e=t),e}function a(e,t){return void 0!==t&&e>t&&(e=t),e}function o(e,t,n){var r=h(e.begin),o=h(e.end);return r=i(r,t),o=a(o,n),void 0!==t&&void 0!==n&&(o<t||r>n)?(U("TTML: Cue "+r+"-"+o+" outside interval "+t+"-"+n),null):[r,o]}function s(e,n){var r=!0;if(e.hasOwnProperty("span")){var i=t(e.span);null!==i&&(r=i[0]<n[1]&&i[1]>n[0])}return r}function l(e,i,a,u){var l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,v="";if(!(G=re.xml_str2json(e)))throw new Error("TTML document could not be parsed");if(ne.getTTMLRenderingDiv()&&(c="html"),!(l=G.tt))throw new Error("TTML document lacks tt element");var m=g(l,"http://www.w3.org/ns/ttml");if(m&&p(l,m),f=l["tts:extent"],!(d=l.head))throw new Error("TTML document lacks head element");d.layout&&(H=d.layout.region_asArray),d.styling&&(K=d.styling.style_asArray);var y={};if(u)for(h=0;h<u.length;h++){var S="urn:mpeg:14496-30:subs:"+(h+1).toString(),b="data:image/png;base64,"+btoa(u[h]);y[S]=b}if(d.metadata){var R=d.metadata.image_asArray;if(R)for(h=0;h<R.length;h++){var S="#"+R[h]["xml:id"],A=R[h].imagetype.toLowerCase(),b="data:image/"+A+";base64,"+R[h].__text;y[S]=b}}if(!l.body)throw new Error("TTML document lacks body element");var w=C(),M=ne.getElement().clientWidth,F=ne.getElement().clientHeight,N=[M/w[0],F/w[1]];W["font-size"]=N[1]+"px;";var B=[];if(H)for(h=0;h<H.length;h++)B.push(D(JSON.parse(JSON.stringify(H[h])),N));var j=g(G.tt,"http://www.w3.org/ns/ttml#parameter");l.hasOwnProperty(j+":frameRate")&&(l.frameRate=parseInt(l[j+":frameRate"],10));for(var z=[],Q=l.body_asArray[0].__children,X=0;X<Q.length;X++){var J=Q[X].div,Z=null;if(null===(Z=t(J))){var $=J.p_asArray;if(null===Z&&(!$||0===$.length))return v="TTML has div that contains no timing and no paragraphs.",U(v),z;for(var ee=0;ee<$.length;ee++){var te=$[ee],ie=te.span_asArray,ae=[];if(te.hasOwnProperty("begin")&&te.hasOwnProperty("end")){var oe=o(te,i,a);null!==oe&&ae.push(oe)}else ae=r(ie,i,a);if(0!==ae.length)for(var se=te.__children,ue=0;ue<ae.length;ue++){for(var le=ae[ue],de=[],fe=0;fe<se.length;fe++){var ce=se[fe];s(ce,le)&&de.push(ce)}if(0!==de.length)if("html"===c){V={},Y={},q={};var he=x(te,J,N),ge=k(te,N),pe=ge[1];ge=ge[0];var ve=document.createElement("div");ve.className=pe;var me=L(de,N);me.className="cueDirUniWrapper",_("unicode-bidi",ge)&&(me.style.cssText+=E("unicode-bidi",ge),T("unicode-bidi",ge)),_("direction",ge)&&(me.style.cssText+=E("direction",ge),T("direction",ge)),_("padding-left",ge)&&_("padding-right",ge)&&(me.innerHTML=P(me,ge)),_("padding-left",ge)&&_("padding-right",ge)&&(T("padding-left",ge),T("padding-right",ge));var ye="";if(_("regionID",he)){var _e=E("regionID",he);ye=_e.slice(_e.indexOf(":")+1,_e.length-1)}ge&&(ve.style.cssText=ge.join(" ")+"display:flex;"),he&&(he=he.join(" ")),ve.appendChild(me);var Ee=document.createElement("div");Ee.appendChild(ve),Ee.id=n(),Ee.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+he,0===Object.keys(q).length&&(q.defaultFontSize="100"),z.push({start:le[0],end:le[1],type:"html",cueHTMLElement:Ee,regions:B,regionID:ye,cueID:Ee.id,videoHeight:F,videoWidth:M,cellResolution:w,fontSize:q||{defaultFontSize:"100"},lineHeight:V,linePadding:Y})}else{var Te="",Se=de;Se.length&&Se.forEach(function(e){if(e.hasOwnProperty("span")){var t=e.span.__children;t.forEach(function(e){t.hasOwnProperty("metadata")||(e.hasOwnProperty("#text")?Te+=e["#text"].replace(/[\r\n]+/gm," ").trim():"br"in e&&(Te+="\n"))})}else Te+=e.hasOwnProperty("br")?"\n":e["#text"].replace(/[\r\n]+/gm," ").trim()}),z.push({start:le[0],end:le[1],data:Te,type:"text"})}}else v="TTML: Empty paragraph"}}else{var be=void 0;if(J.region){be=I(O(H,J.region),f)}be||(be=I(J,f));var Re=J["smpte:backgroundImage"];void 0!==Re&&void 0!==y[Re]&&z.push({start:Z[0],end:Z[1],id:n(),data:y[Re],type:"image",layout:be})}}if(""!==v&&U(v),z.length>0)return z;throw new Error(v)}function h(e){var t,n,r;if(!j.test(e))return NaN;if(t=e.split(":"),n=parseFloat(t[0])*f+parseFloat(t[1])*c+parseFloat(t[2]),t[3]){if(!(r=G.tt.frameRate)||isNaN(r))return NaN;n+=parseFloat(t[3])/r}return n}function g(e,t){var n=Object.keys(e).filter(function(n){return("xmlns"===n.split(":")[0]||"xmlns"===n.split(":")[1])&&e[n]===t}).map(function(e){return e.split(":")[2]||e.split(":")[1]});return 1!=n.length?null:n[0]}function p(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(("object"==typeof e[n]||e[n]instanceof Object)&&!Array.isArray(e[n]))p(e[n],t);else if(Array.isArray(e[n]))for(var r=0;r<e[n].length;r++)p(e[n][r],t);var i=t+":",a=n.indexOf(i);if(a>=0){var o=n.slice(a+i.length);e[o]=e[n],delete e[n]}}}function v(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function m(e){var t=e.slice(1),n=t.match(/.{2}/g),r=parseFloat(parseInt(parseInt(n[3],16)/255*1e3,10)/1e3);return"rgba("+n.slice(0,3).map(function(e){return parseInt(e,16)}).join(",")+","+r+");"}function y(e){var t=void 0,n=void 0;return t=e.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),n=parseInt(t[t.length-1],10)/255,"rgba("+t[0]+","+t[1]+","+t[2]+","+n+");"}function _(e,t){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>-1)return!0;return!1}function E(e,t){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>-1)return t[n];return null}function T(e,t){t.splice(t.indexOf(E(e,t)),1)}function S(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)e[n]&&e[n].split(":")[0].indexOf(t[r].split(":")[0])>-1&&e.splice(n,1);return e.concat(t)}function b(e){
var t=new Array(2),n=-1===e.indexOf(":")?0:e.indexOf(":"),r=void 0;return-1===e.indexOf("%")?-1===e.indexOf("c")?-1===e.indexOf("p")?t[0]=t[1]=null:(t[0]="p",r=e.indexOf("p")):(t[0]="c",r=e.indexOf("c")):(t[0]="%",r=e.indexOf("%")),t[1]=e.slice(n,r),t}function R(e,t,n){var r,i,a=[];for(var o in e)if(e.hasOwnProperty(o)){var s=o.replace("ebutts:","");s=s.replace("xml:",""),s=s.replace("tts:",""),s=v(s),e[s]=e[o],delete e[o]}if("line-padding"in e){var u=parseFloat(e["line-padding"].slice(e["line-padding"].indexOf(":")+1,e["line-padding"].indexOf("c")));"id"in e&&(Y[e.id]=u);var l=u*t[0]+"px;";a.push("padding-left:"+l),a.push("padding-right:"+l)}if("font-size"in e){var d=b(e["font-size"]),f=parseFloat(d[1]);"id"in e&&(q[e.id]=d),"%"===d[0]?r=f/100*t[1]+"px;":"c"===d[0]&&(r=f*t[1]+"px;"),a.push("font-size:"+r)}if("line-height"in e)if("normal"===e["line-height"])a.push("line-height: normal;");else{var c=b(e["line-height"]),h=parseFloat(c[1]);"id"in e&&(V[e.id]=c),"%"===c[0]?i=h/100*t[1]+"px;":"c"===c[0]&&(i=h*t[1]+"px;"),a.push("line-height:"+i)}"font-family"in e&&(e["font-family"]in Q?a.push(Q[e["font-family"]]):a.push("font-family:"+e["font-family"]+";")),"text-align"in e&&e["text-align"]in X&&(a.push(X[e["text-align"]][0]),a.push(X[e["text-align"]][1])),"multi-row-align"in e&&(_("text-align",a)&&"auto"!=e["multi-row-align"]&&T("text-align",a),e["multi-row-align"]in J&&a.push(J[e["multi-row-align"]]));var g;return"background-color"in e&&(g=e["background-color"].indexOf("#")>-1&&e["background-color"].length-1==8?m(e["background-color"]):e["background-color"].indexOf("rgba")>-1?y(e["background-color"]):e["background-color"]+";",a.push("background-color: "+g)),"color"in e&&(g=e.color.indexOf("#")>-1&&e.color.length-1==8?m(e.color):e.color.indexOf("rgba")>-1?y(e.color):e.color+";",a.push("color: "+g)),"wrap-option"in e&&(e["wrap-option"]in Z?a.push(Z[e["wrap-option"]]):a.push("white-space:"+e["wrap-option"])),"unicode-bidi"in e&&(e["unicode-bidi"]in $?a.push($[e["unicode-bidi"]]):a.push("unicode-bidi:"+e["unicode-bidi"])),"font-style"in e&&a.push("font-style:"+e["font-style"]+";"),"font-weight"in e&&a.push("font-weight:"+e["font-weight"]+";"),"direction"in e&&a.push("direction:"+e.direction+";"),"text-decoration"in e&&a.push("text-decoration:"+e["text-decoration"]+";"),n&&(a=a.concat(D(e,t))),G.tt.hasOwnProperty("xml:space")&&"preserve"===G.tt["xml:space"]&&a.push("white-space: pre;"),a}function A(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r["xml:id"]===t||r.id===t)return r}return null}function w(e,t,n){var r=[];return e.match(/\S+/g).forEach(function(e){var i=A(K,e);if(i){var a=R(JSON.parse(JSON.stringify(i)),t,n);r=r.concat(a)}}),r}function I(e,t){var n=/([\d\.]+)(%|px)\s+([\d\.]+)(%|px)/;if("tts:extent"in e&&"tts:origin"in e){var r=n.exec(e["tts:extent"]),i=n.exec(e["tts:origin"]);if(null===r||null===i)return U("Bad extent or origin: "+e["tts:extent"]+" "+e["tts:origin"]),null;var a=parseFloat(r[1]),o=parseFloat(r[3]),s=parseFloat(i[1]),u=parseFloat(i[3]);if(t){var l=n.exec(t);if(null===l||"px"!==l[2]||"px"!==l[4])return U("Bad tt.extent: "+t),null;var d=parseFloat(l[1]),f=parseFloat(l[3]);"px"===r[2]&&(a=a/d*100),"px"===r[4]&&(o=o/f*100),"px"===i[2]&&(s=s/d*100),"px"===i[4]&&(u=u/f*100)}return{left:s,top:u,width:a,height:o}}return null}function D(e,t){var n=[];for(var r in e){var i=r.replace("tts:","");i=i.replace("xml:",""),i=v(i),e[i]=e[r],i!==r&&delete e[r]}if("extent"in e){var a=e.extent.split(/\s/);n.push("width: "+a[0]+";"),n.push("height: "+a[1]+";")}if("origin"in e){var o=e.origin.split(/\s/);n.push("left: "+o[0]+";"),n.push("top: "+o[1]+";")}if("display-align"in e&&n.push(ee[e["display-align"]]),"writing-mode"in e&&n.push(te[e["writing-mode"]]),"style"in e){var s=w(e.style,t,!0);n=n.concat(s)}return"padding"in e&&n.push("padding:"+e.padding+";"),"overflow"in e&&n.push("overflow:"+e.overflow+";"),"show-background"in e&&n.push("show-background:"+e["show-background"]+";"),"id"in e&&n.push("regionID:"+e.id+";"),n}function O(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r["xml:id"]===t||r.id===t)return r}return null}function M(e,t){var n=[];return e.match(/\S+/g).forEach(function(e){var r=O(H,e);if(r){var i=D(JSON.parse(JSON.stringify(r)),t);n=n.concat(i)}}),n}function C(){var e=[32,15];return G.tt.hasOwnProperty("ttp:cellResolution")?G.tt["ttp:cellResolution"].split(" ").map(parseFloat):e}function P(e,t){for(var n=E("padding-left",t),r=E("padding-right",t),i=n.concat(" "+r+" "),a="",o="",s="",u=Array.prototype.slice.call(e.children),l=e.getElementsByClassName("lineBreak")[0],d=u.indexOf(l),f=[];-1!=d;)f.push(d),d=u.indexOf(l,d+1);var c="</span>",h="<br>",g='<span class="spanPadding" style="-webkit-box-decoration-break: clone; box-decoration-break: clone; ';if(f.length)f.forEach(function(e,t){if(0===t){for(var n="",r=0;r<e;r++)a+=u[r].outerHTML,0===r&&(n=i.concat(u[r].style.cssText));a=g+n+'">'+a}for(var l="",d=e+1;d<u.length;d++)o+=u[d].outerHTML,d===u.length-1&&(l+=i.concat(u[d].style.cssText));o=g+l+'">'+o,a&&o&&t===f.length-1?s+=a+c+h+o+c:a&&o&&t!==f.length-1?s+=a+c+h+o+c+h:a&&!o?s+=a+c:!a&&o&&t===f.length-1?s+=o+c:!a&&o&&t!==f.length-1&&(s+=o+c+h)});else{for(var p="",v=0;v<u.length;v++)p+=u[v].style.cssText;s=g+i+p+'">'+e.innerHTML+c}return s}function L(e,t){var n=document.createElement("div");return e.forEach(function(e){if(!e.hasOwnProperty("metadata"))if(e.hasOwnProperty("span")){var r=e.span.__children,i=document.createElement("span");if(e.span.hasOwnProperty("style")){var a=w(e.span.style,t);i.className="spanPadding "+e.span.style,i.style.cssText=a.join(" ")}r.forEach(function(e){if(!r.hasOwnProperty("metadata"))if(e.hasOwnProperty("#text")){var t=document.createTextNode(e["#text"]);i.appendChild(t)}else if("br"in e){i.hasChildNodes()&&n.appendChild(i);var a=document.createElement("br");a.className="lineBreak",n.appendChild(a);var o=document.createElement("span");o.className=i.className,o.style.cssText=i.style.cssText,i=o}}),n.appendChild(i)}else if(e.hasOwnProperty("br")){var o=document.createElement("br");o.className="lineBreak",n.appendChild(o)}else if(e.hasOwnProperty("#text")){var s=document.createElement("span");s.textContent=e["#text"],n.appendChild(s)}}),n}function x(e,t,n){var r,i,a=[],o=e.region,s=t.region;return s&&(r=M(s,n)),o?(i=a.concat(M(o,n)),a=r?S(r,i):i):r&&(a=r),F(a,z),a}function k(e,t){var n,r,i,a=[],o=e.style,s=G.tt.body.style,u=G.tt.body.div.style,l="";return s&&(n=w(s,t),l="paragraph "+s),u&&(r=w(u,t),n?(r=S(n,r),l+=" "+u):l="paragraph "+u),o?(i=w(o,t),n&&r?(a=S(r,i),l+=" "+o):n?(a=S(n,i),l+=" "+o):r?(a=S(r,i),l+=" "+o):(a=i,l="paragraph "+o)):n&&!r?a=n:!n&&r&&(a=r),F(a,W),[a,l]}function F(e,t){for(var n in t)t.hasOwnProperty(n)&&(_(n,e)||e.push(n+":"+t[n]))}var N=this.context,U=(0,d.default)(N).getInstance().log,B=void 0,j=void 0,G=void 0,K=void 0,H=void 0,q=void 0,V=void 0,Y=void 0,z=void 0,W=void 0,Q=void 0,X=void 0,J=void 0,Z=void 0,$=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=0;return B={parse:l,setConfig:e},function(){j=/^([0-9][0-9]+):([0-5][0-9]):([0-5][0-9])|(60)(\.([0-9])+)?$/,q={},V={},Y={},z={top:"auto;",left:"auto;",width:"90%;",height:"10%;","align-items":"flex-start;",overflow:"visible;","-ms-writing-mode":"lr-tb, horizontal-tb;","-webkit-writing-mode":"horizontal-tb;","-moz-writing-mode":"horizontal-tb;","writing-mode":"horizontal-tb;"},W={color:"rgb(255,255,255);",direction:"ltr;","font-family":"monospace, sans-serif;","font-style":"normal;","line-height":"normal;","font-weight":"normal;","text-align":"start;","justify-content":"flex-start;","text-decoration":"none;","unicode-bidi":"normal;","white-space":"normal;",width:"100%;"},Q={monospace:"font-family: monospace;",sansSerif:"font-family: sans-serif;",serif:"font-family: serif;",monospaceSansSerif:"font-family: monospace, sans-serif;",monospaceSerif:"font-family: monospace, serif;",proportionalSansSerif:"font-family: Arial;",proportionalSerif:"font-family: Times New Roman;",default:"font-family: monospace, sans-serif;"},X={right:["justify-content: flex-end;","text-align: right;"],start:["justify-content: flex-start;","text-align: start;"],center:["justify-content: center;","text-align: center;"],end:["justify-content: flex-end;","text-align: end;"],left:["justify-content: flex-start;","text-align: left;"]},J={start:"text-align: start;",center:"text-align: center;",end:"text-align: end;",auto:""},Z={wrap:"white-space: normal;",noWrap:"white-space: nowrap;"},$={normal:"unicode-bidi: normal;",embed:"unicode-bidi: embed;",bidiOverride:"unicode-bidi: bidi-override;"},ee={before:"align-items: flex-start;",center:"align-items: center;",after:"align-items: flex-end;"},te={lrtb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rltb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;unicode-bidi: bidi-override;",tbrl:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;",tblr:"-webkit-writing-mode: vertical-lr;writing-mode: vertical-lr;-webkit-text-orientation: upright;text-orientation: upright;",lr:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rl:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;",tb:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;"},re=new u.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,matchers:[]})}(),B}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(4),u=r(s),l=e(8),d=r(l),f=3600,c=60;i.__dashjs_factory_name="TTMLParser",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{10:10,4:4,8:8}],159:[function(e,t,n){function r(){function e(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function t(e){var t=e.match(f);return t?t[1]:""}function n(e){var t=e.match(l);return t?t[0]:""}function r(e){return!l.test(e)}function i(e){return r(e)&&"/"===e.charAt(0)}function a(e){return 0===e.indexOf("//")}function o(e){return d.test(e)}function s(e,t){return u(e,t)}var u=void 0,l=/^[a-z][a-z0-9+\-.]*:/i,d=/^https?:\/\//i,f=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,c=function(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}},h=function(o,s){var u=e;if(!s)return o;if(!r(o))return o;i(o)&&(u=t),a(o)&&(u=n);var l=u(s);return[l,o].join("/"!==l.charAt(l.length-1)&&"/"!==o.charAt(0)?"/":"")};return function(){try{new window.URL("x","http://y"),u=c}catch(e){}finally{u=u||h}}(),{parseBaseUrl:e,parseOrigin:t,parseScheme:n,isRelative:r,isPathAbsolute:i,isSchemeRelative:a,isHTTPURL:o,resolve:s}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="URLUtils",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{10:10}],160:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var r,a,s=[];e=e.split(l),r=e.length,a=-1;for(var u=0;u<r;u++){var c=e[u];if(c.length>0&&"WEBVTT"!==c&&c.match(d)){var h=n(c),g=h.cuePoints,p=h.styles,v=i(e,u+1),m=t(g[0].replace(f,"")),y=t(g[1].replace(f,""));!isNaN(m)&&!isNaN(y)&&m>=a&&y>m?""!==v?(a=m,s.push({start:m,end:y,data:v,styles:p})):o("Skipping cue due to empty/malformed cue text"):o("Skipping cue due to incorrect cue timing")}}return s}function t(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function n(e){var t=e.split(d),n=t[1].split(c);return n.shift(),t[1]=n[0],n.shift(),{cuePoints:t,styles:r(n)}}function r(e){var t={};return e.forEach(function(e){if(e.split(/:/).length>1){var n=e.split(/:/)[1];n&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=n),(e.match(/line/)||e.match(/L/))&&(t.line=n),(e.match(/position/)||e.match(/P/))&&(t.position=n),(e.match(/size/)||e.match(/S/))&&(t.size=n)}}),t}function i(e,t){for(var n,r=t,i="",a="";""!==e[r]&&r<e.length;)r++;if((n=r-t)>1)for(var o=0;o<n;o++){if(a=e[t+o],a.match(d)){i="";break}i+=a,o!==n-1&&(i+="\n")}else a=e[t],a.match(d)||(i=a);return i}var a=this.context,o=(0,u.default)(a).getInstance().log,s=void 0,l=void 0,d=void 0,f=void 0,c=void 0;return s={parse:e},function(){l=/(?:\r\n|\r|\n)/gm,d=/-->/,f=/(^[\s]+|[\s]+$)/g,c=/\s\b/g}(),s}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),o=r(a),s=e(8),u=r(s);i.__dashjs_factory_name="VTTParser",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{10:10,8:8}],161:[function(e,t,n){function r(e){function t(e){var t,r=0;return e&&e.some(function(e,t){return r=t,!n.contains(e.serviceLocation)})&&(t=e[r]),t}var n=e.blacklistController;return{select:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="BasicSelector",n.default=a.default.getClassFactory(r),t.exports=n.default},{10:10}],162:[function(e,t,n){function r(e){function t(e){var t=[],n=function(e){return!t.length||!e.dvb_priority||-1===t.indexOf(e.dvb_priority)},r=function(e){return!i.contains(e.serviceLocation)||(e.dvb_priority&&t.push(e.dvb_priority),!1)};return e.filter(r).filter(n)}function n(e){var t,n,r=function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n},i=function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority},a=0,o=[],s=0;if(n=e.sort(r).filter(i),n.length)return n.length>1&&(n.forEach(function(e){a+=e.dvb_weight,o.push(a)}),t=Math.floor(Math.random()*(a-1)),o.every(function(e,n){return s=n,!(t<e)})),n[s]}function r(e){return e&&n(t(e))}var i=e.blacklistController;return{select:r}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="DVBSelector",n.default=a.default.getClassFactory(r),t.exports=n.default},{10:10}],163:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.qualityIndex=NaN};n.default=i,t.exports=n.default},{}],164:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null};n.default=i,t.exports=n.default},{}],165:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(t,n,i){r(this,e),this.code=t||null,this.message=n||null,this.data=i||null};n.default=i,t.exports=n.default},{}],166:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null};i.ACTION_DOWNLOAD="download",i.ACTION_COMPLETE="complete",n.default=i,t.exports=n.default},{}],167:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}},o=e(166),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(e){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.checkForExistenceOnly=!0}return i(t,e),t}(s.default);n.default=u,t.exports=n.default},{166:166}],168:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.offset=NaN,this.type=null,this.size=NaN,this.isComplete=!0};n.default=i,t.exports=n.default},{}],169:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null};n.default=i,t.exports=n.default},{}],170:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null};n.default=i,t.exports=n.default},{}],171:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[],this.BolaState=[]};n.default=i,t.exports=n.default},{}],172:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isFirst=!0};n.default=i,t.exports=n.default},{}],173:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}},o=e(166),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(e,n){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.type=n||null,this.mediaType="stream",this.responseType="text"}return i(t,e),t}(s.default);n.default=u,t.exports=n.default},{166:166}],174:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.video=null,this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1};n.default=i,t.exports=n.default},{}],175:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null};n.default=i,t.exports=n.default},{}],176:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null};n.default=i,t.exports=n.default},{}],177:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this._s=void 0};n.default=i,t.exports=n.default},{}],178:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.t=null,this.level=null};n.default=i,t.exports=n.default},{}],179:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=e(62),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=function e(){r(this,e),this.target=null,this.state=a.default.BUFFER_EMPTY};n.default=o,t.exports=n.default},{62:62}],180:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.time=null,this.range=null,this.manifestInfo=null};n.default=i,t.exports=n.default},{}],181:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.time=null,this.droppedFrames=null};n.default=i,t.exports=n.default},{}],182:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null},a=function e(){r(this,e),this.s=null,this.d=null,this.b=[]};i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.OTHER_TYPE="other",n.HTTPRequest=i,n.HTTPRequestTrace=a},{}],183:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.trackInfo=[]},a=function e(){r(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},o=function e(){r(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null};n.ManifestUpdate=i,n.ManifestUpdateStreamInfo=a,n.ManifestUpdateTrackInfo=o},{}],184:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start";var a=function e(){r(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure",n.PlayList=i,n.PlayListTrace=a},{}],185:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null};n.default=i,t.exports=n.default},{}],186:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.loadingRequests=[],this.executedRequests=[]};n.default=i,t.exports=n.default},{}],187:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null};n.default=i,t.exports=n.default},{}],188:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null};n.default=i,t.exports=n.default},{}]},{},[5]),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Hls=e()}}(function(){var e;return function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){var n=t[o][1][e];return i(n||e)},d,d.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function a(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,a,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,u=0;u<r;u++)l[u].apply(this,a);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.trace),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(t,n,r){!function(t){var i={buildAbsoluteURL:function(e,t){if(t=t.trim(),/^[a-z]+:/i.test(t))return t;var n=null,r=null,a=/^([^#]*)(.*)$/.exec(t);a&&(r=a[2],t=a[1]);var o=/^([^\?]*)(.*)$/.exec(t);o&&(n=o[2],t=o[1]);var s=/^([^#]*)(.*)$/.exec(e);s&&(e=s[1]);var u=/^([^\?]*)(.*)$/.exec(e);u&&(e=u[1]);var l=/^(([a-z]+:)?\/\/[a-z0-9\.\-_~]+(:[0-9]+)?)?(\/.*)$/i.exec(e);if(!l)throw new Error("Error trying to parse base URL.");var d=l[2]||"",f=l[1]||"",c=l[4],h=null;return h=/^\/\//.test(t)?d+"//"+i.buildAbsolutePath("",t.substring(2)):/^\//.test(t)?f+"/"+i.buildAbsolutePath("",t.substring(1)):i.buildAbsolutePath(f+c,t),n&&(h+=n),r&&(h+=r),h},buildAbsolutePath:function(e,t){for(var n,r,i=t,a="",o=e.replace(/[^\/]*$/,i.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),s=0;(r=o.indexOf("/../",s))>-1;s=r+n)n=/^\/(?:\.\.\/)*/.exec(o.slice(r))[0].length,a=(a+o.substring(s,r)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(n-1)/3+"}$"),"/");return a+o.substr(s)}};"object"==typeof r&&"object"==typeof n?n.exports=i:"function"==typeof e&&e.amd?e([],function(){return i}):"object"==typeof r?r.URLToolkit=i:t.URLToolkit=i}(this)},{}],3:[function(e,t,n){var r=arguments[3],i=arguments[4],a=arguments[5],o=JSON.stringify;t.exports=function(e,t){function n(e){v[e]=!0;for(var t in i[e][1]){var r=i[e][1][t];v[r]||n(r)}}for(var s,u=Object.keys(a),l=0,d=u.length;l<d;l++){var f=u[l],c=a[f].exports;if(c===e||c&&c.default===e){s=f;break}}
if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},l=0,d=u.length;l<d;l++){var f=u[l];h[f]=f}i[s]=[Function(["require","module","exports"],"("+e+")(self)"),h]}var g=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[s]=s,i[g]=[Function(["require"],"var f = require("+o(s)+");(f.default ? f.default : f)(self);"),p];var v={};n(g);var m="("+r+")({"+Object.keys(v).map(function(e){return o(e)+":["+i[e][0]+","+o(i[e][1])+"]"}).join(",")+"},{},["+o(g)+"])",y=window.URL||window.webkitURL||window.mozURL||window.msURL,_=new Blob([m],{type:"text/javascript"});if(t&&t.bare)return _;var E=y.createObjectURL(_),T=new Worker(E);return T.objectURL=E,T}},{}],4:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),f=r(d),c=e(30),h=r(c),g=e(26),p=e(45),v=e(9),m=r(v),y=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.FRAG_LOADING,l.default.FRAG_LOADED,l.default.FRAG_BUFFERED,l.default.ERROR));return n.lastLoadedFragLevel=0,n._autoLevelCapping=-1,n._nextAutoLevel=-1,n.hls=e,n.onCheck=n.abandonRulesCheck.bind(n),n}return o(t,e),s(t,[{key:"destroy",value:function(){this.clearTimer(),f.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this.bwEstimator){var n=this.hls,r=e.frag.level,i=n.levels[r].details.live,a=n.config,o=void 0,s=void 0;i?(o=a.abrEwmaFastLive,s=a.abrEwmaSlowLive):(o=a.abrEwmaFastVoD,s=a.abrEwmaSlowVoD),this.bwEstimator=new m.default(n,s,o,a.abrEwmaDefaultEstimate)}this.fragCurrent=t}}},{key:"abandonRulesCheck",value:function(){var e=this.hls,t=e.media,n=this.fragCurrent,r=n.loader;if(!r||r.stats&&r.stats.aborted)return p.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var i=r.stats;if(t&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var a=performance.now()-i.trequest,o=Math.abs(t.playbackRate);if(a>500*n.duration/o){var s=e.levels,u=Math.max(1,i.bw?i.bw/8:1e3*i.loaded/a),d=i.total?i.total:Math.max(i.loaded,Math.round(n.duration*s[n.level].bitrate/8)),f=t.currentTime,c=(d-i.loaded)/u,g=(h.default.bufferInfo(t,f,e.config.maxBufferHole).end-f)/o;if(g<2*n.duration/o&&c>g){var v=void 0,m=void 0;for(m=n.level-1;m>=0&&!((v=n.duration*s[m].bitrate/(6.4*u))<g);m--);v<c&&(m=Math.max(0,m),p.logger.warn("loading too slow, abort fragment loading and switch to level "+m+":fragLoadedDelay["+m+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+v.toFixed(1)+"<"+c.toFixed(1)+":"+g.toFixed(1)),e.nextLoadLevel=m,this.bwEstimator.sample(a,i.loaded),r.abort(),this.clearTimer(),e.trigger(l.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:i}))}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if("main"===t.type&&(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,e.frag.bitrateTest)){var n=e.stats;n.tparsed=n.tbuffered=n.tload,this.onFragBuffered(e)}}},{key:"onFragBuffered",value:function(e){var t=e.stats,n=e.frag;if(!0!==t.aborted&&1===n.loadCounter&&"main"===n.type&&(!n.bitrateTest||t.tload===t.tbuffered)){var r=t.tbuffered-t.trequest;p.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this.bwEstimator.sample(r,t.loaded),n.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}}},{key:"onError",value:function(e){switch(e.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"findBestLevel",value:function(e,t,n,r,i,a,o,s,u){for(var l=i;l>=r;l--){var d=u[l],f=d.details,c=f?f.totalduration/f.fragments.length:t,h=!!f&&f.live,g=void 0;g=l<=e?o*n:s*n;var v=u[l].bitrate,m=v*c/g;if(p.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(g)+"/"+v+"/"+c+"/"+a+"/"+m),g>v&&(!m||h||m<a))return l}return-1}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping=e}},{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator,n=this.hls,r=n.levels,i=n.config.minAutoBitrate;if(!(-1===e||t&&t.canEstimate()))return Math.min(e,this.maxAutoLevel);var a=this.nextABRAutoLevel;if(-1!==e&&(a=Math.min(e,a)),void 0!==i)for(;r[a].bitrate<i;)a++;return a},set:function(e){this._nextAutoLevel=e}},{key:"minAutoLevel",get:function(){for(var e=this.hls,t=e.levels,n=e.config.minAutoBitrate,r=0;r<t.length;r++)if(t[r].bitrate>n)return r;return 0}},{key:"maxAutoLevel",get:function(){var e=this.hls.levels,t=this._autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextABRAutoLevel",get:function(){var e=this.hls,t=this.maxAutoLevel,n=e.levels,r=e.config,i=this.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=a?a.currentTime:0,l=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this.bwEstimator?this.bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,f=(h.default.bufferInfo(a,u,r.maxBufferHole).end-u)/l,c=this.findBestLevel(o,s,d,i,t,f,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(c>=0)return c;p.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var g=r.maxStarvationDelay,v=r.abrBandWidthFactor,m=r.abrBandWidthUpFactor;if(0===f){var y=this.bitrateTestDelay;y&&(g=r.maxLoadingDelay-y,p.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*g)+" ms"),v=m=1)}return c=this.findBestLevel(o,s,d,i,t,f+g,v,m,n),Math.max(c,0)}}]),t}(f.default);n.default=y},{26:26,27:27,28:28,30:30,45:45,9:9}],5:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(41),l=r(u),d=e(30),f=r(d),c=e(22),h=r(c),g=e(28),p=r(g),v=e(27),m=r(v),y=e(31),_=r(y),E=e(47),T=r(E),S=e(26),b=e(45),R={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR"},A=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,p.default.MEDIA_ATTACHED,p.default.MEDIA_DETACHING,p.default.AUDIO_TRACKS_UPDATED,p.default.AUDIO_TRACK_SWITCH,p.default.AUDIO_TRACK_LOADED,p.default.KEY_LOADED,p.default.FRAG_LOADED,p.default.FRAG_PARSING_INIT_SEGMENT,p.default.FRAG_PARSING_DATA,p.default.FRAG_PARSED,p.default.ERROR,p.default.BUFFER_CREATED,p.default.BUFFER_APPENDED,p.default.BUFFER_FLUSHED));return n.config=e.config,n.audioCodecSwap=!1,n.ticks=0,n.ontick=n.tick.bind(n),n}return o(t,e),s(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),m.default.prototype.destroy.call(this),this.state=R.STOPPED}},{key:"startLoad",value:function(e){if(this.tracks){var t=this.media,n=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t&&n?(b.logger.log("configure startPosition @"+n),this.state=R.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=R.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=R.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=R.STOPPED}},{key:"tick",value:function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var e,t,n,r=this.hls,i=r.config;switch(this.state){case R.ERROR:case R.PAUSED:break;case R.STARTING:this.state=R.WAITING_TRACK,this.loadedmetadata=!1;break;case R.IDLE:if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;e=this.loadedmetadata?this.media.currentTime:this.nextLoadPosition;var a=this.mediaBuffer?this.mediaBuffer:this.media,o=f.default.bufferInfo(a,e,i.maxBufferHole),s=o.len,u=o.end,d=this.fragPrevious;if(s<i.maxMaxBufferLength&&this.trackId<this.tracks.length){if(void 0===(n=this.tracks[this.trackId].details)){this.state=R.WAITING_TRACK;break}if(!n.live&&d&&d.sn===n.endSN&&(!this.media.seeking||this.media.duration-u<d.duration/2)){this.hls.trigger(p.default.BUFFER_EOS,{type:"audio"}),this.state=R.ENDED;break}var c=n.fragments,h=c.length,g=c[0].start,v=c[h-1].start+c[h-1].duration,m=void 0;if(u<g?m=c[0]:function(){var e=void 0,t=i.maxFragLookUpTolerance;u<v?(u>v-t&&(t=0),e=l.default.search(c,function(e){return e.start+e.duration-t<=u?1:e.start-t>u?-1:0})):e=c[h-1],e&&(m=e,g=e.start,d&&m.level===d.level&&m.sn===d.sn&&(m.sn<n.endSN?(m=c[m.sn+1-n.startSN],b.logger.log("SN just loaded, load next one: "+m.sn)):m=null))}(),m)if(null!=m.decryptdata.uri&&null==m.decryptdata.key)b.logger.log("Loading key for "+m.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+this.trackId),this.state=R.KEY_LOADING,r.trigger(p.default.KEY_LOADING,{frag:m});else{if(b.logger.log("Loading "+m.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+this.trackId+", currentTime:"+e+",bufferEnd:"+u.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,m.loadCounter){m.loadCounter++;var y=i.fragLoadingLoopThreshold;if(m.loadCounter>y&&Math.abs(this.fragLoadIdx-m.loadIdx)<y)return void r.trigger(p.default.ERROR,{type:S.ErrorTypes.MEDIA_ERROR,details:S.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:m})}else m.loadCounter=1;m.loadIdx=this.fragLoadIdx,this.fragCurrent=m,this.startFragRequested=!0,r.trigger(p.default.FRAG_LOADING,{frag:m}),this.state=R.FRAG_LOADING}}break;case R.WAITING_TRACK:(t=this.tracks[this.trackId])&&t.details&&(this.state=R.IDLE);break;case R.FRAG_LOADING_WAITING_RETRY:var _=performance.now(),E=this.retryDate;a=this.media;var T=a&&a.seeking;(!E||_>=E||T)&&(b.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=R.IDLE)}}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(b.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){this.state===R.ENDED&&(this.state=R.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaEnded",value:function(){this.startPosition=this.lastCurrentTime=0}},{key:"onAudioTracksUpdated",value:function(e){b.logger.log("audio tracks updated"),this.tracks=e.audioTracks}},{key:"onAudioTrackSwitch",value:function(e){var t=!!e.url;this.trackId=e.id,this.state=R.IDLE,this.fragCurrent=null,this.state=R.PAUSED,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.hls.trigger(p.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),this.tick()}},{key:"onAudioTrackLoaded",value:function(e){var t=e.details,n=e.id,r=this.tracks[n],i=t.totalduration;if(b.logger.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.PTSKnown=!1,r.details=t,!this.startFragRequested){if(-1===this.startPosition){var a=t.startTimeOffset;isNaN(a)?this.startPosition=0:(b.logger.log("start time offset found in playlist, adjust startPosition to "+a),this.startPosition=a)}this.nextLoadPosition=this.startPosition}this.state===R.WAITING_TRACK&&(this.state=R.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===R.KEY_LOADING&&(this.state=R.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent;if(this.state===R.FRAG_LOADING&&t&&"audio"===e.frag.type&&e.frag.level===t.level&&e.frag.sn===t.sn){this.state=R.PARSING,this.stats=e.stats;var n=this.tracks[this.trackId],r=n.details,i=r.totalduration,a=t.start,o=t.level,s=t.sn,u=this.config.defaultAudioCodec||n.audioCodec;this.pendingAppending=0,this.demuxer||(this.demuxer=new h.default(this.hls,"audio")),b.logger.log("Demuxing "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+o);var l=r.PTSKnown||!r.live;this.demuxer.push(e.payload,u,null,a,t.cc,o,s,i,t.decryptdata,l)}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent;if(t&&"audio"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===R.PARSING){var n=e.tracks,r=void 0;if(r=n.audio){r.levelCodec="mp4a.40.2",r.id=e.id,this.hls.trigger(p.default.BUFFER_CODECS,n),b.logger.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var i=r.initSegment;i&&(this.pendingAppending++,this.hls.trigger(p.default.BUFFER_APPENDING,{type:"audio",data:i,parent:"audio",content:"initSegment"})),this.tick()}}}},{key:"onFragParsingData",value:function(e){var t=this,n=this.fragCurrent;if(n&&"audio"===e.id&&e.sn===n.sn&&e.level===n.level&&this.state===R.PARSING){var r=this.tracks[this.trackId],i=this.fragCurrent;b.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),_.default.updateFragPTSDTS(r.details,i.sn,e.startPTS,e.endPTS),[e.data1,e.data2].forEach(function(n){n&&(t.pendingAppending++,t.hls.trigger(p.default.BUFFER_APPENDING,{type:e.type,data:n,parent:"audio",content:"data"}))}),this.nextLoadPosition=e.endPTS,this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent;t&&"audio"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===R.PARSING&&(this.stats.tparsed=performance.now(),this.state=R.PARSED,this._checkAppendedParsed())}},{key:"onBufferCreated",value:function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0)}},{key:"onBufferAppended",value:function(e){if("audio"===e.parent)switch(this.state){case R.PARSING:case R.PARSED:this.pendingAppending--,this._checkAppendedParsed()}}},{key:"_checkAppendedParsed",value:function(){if(this.state===R.PARSED&&0===this.pendingAppending){var e=this.fragCurrent,t=this.stats;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),this.hls.trigger(p.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;b.logger.log("audio buffered : "+T.default.toString(n.buffered)),this.state=R.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case S.ErrorDetails.FRAG_LOAD_ERROR:case S.ErrorDetails.FRAG_LOAD_TIMEOUT:if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var r=this.config;if(n<=r.fragLoadingMaxRetry){this.fragLoadError=n,t.loadCounter=0;var i=Math.min(Math.pow(2,n-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout);b.logger.warn("audioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.state=R.FRAG_LOADING_WAITING_RETRY}else b.logger.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.trigger(p.default.ERROR,e),this.state=R.ERROR}break;case S.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case S.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case S.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case S.ErrorDetails.KEY_LOAD_ERROR:case S.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==R.ERROR&&(this.state=e.fatal?R.ERROR:R.IDLE,b.logger.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."))}}},{key:"onBufferFlushed",value:function(){this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=R.IDLE,this.fragPrevious=null,this.tick()}}]),t}(m.default);n.default=A},{22:22,26:26,27:27,28:28,30:30,31:31,41:41,45:45,47:47}],6:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),f=r(d),c=e(45),h=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MANIFEST_LOADING,l.default.MANIFEST_LOADED,l.default.AUDIO_TRACK_LOADED))}return o(t,e),s(t,[{key:"destroy",value:function(){f.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,n=e.audioTracks||[],r=!1;this.tracks=n,this.hls.trigger(l.default.AUDIO_TRACKS_UPDATED,{audioTracks:n});var i=0;n.forEach(function(e){return e.default?(t.audioTrack=i,void(r=!0)):void i++}),!1===r&&n.length&&(c.logger.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)}},{key:"onAudioTrackLoaded",value:function(e){e.id<this.tracks.length&&(c.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setAudioTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,c.logger.log("switching to audioTrack "+e);var t=this.tracks[e],n=t.type,r=t.url;this.hls.trigger(l.default.AUDIO_TRACK_SWITCH,{id:e,type:n,url:r});var i=t.details;!r||void 0!==i&&!0!==i.live||(c.logger.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(l.default.AUDIO_TRACK_LOADING,{url:r,id:e}))}}},{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}(f.default);n.default=h},{27:27,28:28,45:45}],7:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),f=r(d),c=e(45),h=e(26),g=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.MANIFEST_PARSED,l.default.BUFFER_RESET,l.default.BUFFER_APPENDING,l.default.BUFFER_CODECS,l.default.BUFFER_EOS,l.default.BUFFER_FLUSHING,l.default.LEVEL_UPDATED));return n._msDuration=null,n._levelDuration=null,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n.pendingTracks={},n}return o(t,e),s(t,[{key:"destroy",value:function(){f.default.prototype.destroy.call(this)}},{key:"onManifestParsed",value:function(e){var t=e.audio,n=e.video,r=0;e.altAudio&&(t||n)&&(r=(t?1:0)+(n?1:0),c.logger.log(r+" sourceBuffer(s) expected")),this.sourceBufferNb=r}},{key:"onMediaAttaching",value:function(e){var t=this.media=e.media;if(t){var n=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(n)}}},{key:"onMediaDetaching",value:function(){c.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){c.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(l.default.MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){c.logger.log("media source opened"),this.hls.trigger(l.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){c.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){c.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1,this.hls.trigger(l.default.BUFFER_APPENDED,{parent:this.parent}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(e){c.logger.error("sourceBuffer error:"+e),this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(e){var t=this.sourceBuffer,n=this.mediaSource;for(var r in e)if(!t[r]){var i=e[r],a=i.levelCodec||i.codec,o=i.container+";codecs="+a;c.logger.log("creating sourceBuffer("+o+")");try{var s=t[r]=n.addSourceBuffer(o);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),i.buffer=s}catch(e){c.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(l.default.BUFFER_CREATED,{tracks:e})}},{key:"onBufferAppending",value:function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}},{key:"onBufferAppendFail",value:function(e){c.logger.error("sourceBuffer error:"+e.event),this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1,frag:this.fragCurrent})}},{key:"onBufferEos",value:function(e){var t=this.sourceBuffer,n=e.type;for(var r in t)n&&r!==n||t[r].ended||(t[r].ended=!0,c.logger.log(r+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var e=this.sourceBuffer,t=this.mediaSource;if(!t||"open"!==t.readyState)return void(this._needsEos=!1);for(var n in e){if(!e[n].ended)return;if(e[n].updating)return void(this._needsEos=!0)}c.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment"),t.endOfStream(),this._needsEos=!1}},{key:"onBufferFlushing",value:function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(e){var t=e.details;0!==t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var e=this.media,t=this.mediaSource,n=this.sourceBuffer,r=this._levelDuration;if(null!==r&&e&&t&&n&&0!==e.readyState&&"open"===t.readyState){for(var i in n)if(n[i].updating)return;null===this._msDuration&&(this._msDuration=t.duration),r>this._msDuration&&r>e.duration&&(c.logger.log("Updating mediasource duration to "+r.toFixed(3)),this._msDuration=t.duration=r)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;for(var r in n)t+=n[r].buffered.length;this.appended=t,this.hls.trigger(l.default.BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var e=this.hls,t=this.sourceBuffer,n=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void c.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var r=n.shift();try{var i=r.type;t[i]?(t[i].ended=!1,this.parent=r.parent,t[i].appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){c.logger.error("error while trying to append buffer:"+t.message),n.unshift(r);var a={type:h.ErrorTypes.MEDIA_ERROR};if(22===t.code)return this.segments=[],a.details=h.ErrorDetails.BUFFER_FULL_ERROR,void e.trigger(l.default.ERROR,a);if(this.appendError?this.appendError++:this.appendError=1,a.details=h.ErrorDetails.BUFFER_APPEND_ERROR,a.frag=this.fragCurrent,this.appendError>e.config.appendErrorMaxRetry)return c.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],a.fatal=!0,void e.trigger(l.default.ERROR,a);a.fatal=!1,e.trigger(l.default.ERROR,a)}}}}},{key:"flushBuffer",value:function(e,t,n){var r,i,a,o,s,u,l=this.sourceBuffer;if(Object.keys(l).length){if(c.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var d in l)if(!n||d===n){if(r=l[d],r.ended=!1,r.updating)return c.logger.warn("cannot flush, sb updating in progress"),!1;for(i=0;i<r.buffered.length;i++)if(a=r.buffered.start(i),o=r.buffered.end(i),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(s=e,u=t):(s=Math.max(a,e),u=Math.min(o,t)),Math.min(u,o)-s>.5)return this.flushBufferCounter++,c.logger.log("flush "+d+" ["+s+","+u+"], of ["+a+","+o+"], pos:"+this.media.currentTime),r.remove(s,u),!1}}else c.logger.warn("abort flushing too many retries");c.logger.log("buffer flushed")}return!0}}]),t}(f.default);n.default=g},{26:26,27:27,28:28,45:45}],8:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),f=r(d),c=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.FPS_DROP_LEVEL_CAPPING,l.default.MEDIA_ATTACHING,l.default.MANIFEST_PARSED))}return o(t,e),s(t,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(e){this.restrictedLevels||(this.restrictedLevels=[]),this.isLevelRestricted(e.droppedLevel)||this.restrictedLevels.push(e.droppedLevel)}},{key:"onMediaAttaching",value:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null}},{key:"onManifestParsed",value:function(e){this.hls.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,this.hls.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),
this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){if(this.media){var e=this.levels?this.levels.length:0;e&&(this.hls.autoLevelCapping=this.getMaxLevel(e-1),this.hls.autoLevelCapping>this.autoLevelCapping&&this.hls.streamController.nextLevelSwitch(),this.autoLevelCapping=this.hls.autoLevelCapping)}}},{key:"getMaxLevel",value:function(e){var t=0,n=void 0,r=void 0,i=this.mediaWidth,a=this.mediaHeight,o=0,s=0;for(n=0;n<=e&&(r=this.levels[n],!this.isLevelRestricted(n))&&(t=n,o=r.width,s=r.height,!(i<=o||a<=s));n++);return t}},{key:"isLevelRestricted",value:function(e){return!(!this.restrictedLevels||-1===this.restrictedLevels.indexOf(e))}},{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}},{key:"mediaWidth",get:function(){var e=void 0;return this.media&&(e=this.media.width||this.media.clientWidth||this.media.offsetWidth,e*=this.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0;return this.media&&(e=this.media.height||this.media.clientHeight||this.media.offsetHeight,e*=this.contentScaleFactor),e}}]),t}(f.default);n.default=c},{27:27,28:28}],9:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(44),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t,n,i,a){r(this,e),this.hls=t,this.defaultEstimate_=a,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new o.default(n),this.fast_=new o.default(i)}return i(e,[{key:"sample",value:function(e,t){e=Math.max(e,this.minDelayMs_);var n=8e3*t/e,r=e/1e3;this.fast_.sample(r,n),this.slow_.sample(r,n)}},{key:"canEstimate",value:function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),e}();n.default=s},{44:44}],10:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),f=r(d),c=e(45),h=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHING))}return o(t,e),s(t,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(e){this.hls.config.capLevelOnFPSDrop&&(this.video=e.media instanceof HTMLVideoElement?e.media:null,"function"==typeof this.video.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),this.hls.config.fpsDroppedMonitoringPeriod))}},{key:"checkFPS",value:function(e,t,n){var r=performance.now();if(t){if(this.lastTime){var i=r-this.lastTime,a=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/i;if(this.hls.trigger(l.default.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),s>0&&a>this.hls.config.fpsDroppedMonitoringThreshold*o){var u=this.hls.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(-1===this.hls.autoLevelCapping||this.hls.autoLevelCapping>=u)&&(u-=1,this.hls.trigger(l.default.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:this.hls.currentLevel}),this.hls.autoLevelCapping=u,this.hls.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}},{key:"checkFPSInterval",value:function(){if(this.video)if(this.isVideoPlaybackQualityAvailable){var e=this.video.getVideoPlaybackQuality();this.checkFPS(this.video,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(this.video,this.video.webkitDecodedFrameCount,this.video.webkitDroppedFrameCount)}}]),t}(f.default);n.default=h},{27:27,28:28,45:45}],11:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),f=r(d),c=e(45),h=e(26),g=e(30),p=r(g),v=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MANIFEST_LOADED,l.default.LEVEL_LOADED,l.default.ERROR));return n.ontick=n.tick.bind(n),n._manualLevel=n._autoLevelCapping=-1,n}return o(t,e),s(t,[{key:"destroy",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._manualLevel=-1}},{key:"startLoad",value:function(){this.canload=!0,this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(e){var t,n,r=[],i=[],a={},o=!1,s=!1,u=this.hls;if(e.levels.forEach(function(e){e.videoCodec&&(o=!0),(e.audioCodec||e.attrs&&e.attrs.AUDIO)&&(s=!0);var t=a[e.bitrate];void 0===t?(a[e.bitrate]=r.length,e.url=[e.url],e.urlId=0,r.push(e)):r[t].url.push(e.url)}),o&&s?r.forEach(function(e){e.videoCodec&&i.push(e)}):i=r,i=i.filter(function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||function(e){return MediaSource.isTypeSupported("audio/mp4;codecs="+e)}(t))&&(!n||function(e){return MediaSource.isTypeSupported("video/mp4;codecs="+e)}(n))}),i.length){for(t=i[0].bitrate,i.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=i,n=0;n<i.length;n++)if(i[n].bitrate===t){this._firstLevel=n,c.logger.log("manifest loaded,"+i.length+" level(s) found, first bitrate:"+t);break}u.trigger(l.default.MANIFEST_PARSED,{levels:this._levels,firstLevel:this._firstLevel,stats:e.stats,audio:s,video:o,altAudio:e.audioTracks.length>0})}else u.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:u.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(e){var t=this._levels;if(e>=0&&e<t.length){this.timer&&(clearTimeout(this.timer),this.timer=null),this._level!==e&&(c.logger.log("switching to level "+e),this._level=e),this.hls.trigger(l.default.LEVEL_SWITCH,{level:e});var n=t[e],r=n.details;if(!r||!0===r.live){var i=n.urlId;this.hls.trigger(l.default.LEVEL_LOADING,{url:n.url[i],level:e,id:i})}}else this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(e){if(!e.fatal){var t=e.details,n=this.hls,r=void 0,i=void 0,a=!1;switch(t){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:r=e.frag.level;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:r=e.context.level,a=!0}if(void 0!==r)if(i=this._levels[r],i.urlId<i.url.length-1)i.urlId++,i.details=void 0,c.logger.warn("level controller,"+t+" for level "+r+": switching to redundant stream id "+i.urlId);else{var o=-1===this._manualLevel&&r;if(o)c.logger.warn("level controller,"+t+": emergency switch-down for next fragment"),n.abrController.nextAutoLevel=0;else if(i&&i.details&&i.details.live)c.logger.warn("level controller,"+t+" on live stream, discard"),a&&(this._level=void 0);else if(t===h.ErrorDetails.LEVEL_LOAD_ERROR||t===h.ErrorDetails.LEVEL_LOAD_TIMEOUT){var s=this.hls,u=s.media,d=u&&p.default.isBuffered(u,u.currentTime)&&p.default.isBuffered(u,u.currentTime+.5);if(d){var f=s.config.levelLoadingRetryDelay;c.logger.warn("level controller,"+t+", but media buffered, retry in "+f+"ms"),this.timer=setTimeout(this.ontick,f)}else c.logger.error("cannot recover "+t+" error"),this._level=void 0,this.timer&&(clearTimeout(this.timer),this.timer=null),e.fatal=!0,s.trigger(l.default.ERROR,e)}}}}},{key:"onLevelLoaded",value:function(e){if(e.level===this._level){var t=e.details;if(t.live){var n=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),r=this._levels[e.level],i=r.details;i&&t.endSN===i.endSN&&(n/=2,c.logger.log("same live playlist, reload twice faster")),n-=performance.now()-e.stats.trequest,n=Math.max(1e3,Math.round(n)),c.logger.log("live playlist, reload in "+n+" ms"),this.timer=setTimeout(this.ontick,n)}else this.timer=null}}},{key:"tick",value:function(){var e=this._level;if(void 0!==e&&this.canload){var t=this._levels[e],n=t.urlId;this.hls.trigger(l.default.LEVEL_LOADING,{url:t.url[n],level:e,id:n})}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this._manualLevel?this._manualLevel:this.hls.abrController.nextAutoLevel},set:function(e){this.level=e,-1===this._manualLevel&&(this.hls.abrController.nextAutoLevel=e)}}]),t}(f.default);n.default=v},{26:26,27:27,28:28,30:30,45:45}],12:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(41),l=r(u),d=e(30),f=r(d),c=e(22),h=r(c),g=e(28),p=r(g),v=e(27),m=r(v),y=e(31),_=r(y),E=e(47),T=r(E),S=e(26),b=e(45),R={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},A=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,p.default.MEDIA_ATTACHED,p.default.MEDIA_DETACHING,p.default.MANIFEST_LOADING,p.default.MANIFEST_PARSED,p.default.LEVEL_LOADED,p.default.KEY_LOADED,p.default.FRAG_LOADED,p.default.FRAG_LOAD_EMERGENCY_ABORTED,p.default.FRAG_PARSING_INIT_SEGMENT,p.default.FRAG_PARSING_DATA,p.default.FRAG_PARSED,p.default.ERROR,p.default.AUDIO_TRACK_SWITCH,p.default.BUFFER_CREATED,p.default.BUFFER_APPENDED,p.default.BUFFER_FLUSHED));return n.config=e.config,n.audioCodecSwap=!1,n.ticks=0,n.ontick=n.tick.bind(n),n}return o(t,e),s(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),m.default.prototype.destroy.call(this),this.state=R.STOPPED}},{key:"startLoad",value:function(e){if(this.levels){var t=this.media,n=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,t&&n>0?(b.logger.log("configure startPosition @"+n.toFixed(3)),this.lastPaused||(b.logger.log("resuming video"),t.play())):this.lastCurrentTime=this.startPosition?this.startPosition:e,!this.startFragRequested){var i=r.startLevel;-1===i&&(i=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1}this.state=R.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else b.logger.warn("cannot start loading as manifest not parsed yet"),this.state=R.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=R.STOPPED}},{key:"tick",value:function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case R.ERROR:break;case R.BUFFER_FLUSHING:this.fragLoadError=0;break;case R.IDLE:if(!this._doTickIdle())return;break;case R.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=R.IDLE);break;case R.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(b.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=R.IDLE)}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&!n&&(this.startFragRequested||!t.startFragPrefetch))return!0;var r=void 0;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i],o=a.bitrate,s=void 0;s=o?Math.max(8*t.maxBufferSize/o,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var u=f.default.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,t.maxBufferHole),l=u.len;if(l>=s)return!0;b.logger.trace("buffer length of "+l.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var d=a.details;if(void 0===d||d.live&&this.levelLastLoaded!==i)return this.state=R.WAITING_LEVEL,!0;var c=this.fragPrevious;if(!d.live&&c&&c.sn===d.endSN&&(!n.seeking&&u.len||n.duration-u.end<=c.duration/2)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(p.default.BUFFER_EOS,h),this.state=R.ENDED,!0}return this._fetchPayloadOrEos({pos:r,bufferInfo:u,levelDetails:d})}},{key:"_fetchPayloadOrEos",value:function(e){var t=e.pos,n=e.bufferInfo,r=e.levelDetails,i=this.fragPrevious,a=this.level,o=r.fragments,s=o.length;if(0===s)return!1;var u=o[0].start,l=o[s-1].start+o[s-1].duration,d=n.end,f=void 0;if(r.live){var c=this.config.initialLiveManifestSize;if(s<c)return b.logger.warn("Can not start playback of a level, reason: not enough fragments "+s+" < "+c),!1;if(null===(f=this._ensureFragmentAtLivePoint({levelDetails:r,bufferEnd:d,start:u,end:l,fragPrevious:i,fragments:o,fragLen:s})))return!1}else d<u&&(f=o[0]);return f||(f=this._findFragment({start:u,fragPrevious:i,fragLen:s,fragments:o,bufferEnd:d,end:l,levelDetails:r})),!f||this._loadFragmentOrKey({frag:f,level:a,levelDetails:r,pos:t,bufferEnd:d})}},{key:"_ensureFragmentAtLivePoint",value:function(e){var t=e.levelDetails,n=e.bufferEnd,r=e.start,i=e.end,a=e.fragPrevious,o=e.fragments,s=e.fragLen,u=this.hls.config,l=this.media,d=void 0,f=void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*t.targetduration;if(n<Math.max(r,i-f)){var c=this.liveSyncPosition=this.computeLivePosition(r,t);b.logger.log("buffer end: "+n.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+c.toFixed(3)),n=c,l&&l.readyState&&l.duration>c&&(l.currentTime=c)}if(t.PTSKnown&&n>i&&l&&l.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(a){var h=a.sn+1;h>=t.startSN&&h<=t.endSN&&(d=o[h-t.startSN],b.logger.log("live playlist, switching playlist, load frag with next SN: "+d.sn))}d||(d=o[Math.min(s-1,Math.round(s/2))],b.logger.log("live playlist, switching playlist, unknown, load middle frag : "+d.sn))}return d}},{key:"_findFragment",value:function(e){var t=(e.start,e.fragPrevious),n=e.fragLen,r=e.fragments,i=e.bufferEnd,a=e.end,o=e.levelDetails,s=this.hls.config,u=void 0,d=void 0,f=s.maxFragLookUpTolerance;if(i<a?(i>a-f&&(f=0),d=l.default.search(r,function(e){return e.start+e.duration-f<=i?1:e.start-f>i&&e.start?-1:0})):d=r[n-1],d&&(u=d,d.start,t&&u.level===t.level&&u.sn===t.sn))if(u.sn<o.endSN){var c=t.deltaPTS,h=u.sn-o.startSN;c&&c>s.maxBufferHole&&t.dropped&&h?(u=r[h-1],b.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(u=r[h+1],b.logger.log("SN just loaded, load next one: "+u.sn))}else u=null;return u}},{key:"_loadFragmentOrKey",value:function(e){var t=e.frag,n=e.level,r=e.levelDetails,i=e.pos,a=e.bufferEnd,o=this.hls,s=o.config;if(null==t.decryptdata.uri||null!=t.decryptdata.key){if(b.logger.log("Loading "+t.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+n+", currentTime:"+i.toFixed(3)+",bufferEnd:"+a.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,t.loadCounter){t.loadCounter++;var u=s.fragLoadingLoopThreshold;if(t.loadCounter>u&&Math.abs(this.fragLoadIdx-t.loadIdx)<u)return o.trigger(p.default.ERROR,{type:S.ErrorTypes.MEDIA_ERROR,details:S.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:t}),!1}else t.loadCounter=1;return t.loadIdx=this.fragLoadIdx,this.fragCurrent=t,this.startFragRequested=!0,t.autoLevel=o.autoLevelEnabled,t.bitrateTest=this.bitrateTest,o.trigger(p.default.FRAG_LOADING,{frag:t}),this.state=R.FRAG_LOADING,!0}b.logger.log("Loading key for "+t.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+n),this.state=R.KEY_LOADING,o.trigger(p.default.KEY_LOADING,{frag:t})}},{key:"getBufferRange",value:function(e){var t,n,r=this.bufferRange;if(r)for(t=r.length-1;t>=0;t--)if(n=r[t],e>=n.start&&e<=n.end)return n;return null}},{key:"followingBufferRange",value:function(e){return e?this.getBufferRange(e.end+.5):null}},{key:"_checkFragmentChanged",value:function(){var e,t,n=this.media;if(n&&n.readyState&&!1===n.seeking&&(t=n.currentTime,t>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),f.default.isBuffered(n,t)?e=this.getBufferRange(t):f.default.isBuffered(n,t+.1)&&(e=this.getBufferRange(t+.1)),e)){var r=e.frag;r!==this.fragPlaying&&(this.fragPlaying=r,this.hls.trigger(p.default.FRAG_CHANGED,{frag:r}))}}},{key:"immediateLevelSwitch",value:function(){if(b.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=R.BUFFER_FLUSHING,this.hls.trigger(p.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY})}},{key:"immediateLevelSwitchEnd",value:function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,f.default.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:"nextLevelSwitch",value:function(){var e=this.media;if(e&&e.readyState){var t=void 0,n=void 0,r=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,n=this.getBufferRange(e.currentTime),n&&n.start>1&&(this.state=R.BUFFER_FLUSHING,this.hls.trigger(p.default.BUFFER_FLUSHING,{startOffset:0,endOffset:n.start-1})),e.paused)t=0;else{var i=this.hls.nextLoadLevel,a=this.levels[i],o=this.fragLastKbps;t=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if((r=this.getBufferRange(e.currentTime+t))&&(r=this.followingBufferRange(r))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.state=R.BUFFER_FLUSHING,this.hls.trigger(p.default.BUFFER_FLUSHING,{startOffset:r.start,endOffset:Number.POSITIVE_INFINITY})}}}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(b.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,n=this.config;if(b.logger.log("media seeking to "+t.toFixed(3)),this.state===R.FRAG_LOADING){var r=f.default.bufferInfo(e,t,this.config.maxBufferHole),i=this.fragCurrent;if(0===r.len&&i){var a=n.maxFragLookUpTolerance,o=i.start-a,s=i.start+i.duration+a;t<o||t>s?(i.loader&&(b.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=R.IDLE):b.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===R.ENDED&&(this.state=R.IDLE);e&&(this.lastCurrentTime=t),this.state!==R.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*n.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaSeeked",value:function(){b.logger.log("media seeked to "+this.media.currentTime.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){b.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){b.logger.log("trigger BUFFER_RESET"),this.hls.trigger(p.default.BUFFER_RESET),this.bufferRange=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(e){var t,n=!1,r=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(r=!0))}),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&b.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var i=this.config;i.autoStartLoad&&this.hls.startLoad(i.startPosition)}},{key:"onLevelLoaded",value:function(e){var t=e.details,n=e.level,r=this.levels[n],i=t.totalduration,a=0;if(b.logger.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),this.levelLastLoaded=n,t.live){var o=r.details;o&&t.fragments.length>0?(_.default.mergeDetails(o,t),a=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,o),t.PTSKnown?b.logger.log("live playlist sliding:"+a.toFixed(3)):b.logger.log("live playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,b.logger.log("live playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(r.details=t,this.hls.trigger(p.default.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var s=t.startTimeOffset;isNaN(s)?t.live?(this.startPosition=this.computeLivePosition(a,t),b.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(s<0&&(b.logger.log("negative start time offset "+s+", count from end of last fragment"),s=a+i+s),b.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===R.WAITING_LEVEL&&(this.state=R.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===R.KEY_LOADING&&(this.state=R.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,n=e.frag;if(this.state===R.FRAG_LOADING&&t&&"main"===n.type&&n.level===t.level&&n.sn===t.sn){var r=e.stats,i=this.levels[t.level],a=i.details;if(b.logger.log("Loaded  "+t.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+t.level),this.bitrateTest=!1,!0===n.bitrateTest&&this.hls.nextLoadLevel)this.state=R.IDLE,this.startFragRequested=!1,r.tparsed=r.tbuffered=performance.now(),this.hls.trigger(p.default.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.tick();else{this.state=R.PARSING,this.stats=r;var o=a.totalduration,s=isNaN(t.startDTS)?t.start:t.startDTS,u=t.level,l=t.sn,d=this.config.defaultAudioCodec||i.audioCodec;this.audioCodecSwap&&(b.logger.log("swapping playlist audio codec"),void 0===d&&(d=this.lastAudioCodec),d&&(d=-1!==d.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingAppending=0,b.logger.log("Parsing "+l+" of ["+a.startSN+" ,"+a.endSN+"],level "+u+", cc "+t.cc);var f=this.demuxer;f||(f=this.demuxer=new h.default(this.hls,"main"));var c=a.PTSKnown||!a.live;f.push(e.payload,d,i.videoCodec,s,t.cc,u,l,o,t.decryptdata,c)}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent;if(t&&"main"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===R.PARSING){var n,r,i=e.tracks;if(i.audio&&this.altAudio&&delete i.audio,r=i.audio){var a=this.levels[this.level].audioCodec,o=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(b.logger.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&-1===o.indexOf("firefox")&&(a="mp4a.40.5"),-1!==o.indexOf("android")&&(a="mp4a.40.2",b.logger.log("Android: force audio codec to"+a)),r.levelCodec=a,r.id=e.id}if(r=i.video,r&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=e.id),e.unique){var s={codec:"",levelCodec:""};for(n in e.tracks)r=i[n],s.container=r.container,s.codec&&(s.codec+=",",s.levelCodec+=","),r.codec&&(s.codec+=r.codec),r.levelCodec&&(s.levelCodec+=r.levelCodec);i={audiovideo:s}}this.hls.trigger(p.default.BUFFER_CODECS,i);for(n in i){r=i[n],b.logger.log("main track:"+n+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var u=r.initSegment;u&&(this.pendingAppending++,this.hls.trigger(p.default.BUFFER_APPENDING,{type:n,data:u,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(e){var t=this,n=this.fragCurrent;if(n&&"main"===e.id&&e.sn===n.sn&&e.level===n.level&&("audio"!==e.type||!this.altAudio)&&this.state===R.PARSING){var r=this.levels[this.level],i=this.fragCurrent;b.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0));var a=_.default.updateFragPTSDTS(r.details,i.sn,e.startPTS,e.endPTS,e.startDTS,e.endDTS),o=this.hls;o.trigger(p.default.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:a}),"video"===e.type&&(i.dropped=e.dropped),[e.data1,e.data2].forEach(function(n){n&&(t.pendingAppending++,o.trigger(p.default.BUFFER_APPENDING,{type:e.type,data:n,parent:"main",content:"data"}))}),this.nextLoadPosition=e.endPTS,this.bufferRange.push({type:e.type,start:e.startPTS,end:e.endPTS,frag:i}),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent;t&&"main"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===R.PARSING&&(this.stats.tparsed=performance.now(),this.state=R.PARSED,this._checkAppendedParsed())}},{key:"onAudioTrackSwitch",value:function(e){var t=!!e.url;if(t)this.videoBuffer&&this.mediaBuffer!==this.videoBuffer&&(b.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=this.videoBuffer);else if(this.mediaBuffer!==this.media){b.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(b.logger.log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=R.IDLE}this.altAudio=t}},{key:"onBufferCreated",value:function(e){var t=e.tracks,n=void 0,r=void 0,i=!1;for(var a in t){var o=t[a];"main"===o.id?(r=a,n=o,"video"===a&&(this.videoBuffer=t[a].buffer)):i=!0}i&&n?(b.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(e){if("main"===e.parent)switch(this.state){case R.PARSING:case R.PARSED:this.pendingAppending--,this._checkAppendedParsed()}}},{key:"_checkAppendedParsed",value:function(){if(this.state===R.PARSED&&0===this.pendingAppending){var e=this.fragCurrent,t=this.stats;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*t.total/(t.tbuffered-t.tfirst)),this.hls.trigger(p.default.FRAG_BUFFERED,{stats:t,frag:e,id:"main"});var n=this.mediaBuffer?this.mediaBuffer:this.media;b.logger.log("main buffered : "+T.default.toString(n.buffered)),this.state=R.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=this.media,r=n&&f.default.isBuffered(n,n.currentTime)&&f.default.isBuffered(n,n.currentTime+.5);switch(e.details){case S.ErrorDetails.FRAG_LOAD_ERROR:case S.ErrorDetails.FRAG_LOAD_TIMEOUT:case S.ErrorDetails.KEY_LOAD_ERROR:case S.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var a=this.config;if(i<=a.fragLoadingMaxRetry||r||t.autoLevel&&t.level){this.fragLoadError=i,t.loadCounter=0;var o=Math.min(Math.pow(2,i-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);b.logger.warn("mediaController: frag loading failed, retry in "+o+" ms"),this.retryDate=performance.now()+o,this.state=R.FRAG_LOADING_WAITING_RETRY}else b.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.trigger(p.default.ERROR,e),this.state=R.ERROR}break;case S.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(r?(this._reduceMaxBufferLength(t.duration),this.state=R.IDLE):t.autoLevel&&0!==t.level||(e.fatal=!0,this.hls.trigger(p.default.ERROR,e),this.state=R.ERROR));break;case S.ErrorDetails.LEVEL_LOAD_ERROR:case S.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==R.ERROR&&(e.fatal?(this.state=R.ERROR,
b.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):this.state===R.WAITING_LEVEL&&(this.state=R.IDLE));break;case S.ErrorDetails.BUFFER_FULL_ERROR:this.state!==R.PARSING&&this.state!==R.PARSED||(r?(this._reduceMaxBufferLength(t.duration),this.state=R.IDLE):(b.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.state=R.PAUSED,this.hls.trigger(p.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY})))}}}},{key:"_reduceMaxBufferLength",value:function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,b.logger.warn("reduce max buffer length to "+t.maxMaxBufferLength+"s and switch to IDLE state"),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var e=this.media;if(e&&e.readyState){var t=e.currentTime,n=e.buffered;if(!this.loadedmetadata&&n.length){this.loadedmetadata=!0;var r=this.startPosition,i=f.default.isBuffered(e,r);t===r&&i||(b.logger.log("target start position:"+r),i||(r=n.start(0),b.logger.log("target start position not buffered, seek to buffered.start(0) "+r)),b.logger.log("adjust currentTime from "+t+" to "+r),e.currentTime=r)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var a=f.default.bufferInfo(e,t,0),o=!(e.paused||e.ended||0===e.buffered.length),s=.5,u=t>e.playbackRate*this.lastCurrentTime,l=this.config;if(this.stalled&&u&&(this.stalled=!1,b.logger.log("playback not stuck anymore @"+t)),o&&a.len<=s&&(u?(s=0,this.seekHoleNudgeDuration=0):this.stalled?this.seekHoleNudgeDuration+=l.seekHoleNudgeDuration:(this.seekHoleNudgeDuration=0,b.logger.log("playback seems stuck @"+t),this.hls.trigger(p.default.ERROR,{type:S.ErrorTypes.MEDIA_ERROR,details:S.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1}),this.stalled=!0),a.len<=s)){var d=a.nextStart,c=d-t;if(d&&c<l.maxSeekHole&&c>0){b.logger.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+d+" + nudge "+this.seekHoleNudgeDuration);var h=d+this.seekHoleNudgeDuration-e.currentTime;e.currentTime=d+this.seekHoleNudgeDuration,this.hls.trigger(p.default.ERROR,{type:S.ErrorTypes.MEDIA_ERROR,details:S.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:h})}}}}}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=R.IDLE,this.loadedmetadata||(this.startFragRequested=!1),this.tick()}},{key:"onBufferFlushed",value:function(){var e=this.mediaBuffer?this.mediaBuffer:this.media,t=this.bufferRange,n=[],r=void 0,i=void 0;for(i=0;i<t.length;i++)r=t[i],f.default.isBuffered(e,(r.start+r.end)/2)&&n.push(r);this.bufferRange=n,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=R.IDLE,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,b.logger.log("engine state transition from "+t+" to "+e),this.hls.trigger(p.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferRange(e.currentTime);if(t)return t.frag.level}return-1}},{key:"nextBufferRange",get:function(){var e=this.media;return e?this.followingBufferRange(this.getBufferRange(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferRange;return e?e.frag.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(m.default);n.default=A},{22:22,26:26,27:27,28:28,30:30,31:31,41:41,45:45,47:47}],13:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),f=r(d),c=e(42),h=r(c),g=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.FRAG_PARSING_USERDATA,l.default.MANIFEST_LOADING,l.default.FRAG_LOADED,l.default.LEVEL_SWITCH));if(n.hls=e,n.config=e.config,n.enabled=!0,n.Cues=e.config.cueHandler,n.config.enableCEA708Captions){var r=n,o={newCue:function(e,t,n){if(!r.textTrack1){var i=r.getExistingTrack("1");if(i){r.textTrack1=i,r.clearCurrentCues(r.textTrack1);var a=new window.Event("addtrack");a.track=r.textTrack1,r.media.dispatchEvent(a)}else r.textTrack1=r.createTextTrack("captions","English","en"),r.textTrack1.textTrack1=!0}r.Cues.newCue(r.textTrack1,e,t,n)}},s={newCue:function(e,t,n){if(!r.textTrack2){var i=r.getExistingTrack("2");if(i){r.textTrack2=i,r.clearCurrentCues(r.textTrack2);var a=new window.Event("addtrack");a.track=r.textTrack2,r.media.dispatchEvent(a)}else r.textTrack2=r.createTextTrack("captions","Spanish","es"),r.textTrack2.textTrack2=!0}r.Cues.newCue(r.textTrack2,e,t,n)}};n.cea608Parser=new h.default(0,o,s)}return n}return o(t,e),s(t,[{key:"clearCurrentCues",value:function(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}},{key:"getExistingTrack",value:function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n],i="textTrack"+e;if(!0===r[i])return r}return null}},{key:"createTextTrack",value:function(e,t,n){if(this.media)return this.media.addTextTrack(e,t,n)}},{key:"destroy",value:function(){f.default.prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(e){this.media=e.media}},{key:"onMediaDetaching",value:function(){}},{key:"onManifestLoading",value:function(){this.lastPts=Number.NEGATIVE_INFINITY}},{key:"onLevelSwitch",value:function(){"NONE"===this.hls.currentLevel.closedCaptions?this.enabled=!1:this.enabled=!0}},{key:"onFragLoaded",value:function(e){if("main"===e.frag.type){var t=e.frag.start;t<=this.lastPts&&(this.clearCurrentCues(this.textTrack1),this.clearCurrentCues(this.textTrack2)),this.lastPts=t}}},{key:"onFragParsingUserdata",value:function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var n=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,n)}}},{key:"extractCea608Data",value:function(e){for(var t,n,r,i,a,o=31&e[0],s=2,u=[],l=0;l<o;l++)t=e[s++],n=127&e[s++],r=127&e[s++],i=0!=(4&t),a=3&t,0===n&&0===r||i&&0===a&&(u.push(n),u.push(r));return u}}]),t}(f.default);n.default=g},{27:27,28:28,42:42}],14:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this.aesIV=t}return i(e,[{key:"decrypt",value:function(e,t){return window.crypto.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}]),e}();n.default=a},{}],15:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[],this.subMix[0]=new Uint32Array(256),this.subMix[1]=new Uint32Array(256),this.subMix[2]=new Uint32Array(256),this.subMix[3]=new Uint32Array(256),this.invSubMix=[],this.invSubMix[0]=new Uint32Array(256),this.invSubMix[1]=new Uint32Array(256),this.invSubMix[2]=new Uint32Array(256),this.invSubMix[3]=new Uint32Array(256),this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return i(e,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<n.length;r++)n[r]=t.getUint32(4*r);return n}},{key:"initTable",value:function(){var e=this.sBox,t=this.invSBox,n=this.subMix[0],r=this.subMix[1],i=this.subMix[2],a=this.subMix[3],o=this.invSubMix[0],s=this.invSubMix[1],u=this.invSubMix[2],l=this.invSubMix[3],d=new Uint32Array(256),f=0,c=0,h=0;for(h=0;h<256;h++)d[h]=h<128?h<<1:h<<1^283;for(h=0;h<256;h++){var g=c^c<<1^c<<2^c<<3^c<<4;g=g>>>8^255&g^99,e[f]=g,t[g]=f;var p=d[f],v=d[p],m=d[v],y=257*d[g]^16843008*g;n[f]=y<<24|y>>>8,r[f]=y<<16|y>>>16,i[f]=y<<8|y>>>24,a[f]=y,y=16843009*m^65537*v^257*p^16843008*f,o[g]=y<<24|y>>>8,s[g]=y<<16|y>>>16,u[g]=y<<8|y>>>24,l[g]=y,f?(f=p^d[d[d[m^p]]],c^=d[d[c]]):f=c=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a=this.ksRows=4*(i+6+1),o=void 0,s=void 0,u=this.keySchedule=new Uint32Array(this.ksRows).fill(0),l=this.invKeySchedule=new Uint32Array(this.ksRows).fill(0),d=this.sBox,f=this.rcon,c=this.invSubMix[0],h=this.invSubMix[1],g=this.invSubMix[2],p=this.invSubMix[3],v=void 0,m=void 0;for(o=0;o<a;o++)o<i?v=u[o]=t[o]:(m=v,o%i==0?(m=m<<8|m>>>24,m=d[m>>>24]<<24|d[m>>>16&255]<<16|d[m>>>8&255]<<8|d[255&m],m^=f[o/i|0]<<24):i>6&&o%i==4&&(m=d[m>>>24]<<24|d[m>>>16&255]<<16|d[m>>>8&255]<<8|d[255&m]),u[o]=v=(u[o-i]^m)>>>0);for(s=0;s<a;s++)o=a-s,m=3&s?u[o]:u[o-4],l[s]=s<4||o<=4?m:c[d[m>>>24]]^h[d[m>>>16&255]]^g[d[m>>>8&255]]^p[d[255&m]],l[s]=l[s]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,n){for(var r,i,a=this.keySize+6,o=this.invKeySchedule,s=this.invSBox,u=this.invSubMix[0],l=this.invSubMix[1],d=this.invSubMix[2],f=this.invSubMix[3],c=this.uint8ArrayToUint32Array_(n),h=c[0],g=c[1],p=c[2],v=c[3],m=new Int32Array(e),y=new Int32Array(m.length),_=void 0,E=void 0,T=void 0,S=void 0,b=void 0,R=void 0,A=void 0,w=void 0,I=void 0,D=void 0,O=void 0,M=void 0;t<m.length;){for(I=this.networkToHostOrderSwap(m[t]),D=this.networkToHostOrderSwap(m[t+1]),O=this.networkToHostOrderSwap(m[t+2]),M=this.networkToHostOrderSwap(m[t+3]),b=I^o[0],R=M^o[1],A=O^o[2],w=D^o[3],r=4,i=1;i<a;i++)_=u[b>>>24]^l[R>>16&255]^d[A>>8&255]^f[255&w]^o[r],E=u[R>>>24]^l[A>>16&255]^d[w>>8&255]^f[255&b]^o[r+1],T=u[A>>>24]^l[w>>16&255]^d[b>>8&255]^f[255&R]^o[r+2],S=u[w>>>24]^l[b>>16&255]^d[R>>8&255]^f[255&A]^o[r+3],b=_,R=E,A=T,w=S,r+=4;_=s[b>>>24]<<24^s[R>>16&255]<<16^s[A>>8&255]<<8^s[255&w]^o[r],E=s[R>>>24]<<24^s[A>>16&255]<<16^s[w>>8&255]<<8^s[255&b]^o[r+1],T=s[A>>>24]<<24^s[w>>16&255]<<16^s[b>>8&255]<<8^s[255&R]^o[r+2],S=s[w>>>24]<<24^s[b>>16&255]<<16^s[R>>8&255]<<8^s[255&A]^o[r+3],r+=3,y[t]=this.networkToHostOrderSwap(_^h),y[t+1]=this.networkToHostOrderSwap(S^g),y[t+2]=this.networkToHostOrderSwap(T^p),y[t+3]=this.networkToHostOrderSwap(E^v),h=I,g=D,p=O,v=M,t+=4}return y.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),e}();n.default=a},{}],16:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(14),s=r(o),u=e(17),l=r(u),d=e(15),f=r(d),c=e(26),h=e(45),g=function(){function e(t){i(this,e),this.hls=t;try{var n=window?window.crypto:crypto;this.subtle=n.subtle||n.webkitSubtle}catch(e){}this.disableWebCrypto=!this.supportsWebCrypto()}return a(e,[{key:"supportsWebCrypto",value:function(){return this.subtle&&"https:"===window.location.protocol}},{key:"decrypt",value:function(e,t,n,r){var i=this;this.disableWebCrypto&&this.hls.config.enableSoftwareAES?(h.logger.log("decrypting by JavaScript Implementation"),this.decryptor||(this.decryptor=new f.default),this.decryptor.expandKey(t),r(this.decryptor.decrypt(e,0,n))):(h.logger.log("decrypting by WebCrypto API"),this.key!==t&&(this.key=t,this.fastAesKey=new l.default(t)),this.fastAesKey.expandKey().then(function(t){new s.default(n).decrypt(e,t).then(function(e){r(e)})}).catch(function(a){i.onWebCryptoError(a,e,t,n,r)}))}},{key:"onWebCryptoError",value:function(e,t,n,r,i){this.hls.config.enableSoftwareAES?(h.logger.log("disabling to use WebCrypto API"),this.disableWebCrypto=!0,this.decrypt(t,n,r,i)):(h.logger.error("decrypting error : "+e.message),this.hls.trigger(Event.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))}},{key:"destroy",value:function(){this.decryptor&&(this.decryptor.destroy(),this.decryptor=void 0)}}]),e}();n.default=g},{14:14,15:15,17:17,26:26,45:45}],17:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this.key=t}return i(e,[{key:"expandKey",value:function(){return window.crypto.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),e}();n.default=a},{}],18:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(19),s=r(o),u=e(45),l=e(24),d=r(l),f=function(){function e(t,n,r,a){i(this,e),this.observer=t,this.id=n,this.remuxerClass=r,this.config=a,this.remuxer=new this.remuxerClass(t,n,a),this.insertDiscontinuity()}return a(e,[{key:"insertDiscontinuity",value:function(){this._aacTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,samples:[],len:0}}},{key:"push",value:function(e,t,n,r,i,a,o,l,f){var c,h,g,p,v,m,y,_,E,T,S=new d.default(e),b=90*S.timeStamp,R=!1;for(i!==this.lastCC?(u.logger.log(this.id+" discontinuity detected"),this.lastCC=i,this.insertDiscontinuity(),this.remuxer.switchLevel(),this.remuxer.insertDiscontinuity()):a!==this.lastLevel?(u.logger.log("audio track switch detected"),this.lastLevel=a,this.remuxer.switchLevel(),this.insertDiscontinuity()):o===this.lastSN+1&&(R=!0),c=this._aacTrack,this.lastSN=o,this.lastLevel=a,m=S.length,E=e.length;m<E-1&&(255!==e[m]||240!=(240&e[m+1]));m++);for(c.audiosamplerate||(h=s.default.getAudioConfig(this.observer,e,m,t),c.config=h.config,c.audiosamplerate=h.samplerate,c.channelCount=h.channelCount,c.codec=h.codec,c.duration=l,u.logger.log("parsed codec:"+c.codec+",rate:"+h.samplerate+",nb channel:"+h.channelCount)),v=0,p=9216e4/c.audiosamplerate;m+5<E&&(y=1&e[m+1]?7:9,g=(3&e[m+3])<<11|e[m+4]<<3|(224&e[m+5])>>>5,(g-=y)>0&&m+y+g<=E);)for(_=b+v*p,T={unit:e.subarray(m+y,m+y+g),pts:_,dts:_},c.samples.push(T),c.len+=g,m+=g+y,v++;m<E-1&&(255!==e[m]||240!=(240&e[m+1]));m++);this.remuxer.remux(a,o,this._aacTrack,{samples:[]},{samples:[{pts:b,dts:b,unit:S.payload}]},{samples:[]},r,R,f)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,n,r=new d.default(e);if(r.hasTimeStamp)for(t=r.length,n=e.length;t<n-1;t++)if(255===e[t]&&240==(240&e[t+1]))return!0;return!1}}]),e}();n.default=f},{19:19,24:24,45:45}],19:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(45),o=e(26),s=function(){function e(){r(this,e)}return i(e,null,[{key:"getAudioConfig",value:function(e,t,n,r){var i,s,u,l,d,f=navigator.userAgent.toLowerCase(),c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return i=1+((192&t[n+2])>>>6),s=(60&t[n+2])>>>2,s>c.length-1?void e.trigger(Event.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s}):(l=(1&t[n+2])<<2,l|=(192&t[n+3])>>>6,a.logger.log("manifest codec:"+r+",ADTS data:type:"+i+",sampleingIndex:"+s+"["+c[s]+"Hz],channelConfig:"+l),/firefox|OPR/i.test(f)?s>=6?(i=5,d=new Array(4),u=s-3):(i=2,d=new Array(2),u=s):-1!==f.indexOf("android")?(i=2,d=new Array(2),u=s):(i=5,d=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&s>=6?u=s-3:((r&&-1!==r.indexOf("mp4a.40.2")&&s>=6&&1===l||!r&&1===l)&&(i=2,d=new Array(2)),u=s)),d[0]=i<<3,d[0]|=(14&s)>>1,d[1]|=(1&s)<<7,d[1]|=l<<3,5===i&&(d[1]|=(14&u)>>1,d[2]=(1&u)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:c[s],channelCount:l,codec:"mp4a.40."+i})}}]),e}();n.default=s},{26:26,45:45}],20:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(28),s=r(o),u=e(26),l=e(18),d=r(l),f=e(25),c=r(f),h=e(38),g=r(h),p=e(39),v=r(p),m=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i(this,e),this.hls=t,this.id=n,this.config=this.hls.config||a,this.typeSupported=r}return a(e,[{key:"destroy",value:function(){var e=this.demuxer;e&&e.destroy()}},{key:"push",value:function(e,t,n,r,i,a,o,l,f){var h=this.demuxer;if(!h){var p=this.hls,m=this.id;if(c.default.probe(e))h=!0===this.typeSupported.mp2t?new c.default(p,m,v.default,this.config):new c.default(p,m,g.default,this.config);else{if(!d.default.probe(e))return void p.trigger(s.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,id:m,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});h=new d.default(p,m,g.default,this.config)}this.demuxer=h}h.push(e,t,n,r,i,a,o,l,f)}}]),e}();n.default=m},{18:18,25:25,26:26,28:28,38:38,39:39}],21:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(20),a=r(i),o=e(28),s=r(o),u=e(45),l=e(1),d=r(l),f=function(e){var t=new d.default;t.trigger=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(r))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",function(r){var i=r.data;switch(i.cmd){case"init":var o=JSON.parse(i.config);e.demuxer=new a.default(t,i.id,i.typeSupported,o);try{(0,u.enableLogs)(o.debug)}catch(e){}n("init",null);break;case"demux":e.demuxer.push(new Uint8Array(i.data),i.audioCodec,i.videoCodec,i.timeOffset,i.cc,i.level,i.sn,i.duration,i.accurateTimeOffset)}}),t.on(s.default.FRAG_PARSING_INIT_SEGMENT,n),t.on(s.default.FRAG_PARSED,n),t.on(s.default.ERROR,n),t.on(s.default.FRAG_PARSING_METADATA,n),t.on(s.default.FRAG_PARSING_USERDATA,n),t.on(s.default.FRAG_PARSING_DATA,function(t,n){var r=n.data1.buffer,i=n.data2.buffer;delete n.data1,delete n.data2,e.postMessage({event:t,data:n,data1:r,data2:i},[r,i])})};n.default=f},{1:1,20:20,28:28,45:45}],22:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(28),s=r(o),u=e(20),l=r(u),d=e(21),f=r(d),c=e(45),h=e(16),g=r(h),p=e(26),v=function(){function t(n,r){i(this,t),this.hls=n,this.id=r;var a={mp4:MediaSource.isTypeSupported("video/mp4"),mp2t:n.config.enableMP2TPassThrough&&MediaSource.isTypeSupported("video/mp2t")};if(n.config.enableWorker&&"undefined"!=typeof Worker){c.logger.log("demuxing in webworker");var o=void 0;try{var u=e(3);o=this.w=u(f.default),this.onwmsg=this.onWorkerMessage.bind(this),o.addEventListener("message",this.onwmsg),o.onerror=function(e){n.trigger(s.default.ERROR,{type:p.ErrorTypes.OTHER_ERROR,details:p.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},o.postMessage({cmd:"init",typeSupported:a,id:r,config:JSON.stringify(n.config)})}catch(e){c.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),o&&URL.revokeObjectURL(o.objectURL),this.demuxer=new l.default(n,r,a)}}else this.demuxer=new l.default(n,r,a);this.demuxInitialized=!0}return a(t,[{key:"destroy",value:function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.decrypter;n&&(n.destroy(),this.decrypter=null)}},{key:"pushDecrypted",value:function(e,t,n,r,i,a,o,s,u){var l=this.w;if(l)l.postMessage({cmd:"demux",data:e,audioCodec:t,videoCodec:n,timeOffset:r,cc:i,level:a,sn:o,duration:s,accurateTimeOffset:u},[e]);else{var d=this.demuxer;d&&d.push(new Uint8Array(e),t,n,r,i,a,o,s,u)}}},{key:"push",value:function(e,t,n,r,i,a,o,u,l,d){if(e.byteLength>0&&null!=l&&null!=l.key&&"AES-128"===l.method){null==this.decrypter&&(this.decrypter=new g.default(this.hls));var f=this,c=performance.now();this.decrypter.decrypt(e,l.key.buffer,l.iv.buffer,function(e){f.hls.trigger(s.default.FRAG_DECRYPTED,{level:a,sn:o,stats:{tstart:c,tdecrypt:performance.now()}}),f.pushDecrypted(e,t,n,r,i,a,o,u,d)})}else this.pushDecrypted(e,t,n,r,i,a,o,u,d)}},{key:"onWorkerMessage",value:function(e){var t=e.data,n=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case s.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data.data2=new Uint8Array(t.data2);default:n.trigger(t.event,t.data)}}}]),t}();n.default=v},{16:16,20:20,21:21,26:26,28:28,3:3,45:45}],23:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(45),o=function(){function e(t){r(this,e),this.data=t,this.bytesAvailable=this.data.byteLength,this.word=0,this.bitsAvailable=0}return i(e,[{key:"loadWord",value:function(){var e=this.data.byteLength-this.bytesAvailable,t=new Uint8Array(4),n=Math.min(4,this.bytesAvailable);if(0===n)throw new Error("no bytes available");t.set(this.data.subarray(e,e+n)),this.word=new DataView(t.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&a.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){var t,n,r=8,i=8;for(t=0;t<e;t++)0!==i&&(n=this.readEG(),i=(r+n+256)%256),r=0===i?r:i}},{key:"readSPS",value:function(){var e,t,n,r,i,a,o,s=0,u=0,l=0,d=0,f=1;if(this.readUByte(),e=this.readUByte(),this.readBits(5),this.skipBits(3),this.readUByte(),this.skipUEG(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var c=this.readUEG();if(3===c&&this.skipBits(1),this.skipUEG(),this.skipUEG(),this.skipBits(1),this.readBoolean())for(a=3!==c?8:12,o=0;o<a;o++)this.readBoolean()&&(o<6?this.skipScalingList(16):this.skipScalingList(64))}this.skipUEG();var h=this.readUEG();if(0===h)this.readUEG();else if(1===h)for(this.skipBits(1),this.skipEG(),this.skipEG(),t=this.readUEG(),o=0;o<t;o++)this.skipEG();if(this.skipUEG(),this.skipBits(1),n=this.readUEG(),r=this.readUEG(),i=this.readBits(1),0===i&&this.skipBits(1),this.skipBits(1),this.readBoolean()&&(s=this.readUEG(),u=this.readUEG(),l=this.readUEG(),d=this.readUEG()),this.readBoolean()&&this.readBoolean()){var g=void 0;switch(this.readUByte()){case 1:g=[1,1];break;case 2:g=[12,11];break;case 3:g=[10,11];break;case 4:g=[16,11];break;case 5:g=[40,33];break;case 6:g=[24,11];break;case 7:g=[20,11];break;case 8:g=[32,11];break;case 9:g=[80,33];break;case 10:g=[18,11];break;case 11:g=[15,11];break;case 12:g=[64,33];break;case 13:g=[160,99];break;case 14:g=[4,3];break;case 15:g=[3,2];break;case 16:g=[2,1];break;case 255:g=[this.readUByte()<<8|this.readUByte(),this.readUByte()<<8|this.readUByte()]}g&&(f=g[0]/g[1])}return{width:Math.ceil((16*(n+1)-2*s-2*u)*f),height:(2-i)*(r+1)*16-(i?2:4)*(l+d)}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),e}();n.default=o},{45:45}],24:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(45),o=function(){function e(t){r(this,e),this._hasTimeStamp=!1;for(var n,i,o,s,u,l,d,f,c=0;;)if(d=this.readUTF(t,c,3),c+=3,"ID3"===d)c+=3,n=127&t[c++],i=127&t[c++],o=127&t[c++],s=127&t[c++],u=(n<<21)+(i<<14)+(o<<7)+s,l=c+u,this._parseID3Frames(t,c,l),c=l;else{if("3DI"!==d)return c-=3,void((f=c)&&(this.hasTimeStamp||a.logger.warn("ID3 tag found, but no timestamp"),this._length=f,this._payload=t.subarray(0,f)));c+=7,a.logger.log("3DI footer found, end: "+c)}}return i(e,[{key:"readUTF",value:function(e,t,n){var r="",i=t,a=t+n;do{r+=String.fromCharCode(e[i++])}while(i<a);return r}},{key:"_parseID3Frames",value:function(e,t,n){for(var r,i;t+8<=n;)switch(r=this.readUTF(e,t,4),t+=4,e[t++]<<24+e[t++]<<16+e[t++]<<8+e[t++],e[t++]<<8+e[t++],t,r){case"PRIV":if("com.apple.streaming.transportStreamTimestamp"===this.readUTF(e,t,44)){t+=44,t+=4;var o=1&e[t++];this._hasTimeStamp=!0,i=((e[t++]<<23)+(e[t++]<<15)+(e[t++]<<7)+e[t++])/45,o&&(i+=47721858.84),i=Math.round(i),a.logger.trace("ID3 timestamp found: "+i),this._timeStamp=i}}}},{key:"hasTimeStamp",get:function(){return this._hasTimeStamp}},{key:"timeStamp",get:function(){return this._timeStamp}},{key:"length",get:function(){return this._length}},{key:"payload",get:function(){return this._payload}}]),e}();n.default=o},{45:45}],25:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(19),s=r(o),u=e(28),l=r(u),d=e(23),f=r(d),c=e(45),h=e(26),g=function(){function e(t,n,r,a){i(this,e),this.observer=t,this.id=n,this.remuxerClass=r,this.config=a,this.lastCC=0,this.remuxer=new this.remuxerClass(t,n,a)}return a(e,[{key:"switchLevel",value:function(){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,sequenceNumber:0,samples:[],len:0,dropped:0},this._aacTrack={container:"video/mp2t",type:"audio",id:-1,sequenceNumber:0,samples:[],len:0},this._id3Track={type:"id3",id:-1,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.remuxer.switchLevel()}},{key:"insertDiscontinuity",value:function(){this.switchLevel(),this.remuxer.insertDiscontinuity()}},{key:"push",value:function(e,t,n,r,i,a,o,s,u){var d,f,g,p,v,m=e.length,y=this.remuxer.passthrough,_=!1;this.audioCodec=t,this.videoCodec=n,this._duration=s,this.contiguous=!1,this.accurateTimeOffset=u,i!==this.lastCC&&(c.logger.log("discontinuity detected"),this.insertDiscontinuity(),this.lastCC=i),a!==this.lastLevel?(c.logger.log("level switch detected"),this.switchLevel(),this.lastLevel=a):o===this.lastSN+1&&(this.contiguous=!0),this.lastSN=o;var E=this.pmtParsed,T=this._avcTrack,S=this._aacTrack,b=this._id3Track,R=T.id,A=S.id,w=b.id,I=this._pmtId,D=T.pesData,O=S.pesData,M=b.pesData,C=this._parsePAT,P=this._parsePMT,L=this._parsePES,x=this._parseAVCPES.bind(this),k=this._parseAACPES.bind(this),F=this._parseID3PES.bind(this);for(m-=m%188,d=0;d<m;d+=188)if(71===e[d]){if(f=!!(64&e[d+1]),g=((31&e[d+1])<<8)+e[d+2],(48&e[d+3])>>4>1){if((p=d+5+e[d+4])===d+188)continue}else p=d+4;switch(g){case R:if(f){if(D&&(v=L(D))&&(x(v,!1),y&&T.codec&&(-1===A||S.codec)))return void this.remux(a,o,e,r);D={data:[],size:0}}D&&(D.data.push(e.subarray(p,d+188)),D.size+=d+188-p);break;case A:if(f){if(O&&(v=L(O))&&(k(v),y&&S.codec&&(-1===R||T.codec)))return void this.remux(a,o,e,r);O={data:[],size:0}
}O&&(O.data.push(e.subarray(p,d+188)),O.size+=d+188-p);break;case w:f&&(M&&(v=L(M))&&F(v),M={data:[],size:0}),M&&(M.data.push(e.subarray(p,d+188)),M.size+=d+188-p);break;case 0:f&&(p+=e[p]+1),I=this._pmtId=C(e,p);break;case I:f&&(p+=e[p]+1);var N=P(e,p);R=N.avc,R>0&&(T.id=R),A=N.aac,A>0&&(S.id=A),w=N.id3,w>0&&(b.id=w),_&&!E&&(c.logger.log("reparse from beginning"),_=!1,d=-188),E=this.pmtParsed=!0;break;case 17:case 8191:break;default:_=!0}}else this.observer.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,id:this.id,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});D&&(v=L(D))?(x(v,!0),T.pesData=null):T.pesData=D,O&&(v=L(O))?(k(v),S.pesData=null):(O&&O.size&&c.logger.log("last AAC PES packet truncated,might overlap between fragments"),S.pesData=O),M&&(v=L(M))?(F(v),b.pesData=null):b.pesData=M,this.remux(a,o,null,r)}},{key:"remux",value:function(e,t,n,r){var i=this._avcTrack,a=i.samples,o=a.reduce(function(e,t){var n=t.units.units.reduce(function(e,t){return{len:e.len+t.data.length,nbNalu:e.nbNalu+1}},{len:0,nbNalu:0});return t.length=n.len,{len:e.len+n.len,nbNalu:e.nbNalu+n.nbNalu}},{len:0,nbNalu:0});i.len=o.len,i.nbNalu=o.nbNalu,this.remuxer.remux(e,t,this._aacTrack,this._avcTrack,this._id3Track,this._txtTrack,r,this.contiguous,this.accurateTimeOffset,n)}},{key:"destroy",value:function(){this.switchLevel(),this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(e,t){return(31&e[t+10])<<8|e[t+11]}},{key:"_parsePMT",value:function(e,t){var n,r,i,a,o={aac:-1,avc:-1,id3:-1};for(n=(15&e[t+1])<<8|e[t+2],r=t+3+n-4,i=(15&e[t+10])<<8|e[t+11],t+=12+i;t<r;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 15:-1===o.aac&&(o.aac=a);break;case 21:-1===o.id3&&(o.id3=a);break;case 27:-1===o.avc&&(o.avc=a);break;case 36:c.logger.warn("HEVC stream type found, not supported for now");break;default:c.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return o}},{key:"_parsePES",value:function(e){var t,n,r,i,a,o,s,u,l=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(t=d[0],1===(t[0]<<16)+(t[1]<<8)+t[2]){if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;for(n=t[7],192&n&&(o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,o>4294967295&&(o-=8589934592),64&n?(s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(s-=8589934592):s=o),i=t[8],u=i+9,e.size-=u,a=new Uint8Array(e.size);d.length;){t=d.shift();var c=t.byteLength;if(u){if(u>c){u-=c;continue}t=t.subarray(u),c-=u,u=0}a.set(t,l),l+=c}return r&&(r-=i+3),{data:a,pts:o,dts:s,len:r}}return null}},{key:"pushAccesUnit",value:function(e,t){e.units.units.length&&(!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(t.samples.length||this.contiguous)?t.samples.push(e):t.dropped++),e.debug.length&&c.logger.log(e.pts+"/"+e.dts+":"+e.debug+","+e.units.length)}},{key:"_parseAVCPES",value:function(e,t){var n,r,i,a=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),u=this.avcSample;e.data=null,s.forEach(function(t){switch(t.type){case 1:r=!0;break;case 5:r=!0,u||(u=a.avcSample=a._createAVCSample(!0,e.pts,e.dts,"")),u.key=!0;break;case 6:r=!0,n=new f.default(a.discardEPB(t.data)),n.readUByte();for(var s=0,l=0,d=!1,c=0;!d&&n.bytesAvailable>1;){s=0;do{c=n.readUByte(),s+=c}while(255===c);l=0;do{c=n.readUByte(),l+=c}while(255===c);if(4===s&&0!==n.bytesAvailable){d=!0;if(181===n.readUByte()){if(49===n.readUShort()){if(1195456820===n.readUInt()){if(3===n.readUByte()){var h=n.readUByte(),g=n.readUByte(),p=31&h,v=[h,g];for(i=0;i<p;i++)v.push(n.readUByte()),v.push(n.readUByte()),v.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:v})}}}}}else if(l<n.bytesAvailable)for(i=0;i<l;i++)n.readUByte()}break;case 7:if(r=!0,!o.sps){n=new f.default(t.data);var m=n.readSPS();o.width=m.width,o.height=m.height,o.sps=[t.data],o.duration=a._duration;var y=t.data.subarray(1,4),_="avc1.";for(i=0;i<3;i++){var E=y[i].toString(16);E.length<2&&(E="0"+E),_+=E}o.codec=_}break;case 8:r=!0,o.pps||(o.pps=[t.data]);break;case 9:r=!1,u&&a.pushAccesUnit(u,o),u=a.avcSample=a._createAVCSample(!1,e.pts,e.dts,"");break;case 12:r=!1;break;default:r=!1,u&&(u.debug+="unknown NAL "+t.type+" ")}if(u&&r){u.units.units.push(t)}}),t&&u&&(this.pushAccesUnit(u,o),this.avcSample=null)}},{key:"_createAVCSample",value:function(e,t,n,r){return{key:e,pts:t,dts:n,units:{units:[],length:0},debug:r}}},{key:"_insertSampleInOrder",value:function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;r>=0;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)}},{key:"_getLastNalUnit",value:function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.units.length){var n=this._avcTrack,r=n.samples;e=r[r.length-1]}if(e){var i=e.units.units;t=i[i.length-1]}return t}},{key:"_parseAVCNALu",value:function(e){for(var t,n,r,i,a,o=0,s=e.byteLength,u=this._avcTrack,l=u.naluState||0,d=l,f=[],c=-1;o<s;)switch(t=e[o++],l){case 0:0===t&&(l=1);break;case 1:l=0===t?2:0;break;case 2:case 3:if(0===t)l=3;else if(1===t){if(c>=0)r={data:e.subarray(c,o-l-1),type:a},f.push(r);else{var h=this._getLastNalUnit();if(h&&(d&&o<=4-d&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-d)),(n=o-l-1)>0)){var g=new Uint8Array(h.data.byteLength+n);g.set(h.data,0),g.set(e.subarray(0,n),h.data.byteLength),h.data=g}}o<s?(i=31&e[o],c=o,a=i,l=0):l=-1}else l=0;break;case-1:c=0,a=31&t,l=0}if(c>=0&&l>=0&&(r={data:e.subarray(c,s),type:a,state:l},f.push(r)),0===f.length){var p=this._getLastNalUnit();if(p){var v=new Uint8Array(p.data.byteLength+e.byteLength);v.set(p.data,0),v.set(e,p.data.byteLength),p.data=v}}return u.naluState=l,f}},{key:"discardEPB",value:function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n}},{key:"_parseAACPES",value:function(e){var t,n,r,i,a,o,u,d,f,g=this._aacTrack,p=e.data,v=e.pts,m=this.aacOverFlow,y=this.aacLastPTS;if(m){var _=new Uint8Array(m.byteLength+p.byteLength);_.set(m,0),_.set(p,m.byteLength),p=_}for(a=0,d=p.length;a<d-1&&(255!==p[a]||240!=(240&p[a+1]));a++);if(a){var E,T;if(a<d-1?(E="AAC PES did not start with ADTS header,offset:"+a,T=!1):(E="no ADTS header found in AAC PES",T=!0),c.logger.warn("parsing error:"+E),this.observer.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,id:this.id,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:T,reason:E}),T)return}if(g.audiosamplerate||(t=s.default.getAudioConfig(this.observer,p,a,this.audioCodec),g.config=t.config,g.audiosamplerate=t.samplerate,g.channelCount=t.channelCount,g.codec=t.codec,g.duration=this._duration,c.logger.log("parsed codec:"+g.codec+",rate:"+t.samplerate+",nb channel:"+t.channelCount)),i=0,r=9216e4/g.audiosamplerate,m&&y){var S=y+r;Math.abs(S-v)>1&&(c.logger.log("AAC: align PTS for overlapping frames by "+Math.round((S-v)/90)),v=S)}for(;a+5<d&&(o=1&p[a+1]?7:9,n=(3&p[a+3])<<11|p[a+4]<<3|(224&p[a+5])>>>5,(n-=o)>0&&a+o+n<=d);)for(u=v+i*r,f={unit:p.subarray(a+o,a+o+n),pts:u,dts:u},g.samples.push(f),g.len+=n,a+=n+o,i++;a<d-1&&(255!==p[a]||240!=(240&p[a+1]));a++);m=a<d?p.subarray(a,d):null,this.aacOverFlow=m,this.aacLastPTS=u}},{key:"_parseID3PES",value:function(e){this._id3Track.samples.push(e)}}],[{key:"probe",value:function(e){return e.length>=564&&71===e[0]&&71===e[188]&&71===e[376]}}]),e}();n.default=g},{19:19,23:23,26:26,28:28,45:45}],26:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",OTHER_ERROR:"otherError"},n.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",INTERNAL_EXCEPTION:"internalException"}},{}],27:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(45),s=e(26),u=e(28),l=function(e){return e&&e.__esModule?e:{default:e}}(u),d=function(){function e(t){r(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];this.handledEvents=i,this.useGenericHandler=!0,this.registerListeners()}return a(e,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===i(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)}.bind(this))}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)}.bind(this))}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function(e,t){var n=function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)};try{n.call(this,e,t).call()}catch(t){o.logger.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}}}]),e}();n.default=d},{26:26,28:28,45:45}],28:[function(e,t,n){t.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVEL_SWITCH:"hlsLevelSwitch",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},{}],29:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"getSilentFrame",value:function(e){return 1===e?new Uint8Array([0,200,0,128,35,128]):2===e?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):null}}]),e}();n.default=a},{}],30:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"isBuffered",value:function(e,t){if(e)for(var n=e.buffered,r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0;return!1}},{key:"bufferInfo",value:function(e,t,n){if(e){var r,i=e.buffered,a=[];for(r=0;r<i.length;r++)a.push({start:i.start(r),end:i.end(r)});return this.bufferedInfo(a,t,n)}return{len:0,start:0,end:0,nextStart:void 0}}},{key:"bufferedInfo",value:function(e,t,n){var r,i,a,o,s,u=[];for(e.sort(function(e,t){var n=e.start-t.start;return n||t.end-e.end}),s=0;s<e.length;s++){var l=u.length;if(l){var d=u[l-1].end;e[s].start-d<n?e[s].end>d&&(u[l-1].end=e[s].end):u.push(e[s])}else u.push(e[s])}for(s=0,r=0,i=a=t;s<u.length;s++){var f=u[s].start,c=u[s].end;if(t+n>=f&&t<c)i=f,a=c,r=a-t;else if(t+n<f){o=f;break}}return{len:r,start:i,end:a,nextStart:o}}}]),e}();n.default=a},{}],31:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(45),o=function(){function e(){r(this,e)}return i(e,null,[{key:"mergeDetails",value:function(t,n){var r,i=Math.max(t.startSN,n.startSN)-n.startSN,o=Math.min(t.endSN,n.endSN)-n.startSN,s=n.startSN-t.startSN,u=t.fragments,l=n.fragments,d=0;if(o<i)return void(n.PTSKnown=!1);for(var f=i;f<=o;f++){var c=u[s+f],h=l[f];h&&c&&(d=c.cc-h.cc,isNaN(c.startPTS)||(h.start=h.startPTS=c.startPTS,h.endPTS=c.endPTS,h.duration=c.duration,r=h))}if(d)for(a.logger.log("discontinuity sliding from playlist, take drift into account"),f=0;f<l.length;f++)l[f].cc+=d;if(r)e.updateFragPTSDTS(n,r.sn,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(s>=0&&s<u.length){var g=u[s].start;for(f=0;f<l.length;f++)l[f].start+=g}n.PTSKnown=t.PTSKnown}},{key:"updateFragPTSDTS",value:function(t,n,r,i,a,o){var s,u,l,d;if(n<t.startSN||n>t.endSN)return 0;if(s=n-t.startSN,u=t.fragments,l=u[s],!isNaN(l.startPTS)){var f=Math.abs(l.startPTS-r);isNaN(l.deltaPTS)?l.deltaPTS=f:l.deltaPTS=Math.max(f,l.deltaPTS),r=Math.min(r,l.startPTS),i=Math.max(i,l.endPTS),a=Math.min(a,l.startDTS),o=Math.max(o,l.endDTS)}var c=r-l.start;for(l.start=l.startPTS=r,l.endPTS=i,l.startDTS=a,l.endDTS=o,l.duration=i-r,d=s;d>0;d--)e.updatePTS(u,d,d-1);for(d=s;d<u.length-1;d++)e.updatePTS(u,d,d+1);return t.PTSKnown=!0,c}},{key:"updatePTS",value:function(e,t,n){var r=e[t],i=e[n],o=i.startPTS;isNaN(o)?i.start=n>t?r.start+r.duration:r.start-i.duration:n>t?(r.duration=o-r.start,r.duration<0&&a.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(i.duration=r.start-o,i.duration<0&&a.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}}]),e}();n.default=o},{45:45}],32:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(28),s=r(o),u=e(26),l=e(36),d=r(l),f=e(34),c=r(f),h=e(4),g=r(h),p=e(7),v=r(p),m=e(8),y=r(m),_=e(5),E=r(_),T=e(12),S=r(T),b=e(11),R=r(b),A=e(13),w=r(A),I=e(10),D=r(I),O=e(6),M=r(O),C=e(45),P=e(48),L=r(P),x=e(1),k=r(x),F=e(35),N=r(F),U=e(43),B=r(U),j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n=e.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in n)r in t||(t[r]=n[r]);if(void 0!==t.liveMaxLatencyDurationCount&&t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(t.liveMaxLatencyDuration<=t.liveSyncDuration||void 0===t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,C.enableLogs)(t.debug),this.config=t;var a=this.observer=new k.default;a.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e,e].concat(n))},a.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.removeListener.apply(a,[e].concat(n))},this.on=a.on.bind(a),this.off=a.off.bind(a),this.trigger=a.trigger.bind(a),this.playlistLoader=new d.default(this),this.fragmentLoader=new c.default(this),this.levelController=new R.default(this),this.abrController=new t.abrController(this),this.bufferController=new t.bufferController(this),this.capLevelController=new t.capLevelController(this),this.fpsController=new t.fpsController(this),this.streamController=new t.streamController(this),this.audioStreamController=new t.audioStreamController(this),this.timelineController=new t.timelineController(this),this.audioTrackController=new M.default(this),this.keyLoader=new N.default(this)}return a(e,null,[{key:"isSupported",value:function(){return window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"version",get:function(){return"0.6.10"}},{key:"Events",get:function(){return s.default}},{key:"ErrorTypes",get:function(){return u.ErrorTypes}},{key:"ErrorDetails",get:function(){return u.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig||(e.defaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,seekHoleNudgeDuration:.01,stalledInBufferedNudgeThreshold:10,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:L.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:g.default,bufferController:v.default,capLevelController:y.default,fpsController:D.default,streamController:S.default,audioStreamController:E.default,timelineController:w.default,cueHandler:B.default,enableCEA708Captions:!0,enableMP2TPassThrough:!1,stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}),e.defaultConfig},set:function(t){e.defaultConfig=t}}]),a(e,[{key:"destroy",value:function(){C.logger.log("destroy"),this.trigger(s.default.DESTROYING),this.detachMedia(),this.playlistLoader.destroy(),this.fragmentLoader.destroy(),this.levelController.destroy(),this.abrController.destroy(),this.bufferController.destroy(),this.capLevelController.destroy(),this.fpsController.destroy(),this.streamController.destroy(),this.audioStreamController.destroy(),this.timelineController.destroy(),this.audioTrackController.destroy(),this.keyLoader.destroy(),this.url=null,this.observer.removeAllListeners()}},{key:"attachMedia",value:function(e){C.logger.log("attachMedia"),this.media=e,this.trigger(s.default.MEDIA_ATTACHING,{media:e})}},{key:"detachMedia",value:function(){C.logger.log("detachMedia"),this.trigger(s.default.MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(e){C.logger.log("loadSource:"+e),this.url=e,this.trigger(s.default.MANIFEST_LOADING,{url:e})}},{key:"startLoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;C.logger.log("startLoad"),this.levelController.startLoad(),this.streamController.startLoad(e),this.audioStreamController.startLoad(e)}},{key:"stopLoad",value:function(){C.logger.log("stopLoad"),this.levelController.stopLoad(),this.streamController.stopLoad(),this.audioStreamController.stopLoad()}},{key:"swapAudioCodec",value:function(){C.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){C.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){C.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){C.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){C.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return this.levelController.firstLevel},set:function(e){C.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){C.logger.log("set startLevel:"+e),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this.abrController.autoLevelCapping},set:function(e){C.logger.log("set autoLevelCapping:"+e),this.abrController.autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"audioTracks",get:function(){return this.audioTrackController.audioTracks}},{key:"audioTrack",get:function(){return this.audioTrackController.audioTrack},set:function(e){this.audioTrackController.audioTrack=e}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}}]),e}();n.default=j},{1:1,10:10,11:11,12:12,13:13,26:26,28:28,34:34,35:35,36:36,4:4,43:43,45:45,48:48,5:5,6:6,7:7,8:8}],33:[function(e,t,n){t.exports=e(32).default},{32:32}],34:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),f=r(d),c=e(26),h=e(45),g=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.FRAG_LOADING));return n.loaders={},n}return o(t,e),s(t,[{key:"destroy",value:function(){var e=this.loaders;for(var t in e){var n=e[t];n&&n.destroy()}this.loaders={},f.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag,n=t.type,r=this.loaders[n],i=this.hls.config;t.loaded=0,r&&(h.logger.warn("abort previous fragment loader for type:"+n),r.abort()),r=this.loaders[n]=t.loader=void 0!==i.fLoader?new i.fLoader(i):new i.loader(i);var a=void 0,o=void 0,s=void 0;a={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var u=t.byteRangeStartOffset,l=t.byteRangeEndOffset;isNaN(u)||isNaN(l)||(a.rangeStart=u,a.rangeEnd=l),o={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},r.load(a,o,s)}},{key:"loadsuccess",value:function(e,t,n){var r=e.data,i=n.frag;i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(l.default.FRAG_LOADED,{payload:r,frag:i,stats:t})}},{key:"loaderror",value:function(e,t){var n=t.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:c.ErrorTypes.NETWORK_ERROR,details:c.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e})}},{key:"loadtimeout",value:function(e,t){var n=t.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:c.ErrorTypes.NETWORK_ERROR,details:c.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag})}},{key:"loadprogress",value:function(e,t,n){var r=t.frag;r.loaded=e.loaded,this.hls.trigger(l.default.FRAG_LOAD_PROGRESS,{frag:r,stats:e})}}]),t}(f.default);n.default=g},{26:26,27:27,28:28,45:45}],35:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),f=r(d),c=e(26),h=e(45),g=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.KEY_LOADING));return n.loaders={},n.decryptkey=null,n.decrypturl=null,n}return o(t,e),s(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},f.default.prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(e){var t=e.frag,n=t.type,r=this.loaders[n],i=t.decryptdata,a=i.uri;if(a!==this.decrypturl||null===this.decryptkey){var o=this.hls.config;r&&(h.logger.warn("abort previous key loader for type:"+n),r.abort()),t.loader=this.loaders[n]=new o.loader(o),this.decrypturl=a,this.decryptkey=null;var s=void 0,u=void 0,d=void 0;s={url:a,frag:t,responseType:"arraybuffer"},u={timeout:o.fragLoadingTimeOut,maxRetry:o.fragLoadingMaxRetry,retryDelay:o.fragLoadingRetryDelay,maxRetryDelay:o.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(s,u,d)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(l.default.KEY_LOADED,{frag:t}))}},{key:"loadsuccess",value:function(e,t,n){var r=n.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(l.default.KEY_LOADED,{frag:r})}},{key:"loaderror",value:function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:c.ErrorTypes.NETWORK_ERROR,details:c.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})}},{key:"loadtimeout",value:function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:c.ErrorTypes.NETWORK_ERROR,details:c.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})}}]),t}(f.default);n.default=g},{26:26,27:27,28:28,45:45}],36:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(2),l=r(u),d=e(28),f=r(d),c=e(27),h=r(c),g=e(26),p=e(40),v=r(p),m=e(45),y=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f.default.MANIFEST_LOADING,f.default.LEVEL_LOADING,f.default.AUDIO_TRACK_LOADING));return n.loaders={},n}
return o(t,e),s(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},h.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(e){this.load(e.url,{type:"manifest"})}},{key:"onLevelLoading",value:function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})}},{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"load",value:function(e,t){var n=this.loaders[t.type];if(n){var r=n.context;if(r&&r.url===e)return void m.logger.trace("playlist request ongoing");m.logger.warn("abort previous loader for type:"+t.type),n.abort()}var i=this.hls.config,a=void 0,o=void 0,s=void 0,u=void 0;"manifest"===t.type?(a=i.manifestLoadingMaxRetry,o=i.manifestLoadingTimeOut,s=i.manifestLoadingRetryDelay,u=i.manifestLoadingMaxRetryTimeOut):(a=i.levelLoadingMaxRetry,o=i.levelLoadingTimeOut,s=i.levelLoadingRetryDelay,u=i.levelLoadingMaxRetryTimeOut,m.logger.log("loading playlist for level "+t.level)),n=this.loaders[t.type]=t.loader=void 0!==i.pLoader?new i.pLoader(i):new i.loader(i),t.url=e,t.responseType="";var l=void 0,d=void 0;l={timeout:o,maxRetry:a,retryDelay:s,maxRetryDelay:u},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},n.load(t,l,d)}},{key:"resolve",value:function(e,t){return l.default.buildAbsoluteURL(t,e)}},{key:"parseMasterPlaylist",value:function(e,t){for(var n=[],r=void 0,i=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g;null!=(r=i.exec(e));){var a={},o=a.attrs=new v.default(r[1]);a.url=this.resolve(r[2],t);var s=o.decimalResolution("RESOLUTION");s&&(a.width=s.width,a.height=s.height),a.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),a.name=o.NAME;var u=o.CODECS;if(u){u=u.split(/[ ,]+/);for(var l=0;l<u.length;l++){var d=u[l];-1!==d.indexOf("avc1")?a.videoCodec=this.avc1toavcoti(d):a.audioCodec=d}}n.push(a)}return n}},{key:"parseMasterPlaylistMedia",value:function(e,t,n){for(var r=void 0,i=[],a=/#EXT-X-MEDIA:(.*)/g;null!=(r=a.exec(e));){var o={},s=new v.default(r[1]);s.TYPE===n&&(o.groupId=s["GROUP-ID"],o.name=s.NAME,o.type=n,o.default="YES"===s.DEFAULT,o.autoselect="YES"===s.AUTOSELECT,o.forced="YES"===s.FORCED,s.URI&&(o.url=this.resolve(s.URI,t)),o.lang=s.LANGUAGE,o.name||(o.name=o.lang),i.push(o))}return i}},{key:"createInitializationVector",value:function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}},{key:"fragmentDecryptdataFromLevelkey",value:function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&(n=this.cloneObj(e),n.iv=this.createInitializationVector(t)),n}},{key:"avc1toavcoti",value:function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t}},{key:"cloneObj",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"parseLevelPlaylist",value:function(e,t,n,r){var i,a,o,s=0,u=0,l={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},d={method:null,key:null,iv:null,uri:null},f=0,c=null,h=null,g=null,p=null,y=null,_=null,E=[];for(o=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT(INF): *(\d+(?:\.\d+)?)(?:,(.*))?)|(?:(?!#)()(\S.+))|(?:#EXT-X-(BYTERANGE): *(\d+(?:@\d+(?:\.\d+)?)?)|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(PROGRAM-DATE-TIME):(.+))|(?:#EXT-X-(VERSION):(\d+))|(?:(#)(.*):(.*))|(?:(#)(.*)))(?:.*)\r?\n?/g;null!==(a=o.exec(e));)switch(a.shift(),a=a.filter(function(e){return void 0!==e}),a[0]){case"PLAYLIST-TYPE":l.type=a[1].toUpperCase();break;case"MEDIA-SEQUENCE":s=l.startSN=parseInt(a[1]);break;case"TARGETDURATION":l.targetduration=parseFloat(a[1]);break;case"VERSION":l.version=parseInt(a[1]);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":f++,E.push(a);break;case"DISCONTINUITY-SEQ":f=parseInt(a[1]);break;case"BYTERANGE":var T=a[1].split("@");_=1===T.length?y:parseInt(T[1]),y=parseInt(T[0])+_;break;case"INF":g=parseFloat(a[1]),p=a[2]?a[2]:null,E.push(a);break;case"":if(!isNaN(g)){var S=s++;i=this.fragmentDecryptdataFromLevelkey(d,S);h={url:a[1]?this.resolve(a[1],t):null,type:r,duration:g,title:p,start:u,sn:S,level:n,cc:f,decryptdata:i,programDateTime:c,tagList:E},null!==_&&(h.byteRangeStartOffset=_,h.byteRangeEndOffset=y),l.fragments.push(h),u+=g,g=null,p=null,_=null,c=null,E=[]}break;case"KEY":var b=a[1],R=new v.default(b),A=R.enumeratedString("METHOD"),w=R.URI,I=R.hexadecimalInteger("IV");A&&(d={method:null,key:null,iv:null,uri:null},w&&"AES-128"===A&&(d.method=A,d.uri=this.resolve(w,t),d.key=null,d.iv=I));break;case"START":var D=a[1],O=new v.default(D),M=O.decimalFloatingPoint("TIME-OFFSET");isNaN(M)||(l.startTimeOffset=M);break;case"PROGRAM-DATE-TIME":c=new Date(Date.parse(a[1])),E.push(a);break;case"#":a.shift(),E.push(a);break;default:m.logger.warn("line parsed but not handled: "+a)}return h&&!h.url&&(l.fragments.pop(),u-=h.duration),l.totalduration=u,l.averagetargetduration=u/l.fragments.length,l.endSN=s-1,l}},{key:"loadsuccess",value:function(e,t,n){var r=e.data,i=e.url,a=n.type,o=n.id,s=n.level,u=this.hls;if(this.loaders[a]=void 0,void 0!==i&&0!==i.indexOf("data:")||(i=n.url),t.tload=performance.now(),0===r.indexOf("#EXTM3U"))if(r.indexOf("#EXTINF:")>0){var l="audioTrack"!==a,d=this.parseLevelPlaylist(r,i,(l?s:o)||0,l?"main":"audio");"manifest"===a&&u.trigger(f.default.MANIFEST_LOADED,{levels:[{url:i,details:d}],audioTracks:[],url:i,stats:t}),t.tparsed=performance.now(),d.targetduration?l?u.trigger(f.default.LEVEL_LOADED,{details:d,level:s||0,id:o||0,stats:t}):u.trigger(f.default.AUDIO_TRACK_LOADED,{details:d,id:o,stats:t}):u.trigger(f.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"invalid targetduration"})}else{var c=this.parseMasterPlaylist(r,i);if(c.length){var h=this.parseMasterPlaylistMedia(r,i,"AUDIO");if(h.length){var p=!1;h.forEach(function(e){e.url||(p=!0)}),!1===p&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(m.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main"}))}u.trigger(f.default.MANIFEST_LOADED,{levels:c,audioTracks:h,url:i,stats:t})}else u.trigger(f.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"no level found in manifest"})}else u.trigger(f.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"no EXTM3U delimiter"})}},{key:"loaderror",value:function(e,t){var n,r,i=t.loader;switch(t.type){case"manifest":n=g.ErrorDetails.MANIFEST_LOAD_ERROR,r=!0;break;case"level":n=g.ErrorDetails.LEVEL_LOAD_ERROR,r=!1;break;case"audioTrack":n=g.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,r=!1}i&&(i.abort(),this.loaders[t.type]=void 0),this.hls.trigger(f.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:n,fatal:r,url:i.url,loader:i,response:e,context:t})}},{key:"loadtimeout",value:function(e,t){var n,r,i=t.loader;switch(t.type){case"manifest":n=g.ErrorDetails.MANIFEST_LOAD_TIMEOUT,r=!0;break;case"level":n=g.ErrorDetails.LEVEL_LOAD_TIMEOUT,r=!1;break;case"audioTrack":n=g.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,r=!1}i&&(i.abort(),this.loaders[t.type]=void 0),this.hls.trigger(f.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:n,fatal:r,url:i.url,loader:i,context:t})}}]),t}(h.default);n.default=y},{2:2,26:26,27:27,28:28,40:40,45:45}],37:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"init",value:function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,u,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))}},{key:"box",value:function(e){for(var t,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,a=i;i--;)r+=n[i].byteLength;for(t=new Uint8Array(r),t[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),i=0,r=8;i<a;i++)t.set(n[i],r),r+=n[i].byteLength;return t}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,n){return n*=t,e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"minf",value:function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))}},{key:"moov",value:function(t){for(var n=t.length,r=[];n--;)r[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))}},{key:"mvex",value:function(t){for(var n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))}},{key:"mvhd",value:function(t,n){n*=t;var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,r)}},{key:"sdtp",value:function(t){var n,r,i=t.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,a)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:"avc1",value:function(t){var n,r,i,a=[],o=[];for(n=0;n<t.sps.length;n++)r=t.sps[n],i=r.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));for(n=0;n<t.pps.length;n++)r=t.pps[n],i=r.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),u=t.width,l=t.height;return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(t){var n=t.audiosamplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"stsd",value:function(t){return"audio"===t.type?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var n=t.id,r=t.duration*t.timescale,i=t.width,a=t.height;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))}},{key:"traf",value:function(t,n){var r=e.sdtp(t),i=t.id;return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),e.trun(t,r.length+16+16+8+16+8+8),r)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,n){var r,i,a,o,s,u,l=t.samples||[],d=l.length,f=12+16*d,c=new Uint8Array(f);for(n+=8+f,c.set([0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,255&d,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<d;r++)i=l[r],a=i.duration,o=i.size,s=i.flags,u=i.cts,c.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*r);return e.box(e.types.trun,c)}},{key:"initSegment",value:function(t){e.types||e.init();var n,r=e.moov(t);return n=new Uint8Array(e.FTYP.byteLength+r.byteLength),n.set(e.FTYP),n.set(r,e.FTYP.byteLength),n}}]),e}();n.default=a},{}],38:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(29),s=r(o),u=e(28),l=r(u),d=e(45),f=e(37),c=r(f),h=e(26);e(46);var g=function(){function e(t,n,r){i(this,e),this.observer=t,this.id=n,this.config=r,this.ISGenerated=!1,this.PES2MP4SCALEFACTOR=4,this.PES_TIMESCALE=9e4,this.MP4_TIMESCALE=this.PES_TIMESCALE/this.PES2MP4SCALEFACTOR}return a(e,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){this._initPTS=this._initDTS=void 0}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,n,r,i,a,o,s,u){if(this.level=e,this.sn=t,this.ISGenerated||this.generateIS(n,r,o),this.ISGenerated)if(n.samples.length){var d=this.remuxAudio(n,o,s,u);if(r.samples.length){var f=void 0;d&&(f=d.endPTS-d.startPTS),this.remuxVideo(r,o,s,f)}}else{var c=void 0;r.samples.length&&(c=this.remuxVideo(r,o,s)),c&&n.codec&&this.remuxEmptyAudio(n,o,s,c)}i.samples.length&&this.remuxID3(i,o),a.samples.length&&this.remuxText(a,o),this.observer.trigger(l.default.FRAG_PARSED,{id:this.id,level:this.level,sn:this.sn})}},{key:"generateIS",value:function(e,t,n){var r,i,a=this.observer,o=e.samples,s=t.samples,u=this.PES_TIMESCALE,f={},g={id:this.id,level:this.level,sn:this.sn,tracks:f,unique:!1},p=void 0===this._initPTS;p&&(r=i=1/0),e.config&&o.length&&(e.timescale=e.audiosamplerate,e.timescale*e.duration>Math.pow(2,32)&&function(){e.timescale=e.audiosamplerate/function e(t,n){return n?e(n,t%n):t}(e.audiosamplerate,1024)}(),d.logger.log("audio mp4 timescale :"+e.timescale),f.audio={container:"audio/mp4",codec:e.codec,initSegment:c.default.initSegment([e]),metadata:{channelCount:e.channelCount}},p&&(r=i=o[0].pts-u*n)),t.sps&&t.pps&&s.length&&(t.timescale=this.MP4_TIMESCALE,f.video={container:"video/mp4",codec:t.codec,initSegment:c.default.initSegment([t]),metadata:{width:t.width,height:t.height}},p&&(r=Math.min(r,s[0].pts-u*n),i=Math.min(i,s[0].dts-u*n))),Object.keys(f).length?(a.trigger(l.default.FRAG_PARSING_INIT_SEGMENT,g),this.ISGenerated=!0,p&&(this._initPTS=r,this._initDTS=i)):a.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,id:this.id,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,n,r){var i,a,o,s,u,f,h,g=8,p=this.PES_TIMESCALE,v=this.PES2MP4SCALEFACTOR,m=e.samples,y=[],_=m.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(_<0){d.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(_/90)+" ms to overcome this issue");for(var E=0;E<m.length;E++)m[E].dts+=_}var T=void 0;T=n?this.nextAvcDts:t*p;var S=m[0];u=Math.max(this._PTSNormalize(S.dts-this._initDTS,T),0),s=Math.max(this._PTSNormalize(S.pts-this._initDTS,T),0);var b=Math.round((u-T)/90);n&&b&&(b>1?d.logger.log("AVC:"+b+" ms hole between fragments detected,filling it"):b<-1&&d.logger.log("AVC:"+-b+" ms overlapping between fragments detected"),u=T,m[0].dts=u+this._initDTS,s=Math.max(s-b,T),m[0].pts=s+this._initDTS,d.logger.log("Video/PTS/DTS adjusted: "+Math.round(s/90)+"/"+Math.round(u/90)+",delta:"+b+" ms")),u,S=m[m.length-1],h=Math.max(this._PTSNormalize(S.dts-this._initDTS,T),0),f=Math.max(this._PTSNormalize(S.pts-this._initDTS,T),0),f=Math.max(f,h);var R=navigator.vendor,A=navigator.userAgent,w=R&&R.indexOf("Apple")>-1&&A&&!A.match("CriOS");w&&(i=Math.round((h-u)/(v*(m.length-1))));for(var I=0;I<m.length;I++){var D=m[I];w?D.dts=u+I*v*i:(D.dts=Math.max(this._PTSNormalize(D.dts-this._initDTS,T),u),D.dts=Math.round(D.dts/v)*v),D.pts=Math.max(this._PTSNormalize(D.pts-this._initDTS,T),D.dts),D.pts=Math.round(D.pts/v)*v}a=new Uint8Array(e.len+4*e.nbNalu+8);var O=new DataView(a.buffer);O.setUint32(0,a.byteLength),a.set(c.default.types.mdat,4);for(var M=0;M<m.length;M++){for(var C=m[M],P=0,L=void 0;C.units.units.length;){var x=C.units.units.shift();O.setUint32(g,x.data.byteLength),g+=4,a.set(x.data,g),g+=x.data.byteLength,P+=4+x.data.byteLength}if(w)L=Math.max(0,i*Math.round((C.pts-C.dts)/(v*i)));else{if(M<m.length-1)i=m[M+1].dts-C.dts;else{var k=this.config,F=C.dts-m[M>0?M-1:M].dts;if(k.stretchShortVideoTrack){var N=k.maxBufferHole,U=k.maxSeekHole,B=Math.floor(Math.min(N,U)*p),j=(r?s+r*p:this.nextAacPts)-C.pts;j>B?(i=j-F,i<0&&(i=F),d.logger.log("It is approximately "+j/90+" ms to the next segment; using duration "+i/90+" ms for the last video frame.")):i=F}else i=F}i/=v,L=Math.round((C.pts-C.dts)/v)}y.push({size:P,duration:i,cts:L,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:C.key?2:1,isNonSync:C.key?0:1}})}this.nextAvcDts=h+i*v;var G=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,y.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var K=y[0].flags;K.dependsOn=2,K.isNonSync=0}e.samples=y,o=c.default.moof(e.sequenceNumber++,u/v,e),e.samples=[];var H={id:this.id,level:this.level,sn:this.sn,data1:o,data2:a,startPTS:s/p,endPTS:(f+v*i)/p,startDTS:u/p,endDTS:this.nextAvcDts/p,type:"video",nb:y.length,dropped:G};return this.observer.trigger(l.default.FRAG_PARSING_DATA,H),H}},{key:"remuxAudio",value:function(e,t,n,r){var i,a,o,u,f,h,g,p,v,m,y,_,E,T,S,b,R=this.PES_TIMESCALE,A=e.timescale,w=R/A,I=1024*e.timescale/e.audiosamplerate,D=I*w,O=8,M=[],C=[];if(e.samples.sort(function(e,t){return e.pts-t.pts}),C=e.samples,b=this.nextAacPts,n|=C.length&&b&&(Math.abs(t-b/R)<.1||Math.abs(C[0].pts-b-this._initDTS)<20*D),n||(b=t*R),r)for(var P=0,L=b;P<C.length;){var x=C[P],k=this._PTSNormalize(x.pts-this._initDTS,b),F=k-L;if(F<=-D)d.logger.warn("Dropping 1 audio frame @ "+Math.round(L/90)/1e3+"s due to "+Math.round(Math.abs(F/90))+" ms overlap."),C.splice(P,1),e.len-=x.unit.length;else if(F>=D){var N=Math.round(F/D);d.logger.warn("Injecting "+N+" audio frame @ "+Math.round(L/90)/1e3+"s due to "+Math.round(F/90)+" ms gap.");for(var U=0;U<N;U++)S=L+this._initDTS,S=Math.max(S,this._initDTS),T=s.default.getSilentFrame(e.channelCount),T||(d.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),T=x.unit.slice(0)),C.splice(P,0,{unit:T,pts:S,dts:S}),e.len+=T.length,L+=D,P+=1;x.pts=x.dts=L+this._initDTS,L+=D,P+=1}else Math.abs(F),L+=D,x.pts=x.dts=0===P?this._initDTS+b:C[P-1].pts+D,P+=1}for(;C.length;){if(a=C.shift(),u=a.unit,m=a.pts-this._initDTS,y=a.dts-this._initDTS,void 0!==v)_=this._PTSNormalize(m,v),E=this._PTSNormalize(y,v),o.duration=Math.round((E-v)/w);else{_=this._PTSNormalize(m,b),E=this._PTSNormalize(y,b);var B=Math.round(1e3*(_-b)/R),j=0;if(n&&B){if(B>0)j=Math.round((_-b)/D),d.logger.log(B+" ms hole between AAC samples detected,filling it"),j>0&&(T=s.default.getSilentFrame(e.channelCount),T||(T=u.slice(0)),e.len+=j*T.length);else if(B<-12){d.logger.log(-B+" ms overlapping between AAC samples detected, drop frame"),e.len-=u.byteLength;continue}_=E=b}if(g=Math.max(0,_),p=Math.max(0,E),!(e.len>0))return;f=new Uint8Array(e.len+8),i=new DataView(f.buffer),i.setUint32(0,f.byteLength),f.set(c.default.types.mdat,4);for(var G=0;G<j;G++)S=_-(j-G)*D,T=s.default.getSilentFrame(e.channelCount),T||(d.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),T=u.slice(0)),f.set(T,O),O+=T.byteLength,o={size:T.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},M.push(o)}f.set(u,O),O+=u.byteLength,o={size:u.byteLength,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},M.push(o),v=E}var K=0,H=M.length;if(H>=2&&(K=M[H-2].duration,o.duration=K),H){this.nextAacPts=_+w*K,e.len=0,e.samples=M,h=c.default.moof(e.sequenceNumber++,p/w,e),e.samples=[];var q={id:this.id,level:this.level,sn:this.sn,data1:h,data2:f,startPTS:g/R,endPTS:this.nextAacPts/R,startDTS:p/R,endDTS:(E+w*K)/R,type:"audio",nb:H};return this.observer.trigger(l.default.FRAG_PARSING_DATA,q),q}return null}},{key:"remuxEmptyAudio",value:function(e,t,n,r){var i=this.PES_TIMESCALE,a=e.timescale?e.timescale:e.audiosamplerate,o=i/a,u=this.nextAacPts,l=(void 0!==u?u:r.startDTS*i)+this._initDTS,f=r.endDTS*i+this._initDTS,c=1024*o,h=Math.ceil((f-l)/c),g=s.default.getSilentFrame(e.channelCount);if(d.logger.warn("remux empty Audio"),!g)return void d.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var p=[],v=0;v<h;v++){var m=l+v*c;p.push({unit:g.slice(0),pts:m,dts:m}),e.len+=g.length}e.samples=p,this.remuxAudio(e,t,n)}},{key:"remuxID3",value:function(e,t){var n,r=e.samples.length;if(r){for(var i=0;i<r;i++)n=e.samples[i],n.pts=(n.pts-this._initPTS)/this.PES_TIMESCALE,n.dts=(n.dts-this._initDTS)/this.PES_TIMESCALE;this.observer.trigger(l.default.FRAG_PARSING_METADATA,{id:this.id,level:this.level,sn:this.sn,samples:e.samples})}e.samples=[],t=t}},{key:"remuxText",value:function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var n,r=e.samples.length;if(r){for(var i=0;i<r;i++)n=e.samples[i],n.pts=(n.pts-this._initPTS)/this.PES_TIMESCALE;this.observer.trigger(l.default.FRAG_PARSING_USERDATA,{id:this.id,level:this.level,sn:this.sn,samples:e.samples})}e.samples=[],t=t}},{key:"_PTSNormalize",value:function(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}},{key:"passthrough",get:function(){return!1}}]),e}();n.default=g},{26:26,28:28,29:29,37:37,45:45,46:46}],39:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(28),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t,n){r(this,e),this.observer=t,this.id=n,this.ISGenerated=!1}return i(e,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,n,r,i,a){var s=this.observer;if(!this.ISGenerated){var u={},l={id:this.id,tracks:u,unique:!0},d=t,f=d.codec;f&&(l.tracks.video={container:d.container,codec:f,metadata:{width:d.width,height:d.height}}),d=e,f=d.codec,f&&(l.tracks.audio={container:d.container,codec:f,metadata:{channelCount:d.channelCount}}),this.ISGenerated=!0,s.trigger(o.default.FRAG_PARSING_INIT_SEGMENT,l)}s.trigger(o.default.FRAG_PARSING_DATA,{id:this.id,data1:a,startPTS:i,startDTS:i,type:"audiovideo",nb:1,dropped:0})}},{key:"passthrough",get:function(){return!0}}]),e}();n.default=s},{28:28}],40:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),"string"==typeof t&&(t=e.parseAttrList(t));for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])}return i(e,[{key:"decimalInteger",value:function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"hexadecimalInteger",value:function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null}},{key:"hexadecimalIntegerAsNumber",value:function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"decimalFloatingPoint",value:function(e){return parseFloat(this[e])}},{key:"enumeratedString",value:function(e){return this[e]}},{key:"decimalResolution",value:function(e){var t=/^(\d+)x(\d+)$/.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}}],[{key:"parseAttrList",value:function(e){for(var t,n=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,r={};null!==(t=n.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r}}]),e}();n.default=a},{}],41:[function(e,t,n){var r={search:function(e,t){for(var n=0,r=e.length-1,i=null,a=null;n<=r;){i=(n+r)/2|0,a=e[i];var o=t(a);if(o>0)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}};t.exports=r},{}],42:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o=function(e){var t=e;return a.hasOwnProperty(e)&&(t=a[e]),String.fromCharCode(t)},s=15,u=32,l={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},d={17:2,18:4,21:6,22:8,23:10,19:13,20:15},f={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],g={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e];this.verboseLevel}},p=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},v=function(){function e(t,n,i,a,o){r(this,e),this.foreground=t||"white",this.underline=n||!1,this.italics=i||!1,this.background=a||"black",this.flash=o||!1}return i(e,[{key:"reset",value:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}},{key:"setStyles",value:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}},{key:"isDefault",value:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}},{key:"equals",value:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}},{key:"copy",value:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}},{key:"toString",value:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}]),e}(),m=function(){function e(t,n,i,a,o,s){r(this,e),this.uchar=t||" ",this.penState=new v(n,i,a,o,s)}return i(e,[{key:"reset",value:function(){this.uchar=" ",this.penState.reset()}},{key:"setChar",value:function(e,t){this.uchar=e,this.penState.copy(t)}},{key:"setPenState",value:function(e){this.penState.copy(e)}},{key:"equals",value:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}},{key:"copy",value:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)}},{key:"isEmpty",value:function(){return" "===this.uchar&&this.penState.isDefault()}}]),e}(),y=function(){function e(){r(this,e),this.chars=[];for(var t=0;t<u;t++)this.chars.push(new m);this.pos=0,this.currPenState=new v}return i(e,[{key:"equals",value:function(e){for(var t=!0,n=0;n<u;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<u;t++)this.chars[t].copy(e.chars[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<u;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}},{key:"setCursor",value:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(g.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>u&&(g.log("ERROR","Too large cursor position "+this.pos),this.pos=u)}},{key:"moveCursor",value:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}},{key:"backSpace",value:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}},{key:"insertChar",value:function(e){e>=144&&this.backSpace();var t=o(e);return this.pos>=u?void g.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),void this.moveCursor(1))}},{key:"clearFromPos",value:function(e){var t;for(t=e;t<u;t++)this.chars[t].reset()}},{key:"clear",value:function(){
this.clearFromPos(0),this.pos=0,this.currPenState.reset()}},{key:"clearToEndOfRow",value:function(){this.clearFromPos(this.pos)}},{key:"getTextString",value:function(){for(var e=[],t=!0,n=0;n<u;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")}},{key:"setPenStyles",value:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}]),e}(),_=function(){function e(){r(this,e),this.rows=[];for(var t=0;t<s;t++)this.rows.push(new y);this.currRow=s-1,this.nrRollUpRows=null,this.reset()}return i(e,[{key:"reset",value:function(){for(var e=0;e<s;e++)this.rows[e].clear();this.currRow=s-1}},{key:"equals",value:function(e){for(var t=!0,n=0;n<s;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<s;t++)this.rows[t].copy(e.rows[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<s;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}},{key:"backSpace",value:function(){this.rows[this.currRow].backSpace()}},{key:"clearToEndOfRow",value:function(){this.rows[this.currRow].clearToEndOfRow()}},{key:"insertChar",value:function(e){this.rows[this.currRow].insertChar(e)}},{key:"setPen",value:function(e){this.rows[this.currRow].setPenStyles(e)}},{key:"moveCursor",value:function(e){this.rows[this.currRow].moveCursor(e)}},{key:"setCursor",value:function(e){g.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)}},{key:"setPAC",value:function(e,t){g.log("INFO","pacData = "+JSON.stringify(e));var n=e.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(var r=0;r<s;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,a=t.rows[i].cueStartTime;if(a&&a<g.time)for(r=0;r<this.nrRollUpRows;r++)this.rows[n-this.nrRollUpRows+r+1].copy(t.rows[i+r])}this.currRow=n;var o=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,l=Math.max(u-1,0);o.setCursor(e.indent),e.color=o.chars[l].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)}},{key:"setBkgData",value:function(e){g.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}},{key:"setRollUpRows",value:function(e){this.nrRollUpRows=e}},{key:"rollUp",value:function(){if(null===this.nrRollUpRows)return void g.log("DEBUG","roll_up but nrRollUpRows not set yet");g.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),g.log("INFO","Rolling up")}},{key:"getDisplayText",value:function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<s;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}},{key:"getTextAndFormat",value:function(){return this.rows}}]),e}(),E=function(){function e(t,n){r(this,e),this.chNr=t,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new _,this.nonDisplayedMemory=new _,this.lastOutputScreen=new _,this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return i(e,[{key:"reset",value:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null}},{key:"getHandler",value:function(){return this.outputFilter}},{key:"setHandler",value:function(e){this.outputFilter=e}},{key:"setPAC",value:function(e){this.writeScreen.setPAC(e,this.lastOutputScreen)}},{key:"setBkgData",value:function(e){this.writeScreen.setBkgData(e)}},{key:"setMode",value:function(e){e!==this.mode&&(this.mode=e,g.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset(),this.lastOutputScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}},{key:"insertChars",value:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";g.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(g.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}},{key:"ccRCL",value:function(){g.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}},{key:"ccBS",value:function(){g.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}},{key:"ccAOF",value:function(){}},{key:"ccAON",value:function(){}},{key:"ccDER",value:function(){g.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:"ccRU",value:function(e){g.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}},{key:"ccFON",value:function(){g.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})}},{key:"ccRDC",value:function(){g.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}},{key:"ccTR",value:function(){g.log("INFO","TR"),this.setMode("MODE_TEXT")}},{key:"ccRTD",value:function(){g.log("INFO","RTD"),this.setMode("MODE_TEXT")}},{key:"ccEDM",value:function(){g.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()}},{key:"ccCR",value:function(){g.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()}},{key:"ccENM",value:function(){g.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}},{key:"ccEOC",value:function(){if(g.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,g.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()}},{key:"ccTO",value:function(e){g.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}},{key:"ccMIDROW",value:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}g.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}},{key:"outputDataUpdate",value:function(){var e=g.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}},{key:"cueSplitAtTime",value:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}]),e}(),T=function(){function e(t,n,i){r(this,e),this.field=t||1,this.outputs=[n,i],this.channels=[new E(1,n),new E(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return i(e,[{key:"getHandler",value:function(e){return this.channels[e].getHandler()}},{key:"setHandler",value:function(e,t){this.channels[e].setHandler(t)}},{key:"addData",value:function(e,t){var n,r,i,a=!1;this.lastTime=e,g.setTime(e);for(var o=0;o<t.length;o+=2)if(r=127&t[o],i=127&t[o+1],0!==r||0!==i){if(g.log("DATA","["+p([t[o],t[o+1]])+"] -> ("+p([r,i])+")"),n=this.parseCmd(r,i),n||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(a=this.parseChars(r,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(a)}else g.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,g.log("WARNING","Couldn't parse cleaned data "+p([r,i])+" orig: "+p([t[o],t[o+1]])))}else this.dataCounters.padding+=2}},{key:"parseCmd",value:function(e,t){var n=null,r=(20===e||28===e)&&32<=t&&t<=47,i=(23===e||31===e)&&33<=t&&t<=35;if(!r&&!i)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,g.log("DEBUG","Repeated command ("+p([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var a=this.channels[n-1];return 20===e||28===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0}},{key:"parseMidrow",value:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return g.log("ERROR","Mismatch channel in midrow parsing"),!1;return this.channels[n-1].ccMIDROW(t),g.log("DEBUG","MIDROW ("+p([e,t])+")"),!0}return!1}},{key:"parsePAC",value:function(e,t){var n=null,r=null,i=(17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127,a=(16===e||24===e)&&64<=t&&t<=95;if(!i&&!a)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,r=64<=t&&t<=95?1===n?l[e]:f[e]:1===n?d[e]:c[e];var o=this.interpretPAC(r,t);return this.channels[n-1].setPAC(o),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0}},{key:"interpretPAC",value:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r}},{key:"parseChars",value:function(e,t){var n=null,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),17<=i&&i<=19){var a=t;a=17===i?t+80:18===i?t+112:t+144,g.log("INFO","Special char '"+o(a)+"' in channel "+n),r=[a]}else 32<=e&&e<=127&&(r=0===t?[e]:[e,t]);if(r){var s=p(r);g.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r}},{key:"parseBackgroundAttributes",value:function(e,t){var n,r,i,a,o=(16===e||24===e)&&32<=t&&t<=47,s=(23===e||31===e)&&45<=t&&t<=47;return!(!o&&!s||(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=h[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,a=this.channels[i-1],a.setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,0))}},{key:"reset",value:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null}},{key:"cueSplitAtTime",value:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}}]),e}();n.default=T},{}],43:[function(e,t,n){var r={newCue:function(e,t,n,r){for(var i,a,o,s,u,l=window.VTTCue||window.TextTrackCue,d=0;d<r.rows.length;d++)if(i=r.rows[d],o=!0,s=0,u="",!i.isEmpty()){for(var f=0;f<i.chars.length;f++)i.chars[f].uchar.match(/\s/)&&o?s++:(u+=i.chars[f].uchar,o=!1);i.cueStartTime=t,a=new l(t,n,u.trim()),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}};t.exports=r},{}],44:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return i(e,[{key:"sample",value:function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}]),e}();n.default=a},{}],45:[function(e,t,n){function r(){}function i(e,t){return t="["+e+"] > "+t}function a(e){var t=self.console[e];return t?function(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];r[0]&&(r[0]=i(e,r[0])),t.apply(self.console,r)}:r}function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){l[t]=e[t]?e[t].bind(e):a(t)})}Object.defineProperty(n,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u={trace:r,debug:r,log:r,warn:r,info:r,error:r},l=u;n.enableLogs=function(e){if(!0===e||"object"===(void 0===e?"undefined":s(e))){o(e,"debug","log","info","warn","error");try{l.log()}catch(e){l=u}}else l=u},n.logger=l},{}],46:[function(e,t,n){"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var n=new Uint8Array(this);void 0===t&&(t=n.length);for(var r=new ArrayBuffer(t-e),i=new Uint8Array(r),a=0;a<i.length;a++)i[a]=n[a+e];return r})},{}],47:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"toString",value:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}}]),e}();n.default=a},{}],48:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(45),o=function(){function e(t){r(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return i(e,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var e,t=this.context;e="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest,e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.open("GET",t.url,!0),t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.responseType=t.responseType;var n=this.stats;n.tfirst=0,n.loaded=0,this.xhrSetup&&this.xhrSetup(e,t.url),this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}},{key:"readystatechange",value:function(e){var t=e.currentTarget,n=t.readyState,r=this.stats,i=this.context,o=this.config;if(!r.aborted&&(window.clearTimeout(this.requestTimeout),n>=2&&(0===r.tfirst&&(r.tfirst=Math.max(performance.now(),r.trequest),this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout-(r.tfirst-r.trequest))),4===n))){var s=t.status;if(s>=200&&s<300){r.tload=Math.max(r.tfirst,performance.now());var u=void 0,l=void 0;"arraybuffer"===i.responseType?(u=t.response,l=u.byteLength):(u=t.responseText,l=u.length),r.loaded=r.total=l;var d={url:t.responseURL,data:u};this.callbacks.onSuccess(d,r,i)}else r.retry>=o.maxRetry||s>=400&&s<499?(a.logger.error(s+" while loading "+i.url),this.callbacks.onError({code:s,text:t.statusText},i)):(a.logger.warn(s+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),r.retry++)}}},{key:"loadtimeout",value:function(){a.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context)}},{key:"loadprogress",value:function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total);var n=this.callbacks.onProgress;n&&n(t,this.context,null)}}]),e}();n.default=o},{45:45}]},{},[33])(33)});